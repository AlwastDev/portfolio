var es=Object.defineProperty;var ns=(D,s,O)=>s in D?es(D,s,{enumerable:!0,configurable:!0,writable:!0,value:O}):D[s]=O;var ne=(D,s,O)=>(ns(D,typeof s!="symbol"?s+"":s,O),O),Be=(D,s,O)=>{if(!s.has(D))throw TypeError("Cannot "+O)};var t=(D,s,O)=>(Be(D,s,"read from private field"),O?O.call(D):s.get(D)),W=(D,s,O)=>{if(s.has(D))throw TypeError("Cannot add the same private member more than once");s instanceof WeakSet?s.add(D):s.set(D,O)},at=(D,s,O,a)=>(Be(D,s,"write to private field"),a?a.call(D,O):s.set(D,O),O);var me=(D,s,O,a)=>({set _(p){at(D,s,p,O)},get _(){return t(D,s,a)}}),q=(D,s,O)=>(Be(D,s,"access private method"),O);import{r as reactExports,a as reactDomExports,j as jsxRuntimeExports,s as styles$2,g as getAugmentedNamespace,b as getDefaultExportFromCjs,R as React,L as Loader}from"./index-e875864e.js";function _mergeNamespaces(D,s){for(var O=0;O<s.length;O++){const a=s[O];if(typeof a!="string"&&!Array.isArray(a)){for(const p in a)if(p!=="default"&&!(p in D)){const G=Object.getOwnPropertyDescriptor(a,p);G&&Object.defineProperty(D,p,G.get?G:{enumerable:!0,get:()=>a[p]})}}}return Object.freeze(Object.defineProperty(D,Symbol.toStringTag,{value:"Module"}))}const PopUp=({isOpen:D,onClose:s,children:O})=>{const a=document.getElementById("popup"),p=reactExports.useRef(null);return!D||!a?null:reactDomExports.createPortal(jsxRuntimeExports.jsx("div",{ref:p,className:styles$2.popUpOverlay,onClick:s,children:jsxRuntimeExports.jsxs("div",{className:styles$2.popUp,onClick:G=>G.stopPropagation(),children:[jsxRuntimeExports.jsx("button",{className:styles$2.popUp__closeButton,onClick:s}),jsxRuntimeExports.jsx("div",{className:styles$2.popUp__children,children:O})]})}),a)},card="_card_1o31w_1",card__certificateName="_card__certificateName_1o31w_22",card__seeButton="_card__seeButton_1o31w_27",styles$1={card,card__certificateName,card__seeButton},MyContext=reactExports.createContext(null);function commonjsRequire(D){throw new Error('Could not dynamically require "'+D+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf$1={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);(function(module,exports){(function(s,O){module.exports=s.pdfjsLib=O()})(globalThis,()=>(()=>{var __webpack_modules__=[,(D,s)=>{var Xt;Object.defineProperty(s,"__esModule",{value:!0}),s.VerbosityLevel=s.Util=s.UnknownErrorException=s.UnexpectedResponseException=s.TextRenderingMode=s.RenderingIntentFlag=s.PromiseCapability=s.PermissionFlag=s.PasswordResponses=s.PasswordException=s.PageActionEventType=s.OPS=s.MissingPDFException=s.MAX_IMAGE_SIZE_TO_CACHE=s.LINE_FACTOR=s.LINE_DESCENT_FACTOR=s.InvalidPDFException=s.ImageKind=s.IDENTITY_MATRIX=s.FormatError=s.FeatureTest=s.FONT_IDENTITY_MATRIX=s.DocumentActionEventType=s.CMapCompressionType=s.BaseException=s.BASELINE_FACTOR=s.AnnotationType=s.AnnotationReplyType=s.AnnotationPrefix=s.AnnotationMode=s.AnnotationFlag=s.AnnotationFieldFlag=s.AnnotationEditorType=s.AnnotationEditorPrefix=s.AnnotationEditorParamsType=s.AnnotationBorderStyleType=s.AnnotationActionEventType=s.AbortException=void 0,s.assert=ht,s.bytesToString=U,s.createValidAbsoluteUrl=Et,s.getModificationDate=xt,s.getUuid=Gt,s.getVerbosityLevel=Y,s.info=rt,s.isArrayBuffer=pt,s.isArrayEqual=wt,s.isNodeJS=void 0,s.normalizeUnicode=zt,s.objectFromMap=ct,s.objectSize=et,s.setVerbosityLevel=T,s.shadow=Pt,s.string32=tt,s.stringToBytes=it,s.stringToPDFString=gt,s.stringToUTF8String=nt,s.unreachable=V,s.utf8StringToString=st,s.warn=lt;const O=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");s.isNodeJS=O;const a=[1,0,0,1,0,0];s.IDENTITY_MATRIX=a;const p=[.001,0,0,.001,0,0];s.FONT_IDENTITY_MATRIX=p;const G=1e7;s.MAX_IMAGE_SIZE_TO_CACHE=G;const H=1.35;s.LINE_FACTOR=H;const ut=.35;s.LINE_DESCENT_FACTOR=ut;const M=ut/H;s.BASELINE_FACTOR=M;const x={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};s.RenderingIntentFlag=x;const g={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};s.AnnotationMode=g;const I="pdfjs_internal_editor_";s.AnnotationEditorPrefix=I;const N={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15};s.AnnotationEditorType=N;const R={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};s.AnnotationEditorParamsType=R;const E={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};s.PermissionFlag=E;const A={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};s.TextRenderingMode=A;const f={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};s.ImageKind=f;const y={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};s.AnnotationType=y;const w={GROUP:"Group",REPLY:"R"};s.AnnotationReplyType=w;const P={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};s.AnnotationFlag=P;const v={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};s.AnnotationFieldFlag=v;const l={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};s.AnnotationBorderStyleType=l;const d={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};s.AnnotationActionEventType=d;const F={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};s.DocumentActionEventType=F;const b={O:"PageOpen",C:"PageClose"};s.PageActionEventType=b;const c={ERRORS:0,WARNINGS:1,INFOS:5};s.VerbosityLevel=c;const k={NONE:0,BINARY:1};s.CMapCompressionType=k;const m={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};s.OPS=m;const $={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};s.PasswordResponses=$;let z=c.WARNINGS;function T(ft){Number.isInteger(ft)&&(z=ft)}function Y(){return z}function rt(ft){z>=c.INFOS&&console.log(`Info: ${ft}`)}function lt(ft){z>=c.WARNINGS&&console.log(`Warning: ${ft}`)}function V(ft){throw new Error(ft)}function ht(ft,Z){ft||V(Z)}function mt(ft){switch(ft==null?void 0:ft.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Et(ft,Z=null,K=null){if(!ft)return null;try{if(K&&typeof ft=="string"){if(K.addDefaultProtocol&&ft.startsWith("www.")){const vt=ft.match(/\./g);(vt==null?void 0:vt.length)>=2&&(ft=`http://${ft}`)}if(K.tryConvertEncoding)try{ft=nt(ft)}catch{}}const yt=Z?new URL(ft,Z):new URL(ft);if(mt(yt))return yt}catch{}return null}function Pt(ft,Z,K,yt=!1){return Object.defineProperty(ft,Z,{value:K,enumerable:!yt,configurable:!0,writable:!1}),K}const C=function(){function Z(K,yt){this.constructor===Z&&V("Cannot initialize BaseException."),this.message=K,this.name=yt}return Z.prototype=new Error,Z.constructor=Z,Z}();s.BaseException=C;class n extends C{constructor(Z,K){super(Z,"PasswordException"),this.code=K}}s.PasswordException=n;class o extends C{constructor(Z,K){super(Z,"UnknownErrorException"),this.details=K}}s.UnknownErrorException=o;class i extends C{constructor(Z){super(Z,"InvalidPDFException")}}s.InvalidPDFException=i;class h extends C{constructor(Z){super(Z,"MissingPDFException")}}s.MissingPDFException=h;class u extends C{constructor(Z,K){super(Z,"UnexpectedResponseException"),this.status=K}}s.UnexpectedResponseException=u;class S extends C{constructor(Z){super(Z,"FormatError")}}s.FormatError=S;class L extends C{constructor(Z){super(Z,"AbortException")}}s.AbortException=L;function U(ft){(typeof ft!="object"||(ft==null?void 0:ft.length)===void 0)&&V("Invalid argument for bytesToString");const Z=ft.length,K=8192;if(Z<K)return String.fromCharCode.apply(null,ft);const yt=[];for(let vt=0;vt<Z;vt+=K){const ee=Math.min(vt+K,Z),te=ft.subarray(vt,ee);yt.push(String.fromCharCode.apply(null,te))}return yt.join("")}function it(ft){typeof ft!="string"&&V("Invalid argument for stringToBytes");const Z=ft.length,K=new Uint8Array(Z);for(let yt=0;yt<Z;++yt)K[yt]=ft.charCodeAt(yt)&255;return K}function tt(ft){return String.fromCharCode(ft>>24&255,ft>>16&255,ft>>8&255,ft&255)}function et(ft){return Object.keys(ft).length}function ct(ft){const Z=Object.create(null);for(const[K,yt]of ft)Z[K]=yt;return Z}function bt(){const ft=new Uint8Array(4);return ft[0]=1,new Uint32Array(ft.buffer,0,1)[0]===1}function dt(){try{return new Function(""),!0}catch{return!1}}class Ft{static get isLittleEndian(){return Pt(this,"isLittleEndian",bt())}static get isEvalSupported(){return Pt(this,"isEvalSupported",dt())}static get isOffscreenCanvasSupported(){return Pt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?Pt(this,"platform",{isWin:!1,isMac:!1}):Pt(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){var Z,K;return Pt(this,"isCSSRoundSupported",(K=(Z=globalThis.CSS)==null?void 0:Z.supports)==null?void 0:K.call(Z,"width: round(1.5px, 1px)"))}}s.FeatureTest=Ft;const jt=[...Array(256).keys()].map(ft=>ft.toString(16).padStart(2,"0"));class St{static makeHexColor(Z,K,yt){return`#${jt[Z]}${jt[K]}${jt[yt]}`}static scaleMinMax(Z,K){let yt;Z[0]?(Z[0]<0&&(yt=K[0],K[0]=K[1],K[1]=yt),K[0]*=Z[0],K[1]*=Z[0],Z[3]<0&&(yt=K[2],K[2]=K[3],K[3]=yt),K[2]*=Z[3],K[3]*=Z[3]):(yt=K[0],K[0]=K[2],K[2]=yt,yt=K[1],K[1]=K[3],K[3]=yt,Z[1]<0&&(yt=K[2],K[2]=K[3],K[3]=yt),K[2]*=Z[1],K[3]*=Z[1],Z[2]<0&&(yt=K[0],K[0]=K[1],K[1]=yt),K[0]*=Z[2],K[1]*=Z[2]),K[0]+=Z[4],K[1]+=Z[4],K[2]+=Z[5],K[3]+=Z[5]}static transform(Z,K){return[Z[0]*K[0]+Z[2]*K[1],Z[1]*K[0]+Z[3]*K[1],Z[0]*K[2]+Z[2]*K[3],Z[1]*K[2]+Z[3]*K[3],Z[0]*K[4]+Z[2]*K[5]+Z[4],Z[1]*K[4]+Z[3]*K[5]+Z[5]]}static applyTransform(Z,K){const yt=Z[0]*K[0]+Z[1]*K[2]+K[4],vt=Z[0]*K[1]+Z[1]*K[3]+K[5];return[yt,vt]}static applyInverseTransform(Z,K){const yt=K[0]*K[3]-K[1]*K[2],vt=(Z[0]*K[3]-Z[1]*K[2]+K[2]*K[5]-K[4]*K[3])/yt,ee=(-Z[0]*K[1]+Z[1]*K[0]+K[4]*K[1]-K[5]*K[0])/yt;return[vt,ee]}static getAxialAlignedBoundingBox(Z,K){const yt=this.applyTransform(Z,K),vt=this.applyTransform(Z.slice(2,4),K),ee=this.applyTransform([Z[0],Z[3]],K),te=this.applyTransform([Z[2],Z[1]],K);return[Math.min(yt[0],vt[0],ee[0],te[0]),Math.min(yt[1],vt[1],ee[1],te[1]),Math.max(yt[0],vt[0],ee[0],te[0]),Math.max(yt[1],vt[1],ee[1],te[1])]}static inverseTransform(Z){const K=Z[0]*Z[3]-Z[1]*Z[2];return[Z[3]/K,-Z[1]/K,-Z[2]/K,Z[0]/K,(Z[2]*Z[5]-Z[4]*Z[3])/K,(Z[4]*Z[1]-Z[5]*Z[0])/K]}static singularValueDecompose2dScale(Z){const K=[Z[0],Z[2],Z[1],Z[3]],yt=Z[0]*K[0]+Z[1]*K[2],vt=Z[0]*K[1]+Z[1]*K[3],ee=Z[2]*K[0]+Z[3]*K[2],te=Z[2]*K[1]+Z[3]*K[3],Q=(yt+te)/2,Tt=Math.sqrt((yt+te)**2-4*(yt*te-ee*vt))/2,Ot=Q+Tt||1,Ct=Q-Tt||1;return[Math.sqrt(Ot),Math.sqrt(Ct)]}static normalizeRect(Z){const K=Z.slice(0);return Z[0]>Z[2]&&(K[0]=Z[2],K[2]=Z[0]),Z[1]>Z[3]&&(K[1]=Z[3],K[3]=Z[1]),K}static intersect(Z,K){const yt=Math.max(Math.min(Z[0],Z[2]),Math.min(K[0],K[2])),vt=Math.min(Math.max(Z[0],Z[2]),Math.max(K[0],K[2]));if(yt>vt)return null;const ee=Math.max(Math.min(Z[1],Z[3]),Math.min(K[1],K[3])),te=Math.min(Math.max(Z[1],Z[3]),Math.max(K[1],K[3]));return ee>te?null:[yt,ee,vt,te]}static bezierBoundingBox(Z,K,yt,vt,ee,te,Q,Tt){const Ot=[],Ct=[[],[]];let Nt,Bt,Qt,At,Kt,It,B,e;for(let J=0;J<2;++J){if(J===0?(Bt=6*Z-12*yt+6*ee,Nt=-3*Z+9*yt-9*ee+3*Q,Qt=3*yt-3*Z):(Bt=6*K-12*vt+6*te,Nt=-3*K+9*vt-9*te+3*Tt,Qt=3*vt-3*K),Math.abs(Nt)<1e-12){if(Math.abs(Bt)<1e-12)continue;At=-Qt/Bt,0<At&&At<1&&Ot.push(At);continue}B=Bt*Bt-4*Qt*Nt,e=Math.sqrt(B),!(B<0)&&(Kt=(-Bt+e)/(2*Nt),0<Kt&&Kt<1&&Ot.push(Kt),It=(-Bt-e)/(2*Nt),0<It&&It<1&&Ot.push(It))}let _=Ot.length,j;const X=_;for(;_--;)At=Ot[_],j=1-At,Ct[0][_]=j*j*j*Z+3*j*j*At*yt+3*j*At*At*ee+At*At*At*Q,Ct[1][_]=j*j*j*K+3*j*j*At*vt+3*j*At*At*te+At*At*At*Tt;return Ct[0][X]=Z,Ct[1][X]=K,Ct[0][X+1]=Q,Ct[1][X+1]=Tt,Ct[0].length=Ct[1].length=X+2,[Math.min(...Ct[0]),Math.min(...Ct[1]),Math.max(...Ct[0]),Math.max(...Ct[1])]}}s.Util=St;const Lt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function gt(ft){if(ft[0]>="ï"){let K;if(ft[0]==="þ"&&ft[1]==="ÿ"?K="utf-16be":ft[0]==="ÿ"&&ft[1]==="þ"?K="utf-16le":ft[0]==="ï"&&ft[1]==="»"&&ft[2]==="¿"&&(K="utf-8"),K)try{const yt=new TextDecoder(K,{fatal:!0}),vt=it(ft);return yt.decode(vt)}catch(yt){lt(`stringToPDFString: "${yt}".`)}}const Z=[];for(let K=0,yt=ft.length;K<yt;K++){const vt=Lt[ft.charCodeAt(K)];Z.push(vt?String.fromCharCode(vt):ft.charAt(K))}return Z.join("")}function nt(ft){return decodeURIComponent(escape(ft))}function st(ft){return unescape(encodeURIComponent(ft))}function pt(ft){return typeof ft=="object"&&(ft==null?void 0:ft.byteLength)!==void 0}function wt(ft,Z){if(ft.length!==Z.length)return!1;for(let K=0,yt=ft.length;K<yt;K++)if(ft[K]!==Z[K])return!1;return!0}function xt(ft=new Date){return[ft.getUTCFullYear().toString(),(ft.getUTCMonth()+1).toString().padStart(2,"0"),ft.getUTCDate().toString().padStart(2,"0"),ft.getUTCHours().toString().padStart(2,"0"),ft.getUTCMinutes().toString().padStart(2,"0"),ft.getUTCSeconds().toString().padStart(2,"0")].join("")}class Ut{constructor(){W(this,Xt,!1);this.promise=new Promise((Z,K)=>{this.resolve=yt=>{at(this,Xt,!0),Z(yt)},this.reject=yt=>{at(this,Xt,!0),K(yt)}})}get settled(){return t(this,Xt)}}Xt=new WeakMap,s.PromiseCapability=Ut;let Vt=null,Wt=null;function zt(ft){return Vt||(Vt=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Wt=new Map([["ﬅ","ſt"]])),ft.replaceAll(Vt,(Z,K,yt)=>K?K.normalize("NFKC"):Wt.get(yt))}function Gt(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const ft=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(ft);else for(let Z=0;Z<32;Z++)ft[Z]=Math.floor(Math.random()*255);return U(ft)}const Ht="pdfjs_internal_id_";s.AnnotationPrefix=Ht},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var D,O,a,p,de,H,Te,M,x,g,I,N,R,E,A,f,Pe,w,P,je,l,d;Object.defineProperty(exports,"__esModule",{value:!0}),exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports.build=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;function getDocument(b){if(typeof b=="string"||b instanceof URL?b={url:b}:(0,_util.isArrayBuffer)(b)&&(b={data:b}),typeof b!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!b.url&&!b.data&&!b.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const c=new PDFDocumentLoadingTask,{docId:k}=c,m=b.url?getUrlProp(b.url):null,$=b.data?getDataProp(b.data):null,z=b.httpHeaders||null,T=b.withCredentials===!0,Y=b.password??null,rt=b.range instanceof PDFDataRangeTransport?b.range:null,lt=Number.isInteger(b.rangeChunkSize)&&b.rangeChunkSize>0?b.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let V=b.worker instanceof PDFWorker?b.worker:null;const ht=b.verbosity,mt=typeof b.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(b.docBaseUrl)?b.docBaseUrl:null,Et=typeof b.cMapUrl=="string"?b.cMapUrl:null,Pt=b.cMapPacked!==!1,C=b.CMapReaderFactory||DefaultCMapReaderFactory,n=typeof b.standardFontDataUrl=="string"?b.standardFontDataUrl:null,o=b.StandardFontDataFactory||DefaultStandardFontDataFactory,i=b.stopAtErrors!==!0,h=Number.isInteger(b.maxImageSize)&&b.maxImageSize>-1?b.maxImageSize:-1,u=b.isEvalSupported!==!1,S=typeof b.isOffscreenCanvasSupported=="boolean"?b.isOffscreenCanvasSupported:!_util.isNodeJS,L=Number.isInteger(b.canvasMaxAreaInBytes)?b.canvasMaxAreaInBytes:-1,U=typeof b.disableFontFace=="boolean"?b.disableFontFace:_util.isNodeJS,it=b.fontExtraProperties===!0,tt=b.enableXfa===!0,et=b.ownerDocument||globalThis.document,ct=b.disableRange===!0,bt=b.disableStream===!0,dt=b.disableAutoFetch===!0,Ft=b.pdfBug===!0,jt=rt?rt.length:b.length??NaN,St=typeof b.useSystemFonts=="boolean"?b.useSystemFonts:!_util.isNodeJS&&!U,Lt=typeof b.useWorkerFetch=="boolean"?b.useWorkerFetch:C===_display_utils.DOMCMapReaderFactory&&o===_display_utils.DOMStandardFontDataFactory&&Et&&n&&(0,_display_utils.isValidFetchUrl)(Et,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(n,document.baseURI),gt=b.canvasFactory||new DefaultCanvasFactory({ownerDocument:et}),nt=b.filterFactory||new DefaultFilterFactory({docId:k,ownerDocument:et}),st=null;(0,_util.setVerbosityLevel)(ht);const pt={canvasFactory:gt,filterFactory:nt};if(Lt||(pt.cMapReaderFactory=new C({baseUrl:Et,isCompressed:Pt}),pt.standardFontDataFactory=new o({baseUrl:n})),!V){const Ut={verbosity:ht,port:_worker_options.GlobalWorkerOptions.workerPort};V=Ut.port?PDFWorker.fromPort(Ut):new PDFWorker(Ut),c._worker=V}const wt={docId:k,apiVersion:"3.11.174",data:$,password:Y,disableAutoFetch:dt,rangeChunkSize:lt,length:jt,docBaseUrl:mt,enableXfa:tt,evaluatorOptions:{maxImageSize:h,disableFontFace:U,ignoreErrors:i,isEvalSupported:u,isOffscreenCanvasSupported:S,canvasMaxAreaInBytes:L,fontExtraProperties:it,useSystemFonts:St,cMapUrl:Lt?Et:null,standardFontDataUrl:Lt?n:null}},xt={ignoreErrors:i,isEvalSupported:u,disableFontFace:U,fontExtraProperties:it,enableXfa:tt,ownerDocument:et,disableAutoFetch:dt,pdfBug:Ft,styleElement:st};return V.promise.then(function(){if(c.destroyed)throw new Error("Loading aborted");const Ut=_fetchDocument(V,wt),Vt=new Promise(function(Wt){let zt;rt?zt=new _transport_stream.PDFDataTransportStream({length:jt,initialData:rt.initialData,progressiveDone:rt.progressiveDone,contentDispositionFilename:rt.contentDispositionFilename,disableRange:ct,disableStream:bt},rt):$||(zt=(Ht=>_util.isNodeJS?new _displayNode_stream.PDFNodeStream(Ht):(0,_display_utils.isValidFetchUrl)(Ht.url)?new _displayFetch_stream.PDFFetchStream(Ht):new _displayNetwork.PDFNetworkStream(Ht))({url:m,length:jt,httpHeaders:z,withCredentials:T,rangeChunkSize:lt,disableRange:ct,disableStream:bt})),Wt(zt)});return Promise.all([Ut,Vt]).then(function([Wt,zt]){if(c.destroyed)throw new Error("Loading aborted");const Gt=new _message_handler.MessageHandler(k,Wt,V.port),Ht=new WorkerTransport(Gt,c,zt,xt,pt);c._transport=Ht,Gt.send("Ready",null)})}).catch(c._capability.reject),c}async function _fetchDocument(b,c){if(b.destroyed)throw new Error("Worker was destroyed");const k=await b.messageHandler.sendWithPromise("GetDocRequest",c,c.data?[c.data.buffer]:null);if(b.destroyed)throw new Error("Worker was destroyed");return k}function getUrlProp(b){if(b instanceof URL)return b.href;try{return new URL(b,window.location).href}catch{if(_util.isNodeJS&&typeof b=="string")return b}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(b){if(_util.isNodeJS&&typeof Buffer<"u"&&b instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(b instanceof Uint8Array&&b.byteLength===b.buffer.byteLength)return b;if(typeof b=="string")return(0,_util.stringToBytes)(b);if(typeof b=="object"&&!isNaN(b==null?void 0:b.length)||(0,_util.isArrayBuffer)(b))return new Uint8Array(b);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}const s=class s{constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${me(s,D)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var c,k,m;this.destroyed=!0;try{(c=this._worker)!=null&&c.port&&(this._worker._pendingDestroy=!0),await((k=this._transport)==null?void 0:k.destroy())}catch($){throw(m=this._worker)!=null&&m.port&&delete this._worker._pendingDestroy,$}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};D=new WeakMap,W(s,D,0);let PDFDocumentLoadingTask=s;exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(c,k,m=!1,$=null){this.length=c,this.initialData=k,this.progressiveDone=m,this.contentDispositionFilename=$,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(c){this._rangeListeners.push(c)}addProgressListener(c){this._progressListeners.push(c)}addProgressiveReadListener(c){this._progressiveReadListeners.push(c)}addProgressiveDoneListener(c){this._progressiveDoneListeners.push(c)}onDataRange(c,k){for(const m of this._rangeListeners)m(c,k)}onDataProgress(c,k){this._readyCapability.promise.then(()=>{for(const m of this._progressListeners)m(c,k)})}onDataProgressiveRead(c){this._readyCapability.promise.then(()=>{for(const k of this._progressiveReadListeners)k(c)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const c of this._progressiveDoneListeners)c()})}transportReady(){this._readyCapability.resolve()}requestDataRange(c,k){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(c,k){this._pdfInfo=c,this._transport=k,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then(m=>{if(!m)return m;const $=[];for(const z in m)$.push(...m[z]);return $}))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(c){return this._transport.getPage(c)}getPageIndex(c){return this._transport.getPageIndex(c)}getDestinations(){return this._transport.getDestinations()}getDestination(c){return this._transport.getDestination(c)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(c=!1){return this._transport.startCleanup(c||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(c,k,m,$=!1){W(this,p);W(this,H);W(this,O,null);W(this,a,!1);this._pageIndex=c,this._pageInfo=k,this._transport=m,this._stats=$?new _display_utils.StatTimer:null,this._pdfBug=$,this.commonObjs=m.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:c,rotation:k=this.rotate,offsetX:m=0,offsetY:$=0,dontFlip:z=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:c,rotation:k,offsetX:m,offsetY:$,dontFlip:z})}getAnnotations({intent:c="display"}={}){const k=this._transport.getRenderingIntent(c);return this._transport.getAnnotations(this._pageIndex,k.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var c;return((c=this._transport._htmlForXfa)==null?void 0:c.children[this._pageIndex])||null}render({canvasContext:c,viewport:k,intent:m="display",annotationMode:$=_util.AnnotationMode.ENABLE,transform:z=null,background:T=null,optionalContentConfigPromise:Y=null,annotationCanvasMap:rt=null,pageColors:lt=null,printAnnotationStorage:V=null}){var o,i;(o=this._stats)==null||o.time("Overall");const ht=this._transport.getRenderingIntent(m,$,V);at(this,a,!1),q(this,H,Te).call(this),Y||(Y=this._transport.getOptionalContentConfig());let mt=this._intentStates.get(ht.cacheKey);mt||(mt=Object.create(null),this._intentStates.set(ht.cacheKey,mt)),mt.streamReaderCancelTimeout&&(clearTimeout(mt.streamReaderCancelTimeout),mt.streamReaderCancelTimeout=null);const Et=!!(ht.renderingIntent&_util.RenderingIntentFlag.PRINT);mt.displayReadyCapability||(mt.displayReadyCapability=new _util.PromiseCapability,mt.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(i=this._stats)==null||i.time("Page Request"),this._pumpOperatorList(ht));const Pt=h=>{var u,S;mt.renderTasks.delete(C),(this._maybeCleanupAfterRender||Et)&&at(this,a,!0),q(this,p,de).call(this,!Et),h?(C.capability.reject(h),this._abortOperatorList({intentState:mt,reason:h instanceof Error?h:new Error(h)})):C.capability.resolve(),(u=this._stats)==null||u.timeEnd("Rendering"),(S=this._stats)==null||S.timeEnd("Overall")},C=new InternalRenderTask({callback:Pt,params:{canvasContext:c,viewport:k,transform:z,background:T},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:rt,operatorList:mt.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!Et,pdfBug:this._pdfBug,pageColors:lt});(mt.renderTasks||(mt.renderTasks=new Set)).add(C);const n=C.task;return Promise.all([mt.displayReadyCapability.promise,Y]).then(([h,u])=>{var S;if(this.destroyed){Pt();return}(S=this._stats)==null||S.time("Rendering"),C.initializeGraphics({transparency:h,optionalContentConfig:u}),C.operatorListChanged()}).catch(Pt),n}getOperatorList({intent:c="display",annotationMode:k=_util.AnnotationMode.ENABLE,printAnnotationStorage:m=null}={}){var rt;function $(){T.operatorList.lastChunk&&(T.opListReadCapability.resolve(T.operatorList),T.renderTasks.delete(Y))}const z=this._transport.getRenderingIntent(c,k,m,!0);let T=this._intentStates.get(z.cacheKey);T||(T=Object.create(null),this._intentStates.set(z.cacheKey,T));let Y;return T.opListReadCapability||(Y=Object.create(null),Y.operatorListChanged=$,T.opListReadCapability=new _util.PromiseCapability,(T.renderTasks||(T.renderTasks=new Set)).add(Y),T.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(rt=this._stats)==null||rt.time("Page Request"),this._pumpOperatorList(z)),T.opListReadCapability.promise}streamTextContent({includeMarkedContent:c=!1,disableNormalization:k=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:c===!0,disableNormalization:k===!0},{highWaterMark:100,size($){return $.items.length}})}getTextContent(c={}){if(this._transport._htmlForXfa)return this.getXfa().then(m=>_xfa_text.XfaText.textContent(m));const k=this.streamTextContent(c);return new Promise(function(m,$){function z(){T.read().then(function({value:rt,done:lt}){if(lt){m(Y);return}Object.assign(Y.styles,rt.styles),Y.items.push(...rt.items),z()},$)}const T=k.getReader(),Y={items:[],styles:Object.create(null)};z()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const c=[];for(const k of this._intentStates.values())if(this._abortOperatorList({intentState:k,reason:new Error("Page was destroyed."),force:!0}),!k.opListReadCapability)for(const m of k.renderTasks)c.push(m.completed),m.cancel();return this.objs.clear(),at(this,a,!1),q(this,H,Te).call(this),Promise.all(c)}cleanup(c=!1){at(this,a,!0);const k=q(this,p,de).call(this,!1);return c&&k&&this._stats&&(this._stats=new _display_utils.StatTimer),k}_startRenderPage(c,k){var $,z;const m=this._intentStates.get(k);m&&(($=this._stats)==null||$.timeEnd("Page Request"),(z=m.displayReadyCapability)==null||z.resolve(c))}_renderPageChunk(c,k){for(let m=0,$=c.length;m<$;m++)k.operatorList.fnArray.push(c.fnArray[m]),k.operatorList.argsArray.push(c.argsArray[m]);k.operatorList.lastChunk=c.lastChunk,k.operatorList.separateAnnots=c.separateAnnots;for(const m of k.renderTasks)m.operatorListChanged();c.lastChunk&&q(this,p,de).call(this,!0)}_pumpOperatorList({renderingIntent:c,cacheKey:k,annotationStorageSerializable:m}){const{map:$,transfers:z}=m,Y=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:c,cacheKey:k,annotationStorage:$},z).getReader(),rt=this._intentStates.get(k);rt.streamReader=Y;const lt=()=>{Y.read().then(({value:V,done:ht})=>{if(ht){rt.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(V,rt),lt())},V=>{if(rt.streamReader=null,!this._transport.destroyed){if(rt.operatorList){rt.operatorList.lastChunk=!0;for(const ht of rt.renderTasks)ht.operatorListChanged();q(this,p,de).call(this,!0)}if(rt.displayReadyCapability)rt.displayReadyCapability.reject(V);else if(rt.opListReadCapability)rt.opListReadCapability.reject(V);else throw V}})};lt()}_abortOperatorList({intentState:c,reason:k,force:m=!1}){if(c.streamReader){if(c.streamReaderCancelTimeout&&(clearTimeout(c.streamReaderCancelTimeout),c.streamReaderCancelTimeout=null),!m){if(c.renderTasks.size>0)return;if(k instanceof _display_utils.RenderingCancelledException){let $=RENDERING_CANCELLED_TIMEOUT;k.extraDelay>0&&k.extraDelay<1e3&&($+=k.extraDelay),c.streamReaderCancelTimeout=setTimeout(()=>{c.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:c,reason:k,force:!0})},$);return}}if(c.streamReader.cancel(new _util.AbortException(k.message)).catch(()=>{}),c.streamReader=null,!this._transport.destroyed){for(const[$,z]of this._intentStates)if(z===c){this._intentStates.delete($);break}this.cleanup()}}}get stats(){return this._stats}}O=new WeakMap,a=new WeakMap,p=new WeakSet,de=function(c=!1){if(q(this,H,Te).call(this),!t(this,a)||this.destroyed)return!1;if(c)return at(this,O,setTimeout(()=>{at(this,O,null),q(this,p,de).call(this,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:k,operatorList:m}of this._intentStates.values())if(k.size>0||!m.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),at(this,a,!1),!0},H=new WeakSet,Te=function(){t(this,O)&&(clearTimeout(t(this,O)),at(this,O,null))},exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){W(this,M,new Set);W(this,x,Promise.resolve())}postMessage(c,k){const m={data:structuredClone(c,k?{transfer:k}:null)};t(this,x).then(()=>{for(const $ of t(this,M))$.call(this,m)})}addEventListener(c,k){t(this,M).add(k)}removeEventListener(c,k){t(this,M).delete(k)}terminate(){t(this,M).clear()}}M=new WeakMap,x=new WeakMap,exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_util.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const b=(g=document==null?void 0:document.currentScript)==null?void 0:g.src;b&&(PDFWorkerUtil.fallbackWorkerSrc=b.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(b,c){let k;try{if(k=new URL(b),!k.origin||k.origin==="null")return!1}catch{return!1}const m=new URL(c,k);return k.origin===m.origin},PDFWorkerUtil.createCDNWrapper=function(b){const c=`importScripts("${b}");`;return URL.createObjectURL(new Blob([c]))}}const _PDFWorker=class _PDFWorker{constructor({name:b=null,port:c=null,verbosity:k=(0,_util.getVerbosityLevel)()}={}){var m;if(this.name=b,this.destroyed=!1,this.verbosity=k,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,c){if((m=t(_PDFWorker,I))!=null&&m.has(c))throw new Error("Cannot use more than one PDFWorker per port.");(t(_PDFWorker,I)||at(_PDFWorker,I,new WeakMap)).set(c,this),this._initializeFromPort(c);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(b){this._port=b,this._messageHandler=new _message_handler.MessageHandler("main","worker",b),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:b}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,b)||(b=PDFWorkerUtil.createCDNWrapper(new URL(b,window.location).href));const c=new Worker(b),k=new _message_handler.MessageHandler("main","worker",c),m=()=>{c.removeEventListener("error",$),k.destroy(),c.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},$=()=>{this._webWorker||m()};c.addEventListener("error",$),k.on("test",T=>{if(c.removeEventListener("error",$),this.destroyed){m();return}T?(this._messageHandler=k,this._port=c,this._webWorker=c,this._readyCapability.resolve(),k.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),k.destroy(),c.terminate())}),k.on("ready",T=>{if(c.removeEventListener("error",$),this.destroyed){m();return}try{z()}catch{this._setupFakeWorker()}});const z=()=>{const T=new Uint8Array;k.send("test",T,[T.buffer])};z();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(b=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const c=new LoopbackPort;this._port=c;const k=`fake${PDFWorkerUtil.fakeWorkerId++}`,m=new _message_handler.MessageHandler(k+"_worker",k,c);b.setup(m,c);const $=new _message_handler.MessageHandler(k,k+"_worker",c);this._messageHandler=$,this._readyCapability.resolve(),$.send("configure",{verbosity:this.verbosity})}).catch(b=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${b.message}".`))})}destroy(){var b;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(b=t(_PDFWorker,I))==null||b.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(b){var k;if(!(b!=null&&b.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const c=(k=t(this,I))==null?void 0:k.get(b.port);if(c){if(c._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return c}return new _PDFWorker(b)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var b;try{return((b=globalThis.pdfjsWorker)==null?void 0:b.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};I=new WeakMap,W(_PDFWorker,I,void 0);let PDFWorker=_PDFWorker;exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(c,k,m,$,z){W(this,f);W(this,N,new Map);W(this,R,new Map);W(this,E,new Map);W(this,A,null);this.messageHandler=c,this.loadingTask=k,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:$.ownerDocument,styleElement:$.styleElement}),this._params=$,this.canvasFactory=z.canvasFactory,this.filterFactory=z.filterFactory,this.cMapReaderFactory=z.cMapReaderFactory,this.standardFontDataFactory=z.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=m,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(c,k=_util.AnnotationMode.ENABLE,m=null,$=!1){let z=_util.RenderingIntentFlag.DISPLAY,T=_annotation_storage.SerializableEmpty;switch(c){case"any":z=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":z=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${c}`)}switch(k){case _util.AnnotationMode.DISABLE:z+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:z+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:z+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,T=(z&_util.RenderingIntentFlag.PRINT&&m instanceof _annotation_storage.PrintAnnotationStorage?m:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${k}`)}return $&&(z+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:z,cacheKey:`${z}_${T.hash}`,annotationStorageSerializable:T}}destroy(){var m;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,(m=t(this,A))==null||m.reject(new Error("Worker was destroyed during onPassword callback"));const c=[];for(const $ of t(this,R).values())c.push($._destroy());t(this,R).clear(),t(this,E).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const k=this.messageHandler.sendWithPromise("Terminate",null);return c.push(k),Promise.all(c).then(()=>{var $;this.commonObjs.clear(),this.fontLoader.clear(),t(this,N).clear(),this.filterFactory.destroy(),($=this._networkStream)==null||$.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:c,loadingTask:k}=this;c.on("GetReader",(m,$)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=z=>{this._lastProgress={loaded:z.loaded,total:z.total}},$.onPull=()=>{this._fullReader.read().then(function({value:z,done:T}){if(T){$.close();return}(0,_util.assert)(z instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),$.enqueue(new Uint8Array(z),1,[z])}).catch(z=>{$.error(z)})},$.onCancel=z=>{this._fullReader.cancel(z),$.ready.catch(T=>{if(!this.destroyed)throw T})}}),c.on("ReaderHeadersReady",m=>{const $=new _util.PromiseCapability,z=this._fullReader;return z.headersReady.then(()=>{var T;(!z.isStreamingSupported||!z.isRangeSupported)&&(this._lastProgress&&((T=k.onProgress)==null||T.call(k,this._lastProgress)),z.onProgress=Y=>{var rt;(rt=k.onProgress)==null||rt.call(k,{loaded:Y.loaded,total:Y.total})}),$.resolve({isStreamingSupported:z.isStreamingSupported,isRangeSupported:z.isRangeSupported,contentLength:z.contentLength})},$.reject),$.promise}),c.on("GetRangeReader",(m,$)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const z=this._networkStream.getRangeReader(m.begin,m.end);if(!z){$.close();return}$.onPull=()=>{z.read().then(function({value:T,done:Y}){if(Y){$.close();return}(0,_util.assert)(T instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),$.enqueue(new Uint8Array(T),1,[T])}).catch(T=>{$.error(T)})},$.onCancel=T=>{z.cancel(T),$.ready.catch(Y=>{if(!this.destroyed)throw Y})}}),c.on("GetDoc",({pdfInfo:m})=>{this._numPages=m.numPages,this._htmlForXfa=m.htmlForXfa,delete m.htmlForXfa,k._capability.resolve(new PDFDocumentProxy(m,this))}),c.on("DocException",function(m){let $;switch(m.name){case"PasswordException":$=new _util.PasswordException(m.message,m.code);break;case"InvalidPDFException":$=new _util.InvalidPDFException(m.message);break;case"MissingPDFException":$=new _util.MissingPDFException(m.message);break;case"UnexpectedResponseException":$=new _util.UnexpectedResponseException(m.message,m.status);break;case"UnknownErrorException":$=new _util.UnknownErrorException(m.message,m.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}k._capability.reject($)}),c.on("PasswordRequest",m=>{if(at(this,A,new _util.PromiseCapability),k.onPassword){const $=z=>{z instanceof Error?t(this,A).reject(z):t(this,A).resolve({password:z})};try{k.onPassword($,m.code)}catch(z){t(this,A).reject(z)}}else t(this,A).reject(new _util.PasswordException(m.message,m.code));return t(this,A).promise}),c.on("DataLoaded",m=>{var $;($=k.onProgress)==null||$.call(k,{loaded:m.length,total:m.length}),this.downloadInfoCapability.resolve(m)}),c.on("StartRenderPage",m=>{if(this.destroyed)return;t(this,R).get(m.pageIndex)._startRenderPage(m.transparency,m.cacheKey)}),c.on("commonobj",([m,$,z])=>{var T;if(!this.destroyed&&!this.commonObjs.has(m))switch($){case"Font":const Y=this._params;if("error"in z){const V=z.error;(0,_util.warn)(`Error during font loading: ${V}`),this.commonObjs.resolve(m,V);break}const rt=Y.pdfBug&&((T=globalThis.FontInspector)!=null&&T.enabled)?(V,ht)=>globalThis.FontInspector.fontAdded(V,ht):null,lt=new _font_loader.FontFaceObject(z,{isEvalSupported:Y.isEvalSupported,disableFontFace:Y.disableFontFace,ignoreErrors:Y.ignoreErrors,inspectFont:rt});this.fontLoader.bind(lt).catch(V=>c.sendWithPromise("FontFallback",{id:m})).finally(()=>{!Y.fontExtraProperties&&lt.data&&(lt.data=null),this.commonObjs.resolve(m,lt)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(m,z);break;default:throw new Error(`Got unknown common object type ${$}`)}}),c.on("obj",([m,$,z,T])=>{var rt;if(this.destroyed)return;const Y=t(this,R).get($);if(!Y.objs.has(m))switch(z){case"Image":if(Y.objs.resolve(m,T),T){let lt;if(T.bitmap){const{width:V,height:ht}=T;lt=V*ht*4}else lt=((rt=T.data)==null?void 0:rt.length)||0;lt>_util.MAX_IMAGE_SIZE_TO_CACHE&&(Y._maybeCleanupAfterRender=!0)}break;case"Pattern":Y.objs.resolve(m,T);break;default:throw new Error(`Got unknown object type ${z}`)}}),c.on("DocProgress",m=>{var $;this.destroyed||($=k.onProgress)==null||$.call(k,{loaded:m.loaded,total:m.total})}),c.on("FetchBuiltInCMap",m=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(m):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),c.on("FetchStandardFontData",m=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(m):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var m;this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:c,transfers:k}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:c,filename:((m=this._fullReader)==null?void 0:m.filename)??null},k).finally(()=>{this.annotationStorage.resetModified()})}getPage(c){if(!Number.isInteger(c)||c<=0||c>this._numPages)return Promise.reject(new Error("Invalid page request."));const k=c-1,m=t(this,E).get(k);if(m)return m;const $=this.messageHandler.sendWithPromise("GetPage",{pageIndex:k}).then(z=>{if(this.destroyed)throw new Error("Transport destroyed");const T=new PDFPageProxy(k,z,this,this._params.pdfBug);return t(this,R).set(k,T),T});return t(this,E).set(k,$),$}getPageIndex(c){return typeof c!="object"||c===null||!Number.isInteger(c.num)||c.num<0||!Number.isInteger(c.gen)||c.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:c.num,gen:c.gen})}getAnnotations(c,k){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:c,intent:k})}getFieldObjects(){return q(this,f,Pe).call(this,"GetFieldObjects")}hasJSActions(){return q(this,f,Pe).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(c){return typeof c!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:c})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return q(this,f,Pe).call(this,"GetDocJSActions")}getPageJSActions(c){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:c})}getStructTree(c){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:c})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(c=>new _optional_content_config.OptionalContentConfig(c))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const c="GetMetadata",k=t(this,N).get(c);if(k)return k;const m=this.messageHandler.sendWithPromise(c,null).then($=>{var z,T;return{info:$[0],metadata:$[1]?new _metadata.Metadata($[1]):null,contentDispositionFilename:((z=this._fullReader)==null?void 0:z.filename)??null,contentLength:((T=this._fullReader)==null?void 0:T.contentLength)??null}});return t(this,N).set(c,m),m}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(c=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const k of t(this,R).values())if(!k.cleanup())throw new Error(`startCleanup: Page ${k.pageNumber} is currently rendering.`);this.commonObjs.clear(),c||this.fontLoader.clear(),t(this,N).clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:c,enableXfa:k}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:c,enableXfa:k})}}N=new WeakMap,R=new WeakMap,E=new WeakMap,A=new WeakMap,f=new WeakSet,Pe=function(c,k=null){const m=t(this,N).get(c);if(m)return m;const $=this.messageHandler.sendWithPromise(c,k);return t(this,N).set(c,$),$};class PDFObjects{constructor(){W(this,P);W(this,w,Object.create(null))}get(c,k=null){if(k){const $=q(this,P,je).call(this,c);return $.capability.promise.then(()=>k($.data)),null}const m=t(this,w)[c];if(!(m!=null&&m.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${c}.`);return m.data}has(c){const k=t(this,w)[c];return(k==null?void 0:k.capability.settled)||!1}resolve(c,k=null){const m=q(this,P,je).call(this,c);m.data=k,m.capability.resolve()}clear(){var c;for(const k in t(this,w)){const{data:m}=t(this,w)[k];(c=m==null?void 0:m.bitmap)==null||c.close()}at(this,w,Object.create(null))}}w=new WeakMap,P=new WeakSet,je=function(c){var k;return(k=t(this,w))[c]||(k[c]={capability:new _util.PromiseCapability,data:null})};class RenderTask{constructor(c){W(this,l,null);at(this,l,c),this.onContinue=null}get promise(){return t(this,l).capability.promise}cancel(c=0){t(this,l).cancel(null,c)}get separateAnnots(){const{separateAnnots:c}=t(this,l).operatorList;if(!c)return!1;const{annotationCanvasMap:k}=t(this,l);return c.form||c.canvas&&(k==null?void 0:k.size)>0}}l=new WeakMap,exports.RenderTask=RenderTask;const F=class F{constructor({callback:c,params:k,objs:m,commonObjs:$,annotationCanvasMap:z,operatorList:T,pageIndex:Y,canvasFactory:rt,filterFactory:lt,useRequestAnimationFrame:V=!1,pdfBug:ht=!1,pageColors:mt=null}){this.callback=c,this.params=k,this.objs=m,this.commonObjs=$,this.annotationCanvasMap=z,this.operatorListIdx=null,this.operatorList=T,this._pageIndex=Y,this.canvasFactory=rt,this.filterFactory=lt,this._pdfBug=ht,this.pageColors=mt,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=V===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=k.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:c=!1,optionalContentConfig:k}){var Y,rt;if(this.cancelled)return;if(this._canvas){if(t(F,d).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");t(F,d).add(this._canvas)}this._pdfBug&&((Y=globalThis.StepperManager)!=null&&Y.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:m,viewport:$,transform:z,background:T}=this.params;this.gfx=new _canvas.CanvasGraphics(m,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:k},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:z,viewport:$,transparency:c,background:T}),this.operatorListIdx=0,this.graphicsReady=!0,(rt=this.graphicsReadyCallback)==null||rt.call(this)}cancel(c=null,k=0){var m;this.running=!1,this.cancelled=!0,(m=this.gfx)==null||m.endDrawing(),t(F,d).delete(this._canvas),this.callback(c||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,k))}operatorListChanged(){var c;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(c=this.stepper)==null||c.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),t(F,d).delete(this._canvas),this.callback())))}};d=new WeakMap,W(F,d,new WeakSet);let InternalRenderTask=F;const version="3.11.174";exports.version=version;const build="ce8716743";exports.build=build},(D,s,O)=>{var x,g,I,vn,R;Object.defineProperty(s,"__esModule",{value:!0}),s.SerializableEmpty=s.PrintAnnotationStorage=s.AnnotationStorage=void 0;var a=O(1),p=O(4),G=O(8);const H=Object.freeze({map:null,hash:"",transfers:void 0});s.SerializableEmpty=H;class ut{constructor(){W(this,I);W(this,x,!1);W(this,g,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(A,f){const y=t(this,g).get(A);return y===void 0?f:Object.assign(f,y)}getRawValue(A){return t(this,g).get(A)}remove(A){if(t(this,g).delete(A),t(this,g).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const f of t(this,g).values())if(f instanceof p.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(A,f){const y=t(this,g).get(A);let w=!1;if(y!==void 0)for(const[P,v]of Object.entries(f))y[P]!==v&&(w=!0,y[P]=v);else w=!0,t(this,g).set(A,f);w&&q(this,I,vn).call(this),f instanceof p.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(f.constructor._type)}has(A){return t(this,g).has(A)}getAll(){return t(this,g).size>0?(0,a.objectFromMap)(t(this,g)):null}setAll(A){for(const[f,y]of Object.entries(A))this.setValue(f,y)}get size(){return t(this,g).size}resetModified(){t(this,x)&&(at(this,x,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new M(this)}get serializable(){if(t(this,g).size===0)return H;const A=new Map,f=new G.MurmurHash3_64,y=[],w=Object.create(null);let P=!1;for(const[v,l]of t(this,g)){const d=l instanceof p.AnnotationEditor?l.serialize(!1,w):l;d&&(A.set(v,d),f.update(`${v}:${JSON.stringify(d)}`),P||(P=!!d.bitmap))}if(P)for(const v of A.values())v.bitmap&&y.push(v.bitmap);return A.size>0?{map:A,hash:f.hexdigest(),transfers:y}:H}}x=new WeakMap,g=new WeakMap,I=new WeakSet,vn=function(){t(this,x)||(at(this,x,!0),typeof this.onSetModified=="function"&&this.onSetModified())},s.AnnotationStorage=ut;class M extends ut{constructor(f){super();W(this,R,void 0);const{map:y,hash:w,transfers:P}=f.serializable,v=structuredClone(y,P?{transfer:P}:null);at(this,R,{map:v,hash:w,transfers:P})}get print(){(0,a.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return t(this,R)}}R=new WeakMap,s.PrintAnnotationStorage=M},(D,s,O)=>{var M,x,g,I,N,R,E,A,f,y,w,P,v,l,d,Ue,b,We,k,He,$,$e,T,En,rt,Sn,V,Tn,mt,Ge,Pt,Pn;Object.defineProperty(s,"__esModule",{value:!0}),s.AnnotationEditor=void 0;var a=O(5),p=O(1),G=O(6);const n=class n{constructor(i){W(this,d);W(this,b);W(this,$);W(this,T);W(this,rt);W(this,V);W(this,mt);W(this,Pt);W(this,M,"");W(this,x,!1);W(this,g,null);W(this,I,null);W(this,N,null);W(this,R,!1);W(this,E,null);W(this,A,this.focusin.bind(this));W(this,f,this.focusout.bind(this));W(this,y,!1);W(this,w,!1);W(this,P,!1);ne(this,"_initialOptions",Object.create(null));ne(this,"_uiManager",null);ne(this,"_focusEventsAllowed",!0);ne(this,"_l10nPromise",null);W(this,v,!1);W(this,l,n._zIndex++);this.constructor===n&&(0,p.unreachable)("Cannot initialize AnnotationEditor."),this.parent=i.parent,this.id=i.id,this.width=this.height=null,this.pageIndex=i.parent.pageIndex,this.name=i.name,this.div=null,this._uiManager=i.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=i.isCentered,this._structTreeParentId=null;const{rotation:h,rawDims:{pageWidth:u,pageHeight:S,pageX:L,pageY:U}}=this.parent.viewport;this.rotation=h,this.pageRotation=(360+h-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[u,S],this.pageTranslation=[L,U];const[it,tt]=this.parentDimensions;this.x=i.x/it,this.y=i.y/tt,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,p.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(i){const h=new ut({id:i.parent.getNextId(),parent:i.parent,uiManager:i._uiManager});h.annotationElementId=i.annotationElementId,h.deleted=!0,h._uiManager.addToAnnotationStorage(h)}static initialize(i,h=null){if(n._l10nPromise||(n._l10nPromise=new Map(["editor_alt_text_button_label","editor_alt_text_edit_button_label","editor_alt_text_decorative_tooltip"].map(S=>[S,i.get(S)]))),h!=null&&h.strings)for(const S of h.strings)n._l10nPromise.set(S,i.get(S));if(n._borderLineWidth!==-1)return;const u=getComputedStyle(document.documentElement);n._borderLineWidth=parseFloat(u.getPropertyValue("--outline-width"))||0}static updateDefaultParams(i,h){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(i){return!1}static paste(i,h){(0,p.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return t(this,v)}set _isDraggable(i){var h;at(this,v,i),(h=this.div)==null||h.classList.toggle("draggable",i)}center(){const[i,h]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*h/(i*2),this.y+=this.width*i/(h*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*h/(i*2),this.y-=this.width*i/(h*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(i){this._uiManager.addCommands(i)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=t(this,l)}setParent(i){i!==null&&(this.pageIndex=i.pageIndex,this.pageDimensions=i.pageDimensions),this.parent=i}focusin(i){this._focusEventsAllowed&&(t(this,y)?at(this,y,!1):this.parent.setSelected(this))}focusout(i){var u;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const h=i.relatedTarget;h!=null&&h.closest(`#${this.id}`)||(i.preventDefault(),(u=this.parent)!=null&&u.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(i,h,u,S){const[L,U]=this.parentDimensions;[u,S]=this.screenToPageTranslation(u,S),this.x=(i+u)/L,this.y=(h+S)/U,this.fixAndSetPosition()}translate(i,h){q(this,d,Ue).call(this,this.parentDimensions,i,h)}translateInPage(i,h){q(this,d,Ue).call(this,this.pageDimensions,i,h),this.div.scrollIntoView({block:"nearest"})}drag(i,h){const[u,S]=this.parentDimensions;if(this.x+=i/u,this.y+=h/S,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:et,y:ct}=this.div.getBoundingClientRect();this.parent.findNewParent(this,et,ct)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:L,y:U}=this;const[it,tt]=q(this,b,We).call(this);L+=it,U+=tt,this.div.style.left=`${(100*L).toFixed(2)}%`,this.div.style.top=`${(100*U).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}fixAndSetPosition(){const[i,h]=this.pageDimensions;let{x:u,y:S,width:L,height:U}=this;switch(L*=i,U*=h,u*=i,S*=h,this.rotation){case 0:u=Math.max(0,Math.min(i-L,u)),S=Math.max(0,Math.min(h-U,S));break;case 90:u=Math.max(0,Math.min(i-U,u)),S=Math.min(h,Math.max(L,S));break;case 180:u=Math.min(i,Math.max(L,u)),S=Math.min(h,Math.max(U,S));break;case 270:u=Math.min(i,Math.max(U,u)),S=Math.max(0,Math.min(h-L,S));break}this.x=u/=i,this.y=S/=h;const[it,tt]=q(this,b,We).call(this);u+=it,S+=tt;const{style:et}=this.div;et.left=`${(100*u).toFixed(2)}%`,et.top=`${(100*S).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(i,h){var u;return q(u=n,k,He).call(u,i,h,this.parentRotation)}pageTranslationToScreen(i,h){var u;return q(u=n,k,He).call(u,i,h,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:i,pageDimensions:[h,u]}=this,S=h*i,L=u*i;return p.FeatureTest.isCSSRoundSupported?[Math.round(S),Math.round(L)]:[S,L]}setDims(i,h){var L;const[u,S]=this.parentDimensions;this.div.style.width=`${(100*i/u).toFixed(2)}%`,t(this,R)||(this.div.style.height=`${(100*h/S).toFixed(2)}%`),(L=t(this,g))==null||L.classList.toggle("small",i<n.SMALL_EDITOR_SIZE||h<n.SMALL_EDITOR_SIZE)}fixDims(){const{style:i}=this.div,{height:h,width:u}=i,S=u.endsWith("%"),L=!t(this,R)&&h.endsWith("%");if(S&&L)return;const[U,it]=this.parentDimensions;S||(i.width=`${(100*parseFloat(u)/U).toFixed(2)}%`),!t(this,R)&&!L&&(i.height=`${(100*parseFloat(h)/it).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}async addAltTextButton(){if(t(this,g))return;const i=at(this,g,document.createElement("button"));i.className="altText";const h=await n._l10nPromise.get("editor_alt_text_button_label");i.textContent=h,i.setAttribute("aria-label",h),i.tabIndex="0",i.addEventListener("contextmenu",G.noContextMenu),i.addEventListener("pointerdown",u=>u.stopPropagation()),i.addEventListener("click",u=>{u.preventDefault(),this._uiManager.editAltText(this)},{capture:!0}),i.addEventListener("keydown",u=>{u.target===i&&u.key==="Enter"&&(u.preventDefault(),this._uiManager.editAltText(this))}),q(this,mt,Ge).call(this),this.div.append(i),n.SMALL_EDITOR_SIZE||(n.SMALL_EDITOR_SIZE=Math.min(128,Math.round(i.getBoundingClientRect().width*1.4)))}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:t(this,M),decorative:t(this,x)}}set altTextData({altText:i,decorative:h}){t(this,M)===i&&t(this,x)===h||(at(this,M,i),at(this,x,h),q(this,mt,Ge).call(this))}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",t(this,A)),this.div.addEventListener("focusout",t(this,f));const[i,h]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*h/i).toFixed(2)}%`,this.div.style.maxHeight=`${(100*i/h).toFixed(2)}%`);const[u,S]=this.getInitialTranslation();return this.translate(u,S),(0,a.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(i){const{isMac:h}=p.FeatureTest.platform;if(i.button!==0||i.ctrlKey&&h){i.preventDefault();return}at(this,y,!0),q(this,Pt,Pn).call(this,i)}moveInDOM(){var i;(i=this.parent)==null||i.moveEditorInDOM(this)}_setParentAndPosition(i,h,u){i.changeParent(this),this.x=h,this.y=u,this.fixAndSetPosition()}getRect(i,h){const u=this.parentScale,[S,L]=this.pageDimensions,[U,it]=this.pageTranslation,tt=i/u,et=h/u,ct=this.x*S,bt=this.y*L,dt=this.width*S,Ft=this.height*L;switch(this.rotation){case 0:return[ct+tt+U,L-bt-et-Ft+it,ct+tt+dt+U,L-bt-et+it];case 90:return[ct+et+U,L-bt+tt+it,ct+et+Ft+U,L-bt+tt+dt+it];case 180:return[ct-tt-dt+U,L-bt+et+it,ct-tt+U,L-bt+et+Ft+it];case 270:return[ct-et-Ft+U,L-bt-tt-dt+it,ct-et+U,L-bt-tt+it];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(i,h){const[u,S,L,U]=i,it=L-u,tt=U-S;switch(this.rotation){case 0:return[u,h-U,it,tt];case 90:return[u,h-S,tt,it];case 180:return[L,h-S,it,tt];case 270:return[L,h-U,tt,it];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){at(this,P,!0)}disableEditMode(){at(this,P,!1)}isInEditMode(){return t(this,P)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var i,h;(i=this.div)==null||i.addEventListener("focusin",t(this,A)),(h=this.div)==null||h.addEventListener("focusout",t(this,f))}serialize(i=!1,h=null){(0,p.unreachable)("An editor must be serializable")}static deserialize(i,h,u){const S=new this.prototype.constructor({parent:h,id:h.getNextId(),uiManager:u});S.rotation=i.rotation;const[L,U]=S.pageDimensions,[it,tt,et,ct]=S.getRectInCurrentCoords(i.rect,U);return S.x=it/L,S.y=tt/U,S.width=et/L,S.height=ct/U,S}remove(){var i;this.div.removeEventListener("focusin",t(this,A)),this.div.removeEventListener("focusout",t(this,f)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),(i=t(this,g))==null||i.remove(),at(this,g,null),at(this,I,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(q(this,T,En).call(this),t(this,E).classList.remove("hidden"))}select(){var i;this.makeResizable(),(i=this.div)==null||i.classList.add("selectedEditor")}unselect(){var i,h,u;(i=t(this,E))==null||i.classList.add("hidden"),(h=this.div)==null||h.classList.remove("selectedEditor"),(u=this.div)!=null&&u.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(i,h){}disableEditing(){t(this,g)&&(t(this,g).hidden=!0)}enableEditing(){t(this,g)&&(t(this,g).hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return t(this,w)}set isEditing(i){at(this,w,i),this.parent&&(i?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(i,h){at(this,R,!0);const u=i/h,{style:S}=this.div;S.aspectRatio=u,S.height="auto"}static get MIN_SIZE(){return 16}};M=new WeakMap,x=new WeakMap,g=new WeakMap,I=new WeakMap,N=new WeakMap,R=new WeakMap,E=new WeakMap,A=new WeakMap,f=new WeakMap,y=new WeakMap,w=new WeakMap,P=new WeakMap,v=new WeakMap,l=new WeakMap,d=new WeakSet,Ue=function([i,h],u,S){[u,S]=this.screenToPageTranslation(u,S),this.x+=u/i,this.y+=S/h,this.fixAndSetPosition()},b=new WeakSet,We=function(){const[i,h]=this.parentDimensions,{_borderLineWidth:u}=n,S=u/i,L=u/h;switch(this.rotation){case 90:return[-S,L];case 180:return[S,L];case 270:return[S,-L];default:return[-S,-L]}},k=new WeakSet,He=function(i,h,u){switch(u){case 90:return[h,-i];case 180:return[-i,-h];case 270:return[-h,i];default:return[i,h]}},$=new WeakSet,$e=function(i){switch(i){case 90:{const[h,u]=this.pageDimensions;return[0,-h/u,u/h,0]}case 180:return[-1,0,0,-1];case 270:{const[h,u]=this.pageDimensions;return[0,h/u,-u/h,0]}default:return[1,0,0,1]}},T=new WeakSet,En=function(){if(t(this,E))return;at(this,E,document.createElement("div")),t(this,E).classList.add("resizers");const i=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||i.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const h of i){const u=document.createElement("div");t(this,E).append(u),u.classList.add("resizer",h),u.addEventListener("pointerdown",q(this,rt,Sn).bind(this,h)),u.addEventListener("contextmenu",G.noContextMenu)}this.div.prepend(t(this,E))},rt=new WeakSet,Sn=function(i,h){h.preventDefault();const{isMac:u}=p.FeatureTest.platform;if(h.button!==0||h.ctrlKey&&u)return;const S=q(this,V,Tn).bind(this,i),L=this._isDraggable;this._isDraggable=!1;const U={passive:!0,capture:!0};window.addEventListener("pointermove",S,U);const it=this.x,tt=this.y,et=this.width,ct=this.height,bt=this.parent.div.style.cursor,dt=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(h.target).cursor;const Ft=()=>{this._isDraggable=L,window.removeEventListener("pointerup",Ft),window.removeEventListener("blur",Ft),window.removeEventListener("pointermove",S,U),this.parent.div.style.cursor=bt,this.div.style.cursor=dt;const jt=this.x,St=this.y,Lt=this.width,gt=this.height;jt===it&&St===tt&&Lt===et&&gt===ct||this.addCommands({cmd:()=>{this.width=Lt,this.height=gt,this.x=jt,this.y=St;const[nt,st]=this.parentDimensions;this.setDims(nt*Lt,st*gt),this.fixAndSetPosition()},undo:()=>{this.width=et,this.height=ct,this.x=it,this.y=tt;const[nt,st]=this.parentDimensions;this.setDims(nt*et,st*ct),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener("pointerup",Ft),window.addEventListener("blur",Ft)},V=new WeakSet,Tn=function(i,h){const[u,S]=this.parentDimensions,L=this.x,U=this.y,it=this.width,tt=this.height,et=n.MIN_SIZE/u,ct=n.MIN_SIZE/S,bt=yt=>Math.round(yt*1e4)/1e4,dt=q(this,$,$e).call(this,this.rotation),Ft=(yt,vt)=>[dt[0]*yt+dt[2]*vt,dt[1]*yt+dt[3]*vt],jt=q(this,$,$e).call(this,360-this.rotation),St=(yt,vt)=>[jt[0]*yt+jt[2]*vt,jt[1]*yt+jt[3]*vt];let Lt,gt,nt=!1,st=!1;switch(i){case"topLeft":nt=!0,Lt=(yt,vt)=>[0,0],gt=(yt,vt)=>[yt,vt];break;case"topMiddle":Lt=(yt,vt)=>[yt/2,0],gt=(yt,vt)=>[yt/2,vt];break;case"topRight":nt=!0,Lt=(yt,vt)=>[yt,0],gt=(yt,vt)=>[0,vt];break;case"middleRight":st=!0,Lt=(yt,vt)=>[yt,vt/2],gt=(yt,vt)=>[0,vt/2];break;case"bottomRight":nt=!0,Lt=(yt,vt)=>[yt,vt],gt=(yt,vt)=>[0,0];break;case"bottomMiddle":Lt=(yt,vt)=>[yt/2,vt],gt=(yt,vt)=>[yt/2,0];break;case"bottomLeft":nt=!0,Lt=(yt,vt)=>[0,vt],gt=(yt,vt)=>[yt,0];break;case"middleLeft":st=!0,Lt=(yt,vt)=>[0,vt/2],gt=(yt,vt)=>[yt,vt/2];break}const pt=Lt(it,tt),wt=gt(it,tt);let xt=Ft(...wt);const Ut=bt(L+xt[0]),Vt=bt(U+xt[1]);let Wt=1,zt=1,[Gt,Ht]=this.screenToPageTranslation(h.movementX,h.movementY);if([Gt,Ht]=St(Gt/u,Ht/S),nt){const yt=Math.hypot(it,tt);Wt=zt=Math.max(Math.min(Math.hypot(wt[0]-pt[0]-Gt,wt[1]-pt[1]-Ht)/yt,1/it,1/tt),et/it,ct/tt)}else st?Wt=Math.max(et,Math.min(1,Math.abs(wt[0]-pt[0]-Gt)))/it:zt=Math.max(ct,Math.min(1,Math.abs(wt[1]-pt[1]-Ht)))/tt;const Xt=bt(it*Wt),ft=bt(tt*zt);xt=Ft(...gt(Xt,ft));const Z=Ut-xt[0],K=Vt-xt[1];this.width=Xt,this.height=ft,this.x=Z,this.y=K,this.setDims(u*Xt,S*ft),this.fixAndSetPosition()},mt=new WeakSet,Ge=async function(){var u;const i=t(this,g);if(!i)return;if(!t(this,M)&&!t(this,x)){i.classList.remove("done"),(u=t(this,I))==null||u.remove();return}n._l10nPromise.get("editor_alt_text_edit_button_label").then(S=>{i.setAttribute("aria-label",S)});let h=t(this,I);if(!h){at(this,I,h=document.createElement("span")),h.className="tooltip",h.setAttribute("role","tooltip");const S=h.id=`alt-text-tooltip-${this.id}`;i.setAttribute("aria-describedby",S);const L=100;i.addEventListener("mouseenter",()=>{at(this,N,setTimeout(()=>{at(this,N,null),t(this,I).classList.add("show"),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"alt_text_tooltip"}}})},L))}),i.addEventListener("mouseleave",()=>{var U;clearTimeout(t(this,N)),at(this,N,null),(U=t(this,I))==null||U.classList.remove("show")})}i.classList.add("done"),h.innerText=t(this,x)?await n._l10nPromise.get("editor_alt_text_decorative_tooltip"):t(this,M),h.parentNode||i.append(h)},Pt=new WeakSet,Pn=function(i){if(!this._isDraggable)return;const h=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let u,S;h&&(u={passive:!0,capture:!0},S=U=>{const[it,tt]=this.screenToPageTranslation(U.movementX,U.movementY);this._uiManager.dragSelectedEditors(it,tt)},window.addEventListener("pointermove",S,u));const L=()=>{if(window.removeEventListener("pointerup",L),window.removeEventListener("blur",L),h&&window.removeEventListener("pointermove",S,u),at(this,y,!1),!this._uiManager.endDragSession()){const{isMac:U}=p.FeatureTest.platform;i.ctrlKey&&!U||i.shiftKey||i.metaKey&&U?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",L),window.addEventListener("blur",L)},W(n,k),ne(n,"_borderLineWidth",-1),ne(n,"_colorManager",new a.ColorManager),ne(n,"_zIndex",1),ne(n,"SMALL_EDITOR_SIZE",0);let H=n;s.AnnotationEditor=H;class ut extends H{constructor(i){super(i),this.annotationElementId=i.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}},(D,s,O)=>{var R,E,A,f,y,Ve,v,l,d,F,b,wn,m,$,z,T,Y,rt,lt,V,ht,mt,Et,Pt,C,n,o,i,h,u,S,L,U,it,tt,et,ct,bt,dt,Ft,jt,St,Lt,gt,nt,st,pt,xn,xt,ze,Vt,Xe,zt,we,Ht,qe,ft,Ye,K,ae,vt,be,te,Cn,Tt,Rn,Ct,Ke,Bt,_e,At,Je;Object.defineProperty(s,"__esModule",{value:!0}),s.KeyboardManager=s.CommandManager=s.ColorManager=s.AnnotationEditorUIManager=void 0,s.bindEvents=G,s.opacityToHex=H;var a=O(1),p=O(6);function G(B,e,_){for(const j of _)e.addEventListener(j,B[j].bind(B))}function H(B){return Math.round(Math.min(255,Math.max(1,255*B))).toString(16).padStart(2,"0")}class ut{constructor(){W(this,R,0)}getId(){return`${a.AnnotationEditorPrefix}${me(this,R)._++}`}}R=new WeakMap;const P=class P{constructor(){W(this,y);W(this,E,(0,a.getUuid)());W(this,A,0);W(this,f,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',j=new OffscreenCanvas(1,3).getContext("2d"),X=new Image;X.src=e;const J=X.decode().then(()=>(j.drawImage(X,0,0,1,1,0,0,1,3),new Uint32Array(j.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,a.shadow)(this,"_isSVGFittingCanvas",J)}async getFromFile(e){const{lastModified:_,name:j,size:X,type:J}=e;return q(this,y,Ve).call(this,`${_}_${j}_${X}_${J}`,e)}async getFromUrl(e){return q(this,y,Ve).call(this,e,e)}async getFromId(e){t(this,f)||at(this,f,new Map);const _=t(this,f).get(e);return _?_.bitmap?(_.refCounter+=1,_):_.file?this.getFromFile(_.file):this.getFromUrl(_.url):null}getSvgUrl(e){const _=t(this,f).get(e);return _!=null&&_.isSvg?_.svgUrl:null}deleteId(e){t(this,f)||at(this,f,new Map);const _=t(this,f).get(e);_&&(_.refCounter-=1,_.refCounter===0&&(_.bitmap=null))}isValidId(e){return e.startsWith(`image_${t(this,E)}_`)}};E=new WeakMap,A=new WeakMap,f=new WeakMap,y=new WeakSet,Ve=async function(e,_){t(this,f)||at(this,f,new Map);let j=t(this,f).get(e);if(j===null)return null;if(j!=null&&j.bitmap)return j.refCounter+=1,j;try{j||(j={bitmap:null,id:`image_${t(this,E)}_${me(this,A)._++}`,refCounter:0,isSvg:!1});let X;if(typeof _=="string"){j.url=_;const J=await fetch(_);if(!J.ok)throw new Error(J.statusText);X=await J.blob()}else X=j.file=_;if(X.type==="image/svg+xml"){const J=P._isSVGFittingCanvas,ot=new FileReader,_t=new Image,kt=new Promise((Rt,qt)=>{_t.onload=()=>{j.bitmap=_t,j.isSvg=!0,Rt()},ot.onload=async()=>{const Mt=j.svgUrl=ot.result;_t.src=await J?`${Mt}#svgView(preserveAspectRatio(none))`:Mt},_t.onerror=ot.onerror=qt});ot.readAsDataURL(X),await kt}else j.bitmap=await createImageBitmap(X);j.refCounter=1}catch(X){console.error(X),j=null}return t(this,f).set(e,j),j&&t(this,f).set(j.id,j),j};let M=P;class x{constructor(e=128){W(this,v,[]);W(this,l,!1);W(this,d,void 0);W(this,F,-1);at(this,d,e)}add({cmd:e,undo:_,mustExec:j,type:X=NaN,overwriteIfSameType:J=!1,keepUndo:ot=!1}){if(j&&e(),t(this,l))return;const _t={cmd:e,undo:_,type:X};if(t(this,F)===-1){t(this,v).length>0&&(t(this,v).length=0),at(this,F,0),t(this,v).push(_t);return}if(J&&t(this,v)[t(this,F)].type===X){ot&&(_t.undo=t(this,v)[t(this,F)].undo),t(this,v)[t(this,F)]=_t;return}const kt=t(this,F)+1;kt===t(this,d)?t(this,v).splice(0,1):(at(this,F,kt),kt<t(this,v).length&&t(this,v).splice(kt)),t(this,v).push(_t)}undo(){t(this,F)!==-1&&(at(this,l,!0),t(this,v)[t(this,F)].undo(),at(this,l,!1),at(this,F,t(this,F)-1))}redo(){t(this,F)<t(this,v).length-1&&(at(this,F,t(this,F)+1),at(this,l,!0),t(this,v)[t(this,F)].cmd(),at(this,l,!1))}hasSomethingToUndo(){return t(this,F)!==-1}hasSomethingToRedo(){return t(this,F)<t(this,v).length-1}destroy(){at(this,v,null)}}v=new WeakMap,l=new WeakMap,d=new WeakMap,F=new WeakMap,s.CommandManager=x;class g{constructor(e){W(this,b);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:_}=a.FeatureTest.platform;for(const[j,X,J={}]of e)for(const ot of j){const _t=ot.startsWith("mac+");_&&_t?(this.callbacks.set(ot.slice(4),{callback:X,options:J}),this.allKeys.add(ot.split("+").at(-1))):!_&&!_t&&(this.callbacks.set(ot,{callback:X,options:J}),this.allKeys.add(ot.split("+").at(-1)))}}exec(e,_){if(!this.allKeys.has(_.key))return;const j=this.callbacks.get(q(this,b,wn).call(this,_));if(!j)return;const{callback:X,options:{bubbles:J=!1,args:ot=[],checker:_t=null}}=j;_t&&!_t(e,_)||(X.bind(e,...ot)(),J||(_.stopPropagation(),_.preventDefault()))}}b=new WeakSet,wn=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const _=this.buffer.join("+");return this.buffer.length=0,_},s.KeyboardManager=g;const k=class k{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return(0,p.getColorValues)(e),(0,a.shadow)(this,"_colors",e)}convert(e){const _=(0,p.getRGB)(e);if(!window.matchMedia("(forced-colors: active)").matches)return _;for(const[j,X]of this._colors)if(X.every((J,ot)=>J===_[ot]))return k._colorsMapping.get(j);return _}getHexCode(e){const _=this._colors.get(e);return _?a.Util.makeHexColor(..._):e}};ne(k,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let I=k;s.ColorManager=I;const It=class It{constructor(e,_,j,X,J,ot){W(this,pt);W(this,xt);W(this,Vt);W(this,zt);W(this,Ht);W(this,ft);W(this,K);W(this,vt);W(this,te);W(this,Tt);W(this,Ct);W(this,Bt);W(this,At);W(this,m,null);W(this,$,new Map);W(this,z,new Map);W(this,T,null);W(this,Y,null);W(this,rt,new x);W(this,lt,0);W(this,V,new Set);W(this,ht,null);W(this,mt,null);W(this,Et,new Set);W(this,Pt,null);W(this,C,new ut);W(this,n,!1);W(this,o,!1);W(this,i,null);W(this,h,a.AnnotationEditorType.NONE);W(this,u,new Set);W(this,S,null);W(this,L,this.blur.bind(this));W(this,U,this.focus.bind(this));W(this,it,this.copy.bind(this));W(this,tt,this.cut.bind(this));W(this,et,this.paste.bind(this));W(this,ct,this.keydown.bind(this));W(this,bt,this.onEditingAction.bind(this));W(this,dt,this.onPageChanging.bind(this));W(this,Ft,this.onScaleChanging.bind(this));W(this,jt,this.onRotationChanging.bind(this));W(this,St,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});W(this,Lt,[0,0]);W(this,gt,null);W(this,nt,null);W(this,st,null);at(this,nt,e),at(this,st,_),at(this,T,j),this._eventBus=X,this._eventBus._on("editingaction",t(this,bt)),this._eventBus._on("pagechanging",t(this,dt)),this._eventBus._on("scalechanging",t(this,Ft)),this._eventBus._on("rotationchanging",t(this,jt)),at(this,Y,J.annotationStorage),at(this,Pt,J.filterFactory),at(this,S,ot),this.viewParameters={realScale:p.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}static get _keyboardManager(){const e=It.prototype,_=J=>{const{activeElement:ot}=document;return ot&&t(J,nt).contains(ot)&&J.hasSomethingToControl()},j=this.TRANSLATE_SMALL,X=this.TRANSLATE_BIG;return(0,a.shadow)(this,"_keyboardManager",new g([[["ctrl+a","mac+meta+a"],e.selectAll],[["ctrl+z","mac+meta+z"],e.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-j,0],checker:_}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-X,0],checker:_}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[j,0],checker:_}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[X,0],checker:_}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-j],checker:_}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-X],checker:_}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,j],checker:_}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,X],checker:_}]]))}destroy(){q(this,zt,we).call(this),q(this,xt,ze).call(this),this._eventBus._off("editingaction",t(this,bt)),this._eventBus._off("pagechanging",t(this,dt)),this._eventBus._off("scalechanging",t(this,Ft)),this._eventBus._off("rotationchanging",t(this,jt));for(const e of t(this,z).values())e.destroy();t(this,z).clear(),t(this,$).clear(),t(this,Et).clear(),at(this,m,null),t(this,u).clear(),t(this,rt).destroy(),t(this,T).destroy()}get hcmFilter(){return(0,a.shadow)(this,"hcmFilter",t(this,S)?t(this,Pt).addHCMFilter(t(this,S).foreground,t(this,S).background):"none")}get direction(){return(0,a.shadow)(this,"direction",getComputedStyle(t(this,nt)).direction)}editAltText(e){var _;(_=t(this,T))==null||_.editAltText(this,e)}onPageChanging({pageNumber:e}){at(this,lt,e-1)}focusMainContainer(){t(this,nt).focus()}findParent(e,_){for(const j of t(this,z).values()){const{x:X,y:J,width:ot,height:_t}=j.div.getBoundingClientRect();if(e>=X&&e<=X+ot&&_>=J&&_<=J+_t)return j}return null}disableUserSelect(e=!1){t(this,st).classList.toggle("noUserSelect",e)}addShouldRescale(e){t(this,Et).add(e)}removeShouldRescale(e){t(this,Et).delete(e)}onScaleChanging({scale:e}){this.commitOrRemove(),this.viewParameters.realScale=e*p.PixelsPerInch.PDF_TO_CSS_UNITS;for(const _ of t(this,Et))_.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}addToAnnotationStorage(e){!e.isEmpty()&&t(this,Y)&&!t(this,Y).has(e.id)&&t(this,Y).setValue(e.id,e)}blur(){if(!this.hasSelection)return;const{activeElement:e}=document;for(const _ of t(this,u))if(_.div.contains(e)){at(this,i,[_,e]),_._focusEventsAllowed=!1;break}}focus(){if(!t(this,i))return;const[e,_]=t(this,i);at(this,i,null),_.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0}),_.focus()}addEditListeners(){q(this,Vt,Xe).call(this),q(this,Ht,qe).call(this)}removeEditListeners(){q(this,zt,we).call(this),q(this,ft,Ye).call(this)}copy(e){var j;if(e.preventDefault(),(j=t(this,m))==null||j.commitOrRemove(),!this.hasSelection)return;const _=[];for(const X of t(this,u)){const J=X.serialize(!0);J&&_.push(J)}_.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(_))}cut(e){this.copy(e),this.delete()}paste(e){e.preventDefault();const{clipboardData:_}=e;for(const J of _.items)for(const ot of t(this,mt))if(ot.isHandlingMimeForPasting(J.type)){ot.paste(J,this.currentLayer);return}let j=_.getData("application/pdfjs");if(!j)return;try{j=JSON.parse(j)}catch(J){(0,a.warn)(`paste: "${J.message}".`);return}if(!Array.isArray(j))return;this.unselectAll();const X=this.currentLayer;try{const J=[];for(const kt of j){const Rt=X.deserialize(kt);if(!Rt)return;J.push(Rt)}const ot=()=>{for(const kt of J)q(this,Ct,Ke).call(this,kt);q(this,At,Je).call(this,J)},_t=()=>{for(const kt of J)kt.remove()};this.addCommands({cmd:ot,undo:_t,mustExec:!0})}catch(J){(0,a.warn)(`paste: "${J.message}".`)}}keydown(e){var _;(_=this.getActive())!=null&&_.shouldGetKeyboardEvents()||It._keyboardManager.exec(this,e)}onEditingAction(e){["undo","redo","delete","selectAll"].includes(e.name)&&this[e.name]()}setEditingState(e){e?(q(this,pt,xn).call(this),q(this,Vt,Xe).call(this),q(this,Ht,qe).call(this),q(this,K,ae).call(this,{isEditing:t(this,h)!==a.AnnotationEditorType.NONE,isEmpty:q(this,Bt,_e).call(this),hasSomethingToUndo:t(this,rt).hasSomethingToUndo(),hasSomethingToRedo:t(this,rt).hasSomethingToRedo(),hasSelectedEditor:!1})):(q(this,xt,ze).call(this),q(this,zt,we).call(this),q(this,ft,Ye).call(this),q(this,K,ae).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!t(this,mt)){at(this,mt,e);for(const _ of t(this,mt))q(this,vt,be).call(this,_.defaultPropertiesToUpdate)}}getId(){return t(this,C).getId()}get currentLayer(){return t(this,z).get(t(this,lt))}getLayer(e){return t(this,z).get(e)}get currentPageIndex(){return t(this,lt)}addLayer(e){t(this,z).set(e.pageIndex,e),t(this,n)?e.enable():e.disable()}removeLayer(e){t(this,z).delete(e.pageIndex)}updateMode(e,_=null){if(t(this,h)!==e){if(at(this,h,e),e===a.AnnotationEditorType.NONE){this.setEditingState(!1),q(this,Tt,Rn).call(this);return}this.setEditingState(!0),q(this,te,Cn).call(this),this.unselectAll();for(const j of t(this,z).values())j.updateMode(e);if(_){for(const j of t(this,$).values())if(j.annotationElementId===_){this.setSelected(j),j.enterInEditMode();break}}}}updateToolbar(e){e!==t(this,h)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:e})}updateParams(e,_){if(t(this,mt)){if(e===a.AnnotationEditorParamsType.CREATE){this.currentLayer.addNewEditor(e);return}for(const j of t(this,u))j.updateParams(e,_);for(const j of t(this,mt))j.updateDefaultParams(e,_)}}enableWaiting(e=!1){if(t(this,o)!==e){at(this,o,e);for(const _ of t(this,z).values())e?_.disableClick():_.enableClick(),_.div.classList.toggle("waiting",e)}}getEditors(e){const _=[];for(const j of t(this,$).values())j.pageIndex===e&&_.push(j);return _}getEditor(e){return t(this,$).get(e)}addEditor(e){t(this,$).set(e.id,e)}removeEditor(e){var _;t(this,$).delete(e.id),this.unselect(e),(!e.annotationElementId||!t(this,V).has(e.annotationElementId))&&((_=t(this,Y))==null||_.remove(e.id))}addDeletedAnnotationElement(e){t(this,V).add(e.annotationElementId),e.deleted=!0}isDeletedAnnotationElement(e){return t(this,V).has(e)}removeDeletedAnnotationElement(e){t(this,V).delete(e.annotationElementId),e.deleted=!1}setActiveEditor(e){t(this,m)!==e&&(at(this,m,e),e&&q(this,vt,be).call(this,e.propertiesToUpdate))}toggleSelected(e){if(t(this,u).has(e)){t(this,u).delete(e),e.unselect(),q(this,K,ae).call(this,{hasSelectedEditor:this.hasSelection});return}t(this,u).add(e),e.select(),q(this,vt,be).call(this,e.propertiesToUpdate),q(this,K,ae).call(this,{hasSelectedEditor:!0})}setSelected(e){for(const _ of t(this,u))_!==e&&_.unselect();t(this,u).clear(),t(this,u).add(e),e.select(),q(this,vt,be).call(this,e.propertiesToUpdate),q(this,K,ae).call(this,{hasSelectedEditor:!0})}isSelected(e){return t(this,u).has(e)}unselect(e){e.unselect(),t(this,u).delete(e),q(this,K,ae).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return t(this,u).size!==0}undo(){t(this,rt).undo(),q(this,K,ae).call(this,{hasSomethingToUndo:t(this,rt).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:q(this,Bt,_e).call(this)})}redo(){t(this,rt).redo(),q(this,K,ae).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:t(this,rt).hasSomethingToRedo(),isEmpty:q(this,Bt,_e).call(this)})}addCommands(e){t(this,rt).add(e),q(this,K,ae).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:q(this,Bt,_e).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const e=[...t(this,u)],_=()=>{for(const X of e)X.remove()},j=()=>{for(const X of e)q(this,Ct,Ke).call(this,X)};this.addCommands({cmd:_,undo:j,mustExec:!0})}commitOrRemove(){var e;(e=t(this,m))==null||e.commitOrRemove()}hasSomethingToControl(){return t(this,m)||this.hasSelection}selectAll(){for(const e of t(this,u))e.commit();q(this,At,Je).call(this,t(this,$).values())}unselectAll(){if(t(this,m)){t(this,m).commitOrRemove();return}if(this.hasSelection){for(const e of t(this,u))e.unselect();t(this,u).clear(),q(this,K,ae).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,_,j=!1){if(j||this.commitOrRemove(),!this.hasSelection)return;t(this,Lt)[0]+=e,t(this,Lt)[1]+=_;const[X,J]=t(this,Lt),ot=[...t(this,u)],_t=1e3;t(this,gt)&&clearTimeout(t(this,gt)),at(this,gt,setTimeout(()=>{at(this,gt,null),t(this,Lt)[0]=t(this,Lt)[1]=0,this.addCommands({cmd:()=>{for(const kt of ot)t(this,$).has(kt.id)&&kt.translateInPage(X,J)},undo:()=>{for(const kt of ot)t(this,$).has(kt.id)&&kt.translateInPage(-X,-J)},mustExec:!1})},_t));for(const kt of ot)kt.translateInPage(e,_)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),at(this,ht,new Map);for(const e of t(this,u))t(this,ht).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!t(this,ht))return!1;this.disableUserSelect(!1);const e=t(this,ht);at(this,ht,null);let _=!1;for(const[{x:X,y:J,pageIndex:ot},_t]of e)_t.newX=X,_t.newY=J,_t.newPageIndex=ot,_||(_=X!==_t.savedX||J!==_t.savedY||ot!==_t.savedPageIndex);if(!_)return!1;const j=(X,J,ot,_t)=>{if(t(this,$).has(X.id)){const kt=t(this,z).get(_t);kt?X._setParentAndPosition(kt,J,ot):(X.pageIndex=_t,X.x=J,X.y=ot)}};return this.addCommands({cmd:()=>{for(const[X,{newX:J,newY:ot,newPageIndex:_t}]of e)j(X,J,ot,_t)},undo:()=>{for(const[X,{savedX:J,savedY:ot,savedPageIndex:_t}]of e)j(X,J,ot,_t)},mustExec:!0}),!0}dragSelectedEditors(e,_){if(t(this,ht))for(const j of t(this,ht).keys())j.drag(e,_)}rebuild(e){if(e.parent===null){const _=this.getLayer(e.pageIndex);_?(_.changeParent(e),_.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}isActive(e){return t(this,m)===e}getActive(){return t(this,m)}getMode(){return t(this,h)}get imageManager(){return(0,a.shadow)(this,"imageManager",new M)}};m=new WeakMap,$=new WeakMap,z=new WeakMap,T=new WeakMap,Y=new WeakMap,rt=new WeakMap,lt=new WeakMap,V=new WeakMap,ht=new WeakMap,mt=new WeakMap,Et=new WeakMap,Pt=new WeakMap,C=new WeakMap,n=new WeakMap,o=new WeakMap,i=new WeakMap,h=new WeakMap,u=new WeakMap,S=new WeakMap,L=new WeakMap,U=new WeakMap,it=new WeakMap,tt=new WeakMap,et=new WeakMap,ct=new WeakMap,bt=new WeakMap,dt=new WeakMap,Ft=new WeakMap,jt=new WeakMap,St=new WeakMap,Lt=new WeakMap,gt=new WeakMap,nt=new WeakMap,st=new WeakMap,pt=new WeakSet,xn=function(){window.addEventListener("focus",t(this,U)),window.addEventListener("blur",t(this,L))},xt=new WeakSet,ze=function(){window.removeEventListener("focus",t(this,U)),window.removeEventListener("blur",t(this,L))},Vt=new WeakSet,Xe=function(){window.addEventListener("keydown",t(this,ct),{capture:!0})},zt=new WeakSet,we=function(){window.removeEventListener("keydown",t(this,ct),{capture:!0})},Ht=new WeakSet,qe=function(){document.addEventListener("copy",t(this,it)),document.addEventListener("cut",t(this,tt)),document.addEventListener("paste",t(this,et))},ft=new WeakSet,Ye=function(){document.removeEventListener("copy",t(this,it)),document.removeEventListener("cut",t(this,tt)),document.removeEventListener("paste",t(this,et))},K=new WeakSet,ae=function(e){Object.entries(e).some(([j,X])=>t(this,St)[j]!==X)&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(t(this,St),e)})},vt=new WeakSet,be=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},te=new WeakSet,Cn=function(){if(!t(this,n)){at(this,n,!0);for(const e of t(this,z).values())e.enable()}},Tt=new WeakSet,Rn=function(){if(this.unselectAll(),t(this,n)){at(this,n,!1);for(const e of t(this,z).values())e.disable()}},Ct=new WeakSet,Ke=function(e){const _=t(this,z).get(e.pageIndex);_?_.addOrRebuild(e):this.addEditor(e)},Bt=new WeakSet,_e=function(){if(t(this,$).size===0)return!0;if(t(this,$).size===1)for(const e of t(this,$).values())return e.isEmpty();return!1},At=new WeakSet,Je=function(e){t(this,u).clear();for(const _ of e)_.isEmpty()||(t(this,u).add(_),_.select());q(this,K,ae).call(this,{hasSelectedEditor:!0})},ne(It,"TRANSLATE_SMALL",1),ne(It,"TRANSLATE_BIG",10);let N=It;s.AnnotationEditorUIManager=N},(D,s,O)=>{var lt,V,ht,mt,Et,Pt,C,n,o,i,h,u,ue,L,fe,it,Qe,et,xe,bt,Ce,Ft,ye,St,Ae;Object.defineProperty(s,"__esModule",{value:!0}),s.StatTimer=s.RenderingCancelledException=s.PixelsPerInch=s.PageViewport=s.PDFDateString=s.DOMStandardFontDataFactory=s.DOMSVGFactory=s.DOMFilterFactory=s.DOMCanvasFactory=s.DOMCMapReaderFactory=void 0,s.deprecated=F,s.getColorValues=$,s.getCurrentTransform=z,s.getCurrentTransformInverse=T,s.getFilenameFromUrl=y,s.getPdfFilenameFromUrl=w,s.getRGB=m,s.getXfaPageViewport=k,s.isDataScheme=A,s.isPdfFile=f,s.isValidFetchUrl=v,s.loadScript=d,s.noContextMenu=l,s.setLayerDimensions=Y;var a=O(7),p=O(1);const G="http://www.w3.org/2000/svg",rt=class rt{};ne(rt,"CSS",96),ne(rt,"PDF",72),ne(rt,"PDF_TO_CSS_UNITS",rt.CSS/rt.PDF);let H=rt;s.PixelsPerInch=H;class ut extends a.BaseFilterFactory{constructor({docId:st,ownerDocument:pt=globalThis.document}={}){super();W(this,u);W(this,L);W(this,it);W(this,et);W(this,bt);W(this,Ft);W(this,St);W(this,lt,void 0);W(this,V,void 0);W(this,ht,void 0);W(this,mt,void 0);W(this,Et,void 0);W(this,Pt,void 0);W(this,C,void 0);W(this,n,void 0);W(this,o,void 0);W(this,i,void 0);W(this,h,0);at(this,ht,st),at(this,mt,pt)}addFilter(st){if(!st)return"none";let pt=t(this,u,ue).get(st);if(pt)return pt;let wt,xt,Ut,Vt;if(st.length===1){const Ht=st[0],Xt=new Array(256);for(let ft=0;ft<256;ft++)Xt[ft]=Ht[ft]/255;Vt=wt=xt=Ut=Xt.join(",")}else{const[Ht,Xt,ft]=st,Z=new Array(256),K=new Array(256),yt=new Array(256);for(let vt=0;vt<256;vt++)Z[vt]=Ht[vt]/255,K[vt]=Xt[vt]/255,yt[vt]=ft[vt]/255;wt=Z.join(","),xt=K.join(","),Ut=yt.join(","),Vt=`${wt}${xt}${Ut}`}if(pt=t(this,u,ue).get(Vt),pt)return t(this,u,ue).set(st,pt),pt;const Wt=`g_${t(this,ht)}_transfer_map_${me(this,h)._++}`,zt=`url(#${Wt})`;t(this,u,ue).set(st,zt),t(this,u,ue).set(Vt,zt);const Gt=q(this,et,xe).call(this,Wt);return q(this,Ft,ye).call(this,wt,xt,Ut,Gt),zt}addHCMFilter(st,pt){var Xt;const wt=`${st}-${pt}`;if(t(this,Pt)===wt)return t(this,C);if(at(this,Pt,wt),at(this,C,"none"),(Xt=t(this,Et))==null||Xt.remove(),!st||!pt)return t(this,C);const xt=q(this,St,Ae).call(this,st);st=p.Util.makeHexColor(...xt);const Ut=q(this,St,Ae).call(this,pt);if(pt=p.Util.makeHexColor(...Ut),t(this,L,fe).style.color="",st==="#000000"&&pt==="#ffffff"||st===pt)return t(this,C);const Vt=new Array(256);for(let ft=0;ft<=255;ft++){const Z=ft/255;Vt[ft]=Z<=.03928?Z/12.92:((Z+.055)/1.055)**2.4}const Wt=Vt.join(","),zt=`g_${t(this,ht)}_hcm_filter`,Gt=at(this,n,q(this,et,xe).call(this,zt));q(this,Ft,ye).call(this,Wt,Wt,Wt,Gt),q(this,it,Qe).call(this,Gt);const Ht=(ft,Z)=>{const K=xt[ft]/255,yt=Ut[ft]/255,vt=new Array(Z+1);for(let ee=0;ee<=Z;ee++)vt[ee]=K+ee/Z*(yt-K);return vt.join(",")};return q(this,Ft,ye).call(this,Ht(0,5),Ht(1,5),Ht(2,5),Gt),at(this,C,`url(#${zt})`),t(this,C)}addHighlightHCMFilter(st,pt,wt,xt){var yt;const Ut=`${st}-${pt}-${wt}-${xt}`;if(t(this,o)===Ut)return t(this,i);if(at(this,o,Ut),at(this,i,"none"),(yt=t(this,n))==null||yt.remove(),!st||!pt)return t(this,i);const[Vt,Wt]=[st,pt].map(q(this,St,Ae).bind(this));let zt=Math.round(.2126*Vt[0]+.7152*Vt[1]+.0722*Vt[2]),Gt=Math.round(.2126*Wt[0]+.7152*Wt[1]+.0722*Wt[2]),[Ht,Xt]=[wt,xt].map(q(this,St,Ae).bind(this));Gt<zt&&([zt,Gt,Ht,Xt]=[Gt,zt,Xt,Ht]),t(this,L,fe).style.color="";const ft=(vt,ee,te)=>{const Q=new Array(256),Tt=(Gt-zt)/te,Ot=vt/255,Ct=(ee-vt)/(255*te);let Nt=0;for(let Bt=0;Bt<=te;Bt++){const Qt=Math.round(zt+Bt*Tt),At=Ot+Bt*Ct;for(let Kt=Nt;Kt<=Qt;Kt++)Q[Kt]=At;Nt=Qt+1}for(let Bt=Nt;Bt<256;Bt++)Q[Bt]=Q[Nt-1];return Q.join(",")},Z=`g_${t(this,ht)}_hcm_highlight_filter`,K=at(this,n,q(this,et,xe).call(this,Z));return q(this,it,Qe).call(this,K),q(this,Ft,ye).call(this,ft(Ht[0],Xt[0],5),ft(Ht[1],Xt[1],5),ft(Ht[2],Xt[2],5),K),at(this,i,`url(#${Z})`),t(this,i)}destroy(st=!1){st&&(t(this,C)||t(this,i))||(t(this,V)&&(t(this,V).parentNode.parentNode.remove(),at(this,V,null)),t(this,lt)&&(t(this,lt).clear(),at(this,lt,null)),at(this,h,0))}}lt=new WeakMap,V=new WeakMap,ht=new WeakMap,mt=new WeakMap,Et=new WeakMap,Pt=new WeakMap,C=new WeakMap,n=new WeakMap,o=new WeakMap,i=new WeakMap,h=new WeakMap,u=new WeakSet,ue=function(){return t(this,lt)||at(this,lt,new Map)},L=new WeakSet,fe=function(){if(!t(this,V)){const st=t(this,mt).createElement("div"),{style:pt}=st;pt.visibility="hidden",pt.contain="strict",pt.width=pt.height=0,pt.position="absolute",pt.top=pt.left=0,pt.zIndex=-1;const wt=t(this,mt).createElementNS(G,"svg");wt.setAttribute("width",0),wt.setAttribute("height",0),at(this,V,t(this,mt).createElementNS(G,"defs")),st.append(wt),wt.append(t(this,V)),t(this,mt).body.append(st)}return t(this,V)},it=new WeakSet,Qe=function(st){const pt=t(this,mt).createElementNS(G,"feColorMatrix");pt.setAttribute("type","matrix"),pt.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),st.append(pt)},et=new WeakSet,xe=function(st){const pt=t(this,mt).createElementNS(G,"filter");return pt.setAttribute("color-interpolation-filters","sRGB"),pt.setAttribute("id",st),t(this,L,fe).append(pt),pt},bt=new WeakSet,Ce=function(st,pt,wt){const xt=t(this,mt).createElementNS(G,pt);xt.setAttribute("type","discrete"),xt.setAttribute("tableValues",wt),st.append(xt)},Ft=new WeakSet,ye=function(st,pt,wt,xt){const Ut=t(this,mt).createElementNS(G,"feComponentTransfer");xt.append(Ut),q(this,bt,Ce).call(this,Ut,"feFuncR",st),q(this,bt,Ce).call(this,Ut,"feFuncG",pt),q(this,bt,Ce).call(this,Ut,"feFuncB",wt)},St=new WeakSet,Ae=function(st){return t(this,L,fe).style.color=st,m(getComputedStyle(t(this,L,fe)).getPropertyValue("color"))},s.DOMFilterFactory=ut;class M extends a.BaseCanvasFactory{constructor({ownerDocument:nt=globalThis.document}={}){super(),this._document=nt}_createCanvas(nt,st){const pt=this._document.createElement("canvas");return pt.width=nt,pt.height=st,pt}}s.DOMCanvasFactory=M;async function x(gt,nt=!1){if(v(gt,document.baseURI)){const st=await fetch(gt);if(!st.ok)throw new Error(st.statusText);return nt?new Uint8Array(await st.arrayBuffer()):(0,p.stringToBytes)(await st.text())}return new Promise((st,pt)=>{const wt=new XMLHttpRequest;wt.open("GET",gt,!0),nt&&(wt.responseType="arraybuffer"),wt.onreadystatechange=()=>{if(wt.readyState===XMLHttpRequest.DONE){if(wt.status===200||wt.status===0){let xt;if(nt&&wt.response?xt=new Uint8Array(wt.response):!nt&&wt.responseText&&(xt=(0,p.stringToBytes)(wt.responseText)),xt){st(xt);return}}pt(new Error(wt.statusText))}},wt.send(null)})}class g extends a.BaseCMapReaderFactory{_fetchData(nt,st){return x(nt,this.isCompressed).then(pt=>({cMapData:pt,compressionType:st}))}}s.DOMCMapReaderFactory=g;class I extends a.BaseStandardFontDataFactory{_fetchData(nt){return x(nt,!0)}}s.DOMStandardFontDataFactory=I;class N extends a.BaseSVGFactory{_createSVG(nt){return document.createElementNS(G,nt)}}s.DOMSVGFactory=N;class R{constructor({viewBox:nt,scale:st,rotation:pt,offsetX:wt=0,offsetY:xt=0,dontFlip:Ut=!1}){this.viewBox=nt,this.scale=st,this.rotation=pt,this.offsetX=wt,this.offsetY=xt;const Vt=(nt[2]+nt[0])/2,Wt=(nt[3]+nt[1])/2;let zt,Gt,Ht,Xt;switch(pt%=360,pt<0&&(pt+=360),pt){case 180:zt=-1,Gt=0,Ht=0,Xt=1;break;case 90:zt=0,Gt=1,Ht=1,Xt=0;break;case 270:zt=0,Gt=-1,Ht=-1,Xt=0;break;case 0:zt=1,Gt=0,Ht=0,Xt=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}Ut&&(Ht=-Ht,Xt=-Xt);let ft,Z,K,yt;zt===0?(ft=Math.abs(Wt-nt[1])*st+wt,Z=Math.abs(Vt-nt[0])*st+xt,K=(nt[3]-nt[1])*st,yt=(nt[2]-nt[0])*st):(ft=Math.abs(Vt-nt[0])*st+wt,Z=Math.abs(Wt-nt[1])*st+xt,K=(nt[2]-nt[0])*st,yt=(nt[3]-nt[1])*st),this.transform=[zt*st,Gt*st,Ht*st,Xt*st,ft-zt*st*Vt-Ht*st*Wt,Z-Gt*st*Vt-Xt*st*Wt],this.width=K,this.height=yt}get rawDims(){const{viewBox:nt}=this;return(0,p.shadow)(this,"rawDims",{pageWidth:nt[2]-nt[0],pageHeight:nt[3]-nt[1],pageX:nt[0],pageY:nt[1]})}clone({scale:nt=this.scale,rotation:st=this.rotation,offsetX:pt=this.offsetX,offsetY:wt=this.offsetY,dontFlip:xt=!1}={}){return new R({viewBox:this.viewBox.slice(),scale:nt,rotation:st,offsetX:pt,offsetY:wt,dontFlip:xt})}convertToViewportPoint(nt,st){return p.Util.applyTransform([nt,st],this.transform)}convertToViewportRectangle(nt){const st=p.Util.applyTransform([nt[0],nt[1]],this.transform),pt=p.Util.applyTransform([nt[2],nt[3]],this.transform);return[st[0],st[1],pt[0],pt[1]]}convertToPdfPoint(nt,st){return p.Util.applyInverseTransform([nt,st],this.transform)}}s.PageViewport=R;class E extends p.BaseException{constructor(nt,st=0){super(nt,"RenderingCancelledException"),this.extraDelay=st}}s.RenderingCancelledException=E;function A(gt){const nt=gt.length;let st=0;for(;st<nt&&gt[st].trim()==="";)st++;return gt.substring(st,st+5).toLowerCase()==="data:"}function f(gt){return typeof gt=="string"&&/\.pdf$/i.test(gt)}function y(gt,nt=!1){return nt||([gt]=gt.split(/[#?]/,1)),gt.substring(gt.lastIndexOf("/")+1)}function w(gt,nt="document.pdf"){if(typeof gt!="string")return nt;if(A(gt))return(0,p.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),nt;const st=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,pt=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,wt=st.exec(gt);let xt=pt.exec(wt[1])||pt.exec(wt[2])||pt.exec(wt[3]);if(xt&&(xt=xt[0],xt.includes("%")))try{xt=pt.exec(decodeURIComponent(xt))[0]}catch{}return xt||nt}class P{constructor(){ne(this,"started",Object.create(null));ne(this,"times",[])}time(nt){nt in this.started&&(0,p.warn)(`Timer is already running for ${nt}`),this.started[nt]=Date.now()}timeEnd(nt){nt in this.started||(0,p.warn)(`Timer has not been started for ${nt}`),this.times.push({name:nt,start:this.started[nt],end:Date.now()}),delete this.started[nt]}toString(){const nt=[];let st=0;for(const{name:pt}of this.times)st=Math.max(pt.length,st);for(const{name:pt,start:wt,end:xt}of this.times)nt.push(`${pt.padEnd(st)} ${xt-wt}ms
`);return nt.join("")}}s.StatTimer=P;function v(gt,nt){try{const{protocol:st}=nt?new URL(gt,nt):new URL(gt);return st==="http:"||st==="https:"}catch{return!1}}function l(gt){gt.preventDefault()}function d(gt,nt=!1){return new Promise((st,pt)=>{const wt=document.createElement("script");wt.src=gt,wt.onload=function(xt){nt&&wt.remove(),st(xt)},wt.onerror=function(){pt(new Error(`Cannot load script at: ${wt.src}`))},(document.head||document.documentElement).append(wt)})}function F(gt){console.log("Deprecated API usage: "+gt)}let b;class c{static toDateObject(nt){if(!nt||typeof nt!="string")return null;b||(b=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const st=b.exec(nt);if(!st)return null;const pt=parseInt(st[1],10);let wt=parseInt(st[2],10);wt=wt>=1&&wt<=12?wt-1:0;let xt=parseInt(st[3],10);xt=xt>=1&&xt<=31?xt:1;let Ut=parseInt(st[4],10);Ut=Ut>=0&&Ut<=23?Ut:0;let Vt=parseInt(st[5],10);Vt=Vt>=0&&Vt<=59?Vt:0;let Wt=parseInt(st[6],10);Wt=Wt>=0&&Wt<=59?Wt:0;const zt=st[7]||"Z";let Gt=parseInt(st[8],10);Gt=Gt>=0&&Gt<=23?Gt:0;let Ht=parseInt(st[9],10)||0;return Ht=Ht>=0&&Ht<=59?Ht:0,zt==="-"?(Ut+=Gt,Vt+=Ht):zt==="+"&&(Ut-=Gt,Vt-=Ht),new Date(Date.UTC(pt,wt,xt,Ut,Vt,Wt))}}s.PDFDateString=c;function k(gt,{scale:nt=1,rotation:st=0}){const{width:pt,height:wt}=gt.attributes.style,xt=[0,0,parseInt(pt),parseInt(wt)];return new R({viewBox:xt,scale:nt,rotation:st})}function m(gt){if(gt.startsWith("#")){const nt=parseInt(gt.slice(1),16);return[(nt&16711680)>>16,(nt&65280)>>8,nt&255]}return gt.startsWith("rgb(")?gt.slice(4,-1).split(",").map(nt=>parseInt(nt)):gt.startsWith("rgba(")?gt.slice(5,-1).split(",").map(nt=>parseInt(nt)).slice(0,3):((0,p.warn)(`Not a valid color format: "${gt}"`),[0,0,0])}function $(gt){const nt=document.createElement("span");nt.style.visibility="hidden",document.body.append(nt);for(const st of gt.keys()){nt.style.color=st;const pt=window.getComputedStyle(nt).color;gt.set(st,m(pt))}nt.remove()}function z(gt){const{a:nt,b:st,c:pt,d:wt,e:xt,f:Ut}=gt.getTransform();return[nt,st,pt,wt,xt,Ut]}function T(gt){const{a:nt,b:st,c:pt,d:wt,e:xt,f:Ut}=gt.getTransform().invertSelf();return[nt,st,pt,wt,xt,Ut]}function Y(gt,nt,st=!1,pt=!0){if(nt instanceof R){const{pageWidth:wt,pageHeight:xt}=nt.rawDims,{style:Ut}=gt,Vt=p.FeatureTest.isCSSRoundSupported,Wt=`var(--scale-factor) * ${wt}px`,zt=`var(--scale-factor) * ${xt}px`,Gt=Vt?`round(${Wt}, 1px)`:`calc(${Wt})`,Ht=Vt?`round(${zt}, 1px)`:`calc(${zt})`;!st||nt.rotation%180===0?(Ut.width=Gt,Ut.height=Ht):(Ut.width=Ht,Ut.height=Gt)}pt&&gt.setAttribute("data-main-rotation",nt.rotation)}},(D,s,O)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BaseStandardFontDataFactory=s.BaseSVGFactory=s.BaseFilterFactory=s.BaseCanvasFactory=s.BaseCMapReaderFactory=void 0;var a=O(1);class p{constructor(){this.constructor===p&&(0,a.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(g){return"none"}addHCMFilter(g,I){return"none"}addHighlightHCMFilter(g,I,N,R){return"none"}destroy(g=!1){}}s.BaseFilterFactory=p;class G{constructor(){this.constructor===G&&(0,a.unreachable)("Cannot initialize BaseCanvasFactory.")}create(g,I){if(g<=0||I<=0)throw new Error("Invalid canvas size");const N=this._createCanvas(g,I);return{canvas:N,context:N.getContext("2d")}}reset(g,I,N){if(!g.canvas)throw new Error("Canvas is not specified");if(I<=0||N<=0)throw new Error("Invalid canvas size");g.canvas.width=I,g.canvas.height=N}destroy(g){if(!g.canvas)throw new Error("Canvas is not specified");g.canvas.width=0,g.canvas.height=0,g.canvas=null,g.context=null}_createCanvas(g,I){(0,a.unreachable)("Abstract method `_createCanvas` called.")}}s.BaseCanvasFactory=G;class H{constructor({baseUrl:g=null,isCompressed:I=!0}){this.constructor===H&&(0,a.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=g,this.isCompressed=I}async fetch({name:g}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!g)throw new Error("CMap name must be specified.");const I=this.baseUrl+g+(this.isCompressed?".bcmap":""),N=this.isCompressed?a.CMapCompressionType.BINARY:a.CMapCompressionType.NONE;return this._fetchData(I,N).catch(R=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${I}`)})}_fetchData(g,I){(0,a.unreachable)("Abstract method `_fetchData` called.")}}s.BaseCMapReaderFactory=H;class ut{constructor({baseUrl:g=null}){this.constructor===ut&&(0,a.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=g}async fetch({filename:g}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!g)throw new Error("Font filename must be specified.");const I=`${this.baseUrl}${g}`;return this._fetchData(I).catch(N=>{throw new Error(`Unable to load font data at: ${I}`)})}_fetchData(g){(0,a.unreachable)("Abstract method `_fetchData` called.")}}s.BaseStandardFontDataFactory=ut;class M{constructor(){this.constructor===M&&(0,a.unreachable)("Cannot initialize BaseSVGFactory.")}create(g,I,N=!1){if(g<=0||I<=0)throw new Error("Invalid SVG dimensions");const R=this._createSVG("svg:svg");return R.setAttribute("version","1.1"),N||(R.setAttribute("width",`${g}px`),R.setAttribute("height",`${I}px`)),R.setAttribute("preserveAspectRatio","none"),R.setAttribute("viewBox",`0 0 ${g} ${I}`),R}createElement(g){if(typeof g!="string")throw new Error("Invalid SVG element type");return this._createSVG(g)}_createSVG(g){(0,a.unreachable)("Abstract method `_createSVG` called.")}}s.BaseSVGFactory=M},(D,s,O)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.MurmurHash3_64=void 0;var a=O(1);const p=3285377520,G=4294901760,H=65535;class ut{constructor(x){this.h1=x?x&4294967295:p,this.h2=x?x&4294967295:p}update(x){let g,I;if(typeof x=="string"){g=new Uint8Array(x.length*2),I=0;for(let F=0,b=x.length;F<b;F++){const c=x.charCodeAt(F);c<=255?g[I++]=c:(g[I++]=c>>>8,g[I++]=c&255)}}else if((0,a.isArrayBuffer)(x))g=x.slice(),I=g.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const N=I>>2,R=I-N*4,E=new Uint32Array(g.buffer,0,N);let A=0,f=0,y=this.h1,w=this.h2;const P=3432918353,v=461845907,l=P&H,d=v&H;for(let F=0;F<N;F++)F&1?(A=E[F],A=A*P&G|A*l&H,A=A<<15|A>>>17,A=A*v&G|A*d&H,y^=A,y=y<<13|y>>>19,y=y*5+3864292196):(f=E[F],f=f*P&G|f*l&H,f=f<<15|f>>>17,f=f*v&G|f*d&H,w^=f,w=w<<13|w>>>19,w=w*5+3864292196);switch(A=0,R){case 3:A^=g[N*4+2]<<16;case 2:A^=g[N*4+1]<<8;case 1:A^=g[N*4],A=A*P&G|A*l&H,A=A<<15|A>>>17,A=A*v&G|A*d&H,N&1?y^=A:w^=A}this.h1=y,this.h2=w}hexdigest(){let x=this.h1,g=this.h2;return x^=g>>>1,x=x*3981806797&G|x*36045&H,g=g*4283543511&G|((g<<16|x>>>16)*2950163797&G)>>>16,x^=g>>>1,x=x*444984403&G|x*60499&H,g=g*3301882366&G|((g<<16|x>>>16)*3120437893&G)>>>16,x^=g>>>1,(x>>>0).toString(16).padStart(8,"0")+(g>>>0).toString(16).padStart(8,"0")}}s.MurmurHash3_64=ut},(D,s,O)=>{var H;Object.defineProperty(s,"__esModule",{value:!0}),s.FontLoader=s.FontFaceObject=void 0;var a=O(1);class p{constructor({ownerDocument:M=globalThis.document,styleElement:x=null}){W(this,H,new Set);this._document=M,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(M){this.nativeFontFaces.add(M),this._document.fonts.add(M)}removeNativeFontFace(M){this.nativeFontFaces.delete(M),this._document.fonts.delete(M)}insertRule(M){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const x=this.styleElement.sheet;x.insertRule(M,x.cssRules.length)}clear(){for(const M of this.nativeFontFaces)this._document.fonts.delete(M);this.nativeFontFaces.clear(),t(this,H).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(M){if(!(!M||t(this,H).has(M.loadedName))){if((0,a.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:x,src:g,style:I}=M,N=new FontFace(x,g,I);this.addNativeFontFace(N);try{await N.load(),t(this,H).add(x)}catch{(0,a.warn)(`Cannot load system font: ${M.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(N)}return}(0,a.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(M){if(M.attached||M.missingFile&&!M.systemFontInfo)return;if(M.attached=!0,M.systemFontInfo){await this.loadSystemFont(M.systemFontInfo);return}if(this.isFontLoadingAPISupported){const g=M.createNativeFontFace();if(g){this.addNativeFontFace(g);try{await g.loaded}catch(I){throw(0,a.warn)(`Failed to load font '${g.family}': '${I}'.`),M.disableFontFace=!0,I}}return}const x=M.createFontFaceRule();if(x){if(this.insertRule(x),this.isSyncFontLoadingSupported)return;await new Promise(g=>{const I=this._queueLoadingCallback(g);this._prepareFontLoadEvent(M,I)})}}get isFontLoadingAPISupported(){var x;const M=!!((x=this._document)!=null&&x.fonts);return(0,a.shadow)(this,"isFontLoadingAPISupported",M)}get isSyncFontLoadingSupported(){let M=!1;return(a.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(M=!0),(0,a.shadow)(this,"isSyncFontLoadingSupported",M)}_queueLoadingCallback(M){function x(){for((0,a.assert)(!I.done,"completeRequest() cannot be called twice."),I.done=!0;g.length>0&&g[0].done;){const N=g.shift();setTimeout(N.callback,0)}}const{loadingRequests:g}=this,I={done:!1,complete:x,callback:M};return g.push(I),I}get _loadTestFont(){const M=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,a.shadow)(this,"_loadTestFont",M)}_prepareFontLoadEvent(M,x){function g(m,$){return m.charCodeAt($)<<24|m.charCodeAt($+1)<<16|m.charCodeAt($+2)<<8|m.charCodeAt($+3)&255}function I(m,$,z,T){const Y=m.substring(0,$),rt=m.substring($+z);return Y+T+rt}let N,R;const E=this._document.createElement("canvas");E.width=1,E.height=1;const A=E.getContext("2d");let f=0;function y(m,$){if(++f>30){(0,a.warn)("Load test font never loaded."),$();return}if(A.font="30px "+m,A.fillText(".",0,20),A.getImageData(0,0,1,1).data[3]>0){$();return}setTimeout(y.bind(null,m,$))}const w=`lt${Date.now()}${this.loadTestFontId++}`;let P=this._loadTestFont;P=I(P,976,w.length,w);const l=16,d=1482184792;let F=g(P,l);for(N=0,R=w.length-3;N<R;N+=4)F=F-d+g(w,N)|0;N<w.length&&(F=F-d+g(w+"XXX",N)|0),P=I(P,l,4,(0,a.string32)(F));const b=`url(data:font/opentype;base64,${btoa(P)});`,c=`@font-face {font-family:"${w}";src:${b}}`;this.insertRule(c);const k=this._document.createElement("div");k.style.visibility="hidden",k.style.width=k.style.height="10px",k.style.position="absolute",k.style.top=k.style.left="0px";for(const m of[M.loadedName,w]){const $=this._document.createElement("span");$.textContent="Hi",$.style.fontFamily=m,k.append($)}this._document.body.append(k),y(w,()=>{k.remove(),x.complete()})}}H=new WeakMap,s.FontLoader=p;class G{constructor(M,{isEvalSupported:x=!0,disableFontFace:g=!1,ignoreErrors:I=!1,inspectFont:N=null}){this.compiledGlyphs=Object.create(null);for(const R in M)this[R]=M[R];this.isEvalSupported=x!==!1,this.disableFontFace=g===!0,this.ignoreErrors=I===!0,this._inspectFont=N}createNativeFontFace(){var x;if(!this.data||this.disableFontFace)return null;let M;if(!this.cssFontInfo)M=new FontFace(this.loadedName,this.data,{});else{const g={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(g.style=`oblique ${this.cssFontInfo.italicAngle}deg`),M=new FontFace(this.cssFontInfo.fontFamily,this.data,g)}return(x=this._inspectFont)==null||x.call(this,this),M}createFontFaceRule(){var I;if(!this.data||this.disableFontFace)return null;const M=(0,a.bytesToString)(this.data),x=`url(data:${this.mimetype};base64,${btoa(M)});`;let g;if(!this.cssFontInfo)g=`@font-face {font-family:"${this.loadedName}";src:${x}}`;else{let N=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(N+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),g=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${N}src:${x}}`}return(I=this._inspectFont)==null||I.call(this,this,x),g}getPathGenerator(M,x){if(this.compiledGlyphs[x]!==void 0)return this.compiledGlyphs[x];let g;try{g=M.get(this.loadedName+"_path_"+x)}catch(I){if(!this.ignoreErrors)throw I;return(0,a.warn)(`getPathGenerator - ignoring character: "${I}".`),this.compiledGlyphs[x]=function(N,R){}}if(this.isEvalSupported&&a.FeatureTest.isEvalSupported){const I=[];for(const N of g){const R=N.args!==void 0?N.args.join(","):"";I.push("c.",N.cmd,"(",R,`);
`)}return this.compiledGlyphs[x]=new Function("c","size",I.join(""))}return this.compiledGlyphs[x]=function(I,N){for(const R of g)R.cmd==="scale"&&(R.args=[N,-N]),I[R.cmd].apply(I,R.args)}}}s.FontFaceObject=G},(D,s,O)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.NodeStandardFontDataFactory=s.NodeFilterFactory=s.NodeCanvasFactory=s.NodeCMapReaderFactory=void 0;var a=O(7);O(1);const p=function(x){return new Promise((g,I)=>{require$$5.readFile(x,(R,E)=>{if(R||!E){I(new Error(R));return}g(new Uint8Array(E))})})};class G extends a.BaseFilterFactory{}s.NodeFilterFactory=G;class H extends a.BaseCanvasFactory{_createCanvas(g,I){return require$$5.createCanvas(g,I)}}s.NodeCanvasFactory=H;class ut extends a.BaseCMapReaderFactory{_fetchData(g,I){return p(g).then(N=>({cMapData:N,compressionType:I}))}}s.NodeCMapReaderFactory=ut;class M extends a.BaseStandardFontDataFactory{_fetchData(g){return p(g)}}s.NodeStandardFontDataFactory=M},(D,s,O)=>{var V,Ze,mt,tn;Object.defineProperty(s,"__esModule",{value:!0}),s.CanvasGraphics=void 0;var a=O(1),p=O(6),G=O(12),H=O(13);const ut=16,M=100,x=4096,g=15,I=10,N=1e3,R=16;function E(C,n){if(C._removeMirroring)throw new Error("Context is already forwarding operations.");C.__originalSave=C.save,C.__originalRestore=C.restore,C.__originalRotate=C.rotate,C.__originalScale=C.scale,C.__originalTranslate=C.translate,C.__originalTransform=C.transform,C.__originalSetTransform=C.setTransform,C.__originalResetTransform=C.resetTransform,C.__originalClip=C.clip,C.__originalMoveTo=C.moveTo,C.__originalLineTo=C.lineTo,C.__originalBezierCurveTo=C.bezierCurveTo,C.__originalRect=C.rect,C.__originalClosePath=C.closePath,C.__originalBeginPath=C.beginPath,C._removeMirroring=()=>{C.save=C.__originalSave,C.restore=C.__originalRestore,C.rotate=C.__originalRotate,C.scale=C.__originalScale,C.translate=C.__originalTranslate,C.transform=C.__originalTransform,C.setTransform=C.__originalSetTransform,C.resetTransform=C.__originalResetTransform,C.clip=C.__originalClip,C.moveTo=C.__originalMoveTo,C.lineTo=C.__originalLineTo,C.bezierCurveTo=C.__originalBezierCurveTo,C.rect=C.__originalRect,C.closePath=C.__originalClosePath,C.beginPath=C.__originalBeginPath,delete C._removeMirroring},C.save=function(){n.save(),this.__originalSave()},C.restore=function(){n.restore(),this.__originalRestore()},C.translate=function(i,h){n.translate(i,h),this.__originalTranslate(i,h)},C.scale=function(i,h){n.scale(i,h),this.__originalScale(i,h)},C.transform=function(i,h,u,S,L,U){n.transform(i,h,u,S,L,U),this.__originalTransform(i,h,u,S,L,U)},C.setTransform=function(i,h,u,S,L,U){n.setTransform(i,h,u,S,L,U),this.__originalSetTransform(i,h,u,S,L,U)},C.resetTransform=function(){n.resetTransform(),this.__originalResetTransform()},C.rotate=function(i){n.rotate(i),this.__originalRotate(i)},C.clip=function(i){n.clip(i),this.__originalClip(i)},C.moveTo=function(o,i){n.moveTo(o,i),this.__originalMoveTo(o,i)},C.lineTo=function(o,i){n.lineTo(o,i),this.__originalLineTo(o,i)},C.bezierCurveTo=function(o,i,h,u,S,L){n.bezierCurveTo(o,i,h,u,S,L),this.__originalBezierCurveTo(o,i,h,u,S,L)},C.rect=function(o,i,h,u){n.rect(o,i,h,u),this.__originalRect(o,i,h,u)},C.closePath=function(){n.closePath(),this.__originalClosePath()},C.beginPath=function(){n.beginPath(),this.__originalBeginPath()}}class A{constructor(n){this.canvasFactory=n,this.cache=Object.create(null)}getCanvas(n,o,i){let h;return this.cache[n]!==void 0?(h=this.cache[n],this.canvasFactory.reset(h,o,i)):(h=this.canvasFactory.create(o,i),this.cache[n]=h),h}delete(n){delete this.cache[n]}clear(){for(const n in this.cache){const o=this.cache[n];this.canvasFactory.destroy(o),delete this.cache[n]}}}function f(C,n,o,i,h,u,S,L,U,it){const[tt,et,ct,bt,dt,Ft]=(0,p.getCurrentTransform)(C);if(et===0&&ct===0){const Lt=S*tt+dt,gt=Math.round(Lt),nt=L*bt+Ft,st=Math.round(nt),pt=(S+U)*tt+dt,wt=Math.abs(Math.round(pt)-gt)||1,xt=(L+it)*bt+Ft,Ut=Math.abs(Math.round(xt)-st)||1;return C.setTransform(Math.sign(tt),0,0,Math.sign(bt),gt,st),C.drawImage(n,o,i,h,u,0,0,wt,Ut),C.setTransform(tt,et,ct,bt,dt,Ft),[wt,Ut]}if(tt===0&&bt===0){const Lt=L*ct+dt,gt=Math.round(Lt),nt=S*et+Ft,st=Math.round(nt),pt=(L+it)*ct+dt,wt=Math.abs(Math.round(pt)-gt)||1,xt=(S+U)*et+Ft,Ut=Math.abs(Math.round(xt)-st)||1;return C.setTransform(0,Math.sign(et),Math.sign(ct),0,gt,st),C.drawImage(n,o,i,h,u,0,0,Ut,wt),C.setTransform(tt,et,ct,bt,dt,Ft),[Ut,wt]}C.drawImage(n,o,i,h,u,S,L,U,it);const jt=Math.hypot(tt,et),St=Math.hypot(ct,bt);return[jt*U,St*it]}function y(C){const{width:n,height:o}=C;if(n>N||o>N)return null;const i=1e3,h=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),u=n+1;let S=new Uint8Array(u*(o+1)),L,U,it;const tt=n+7&-8;let et=new Uint8Array(tt*o),ct=0;for(const St of C.data){let Lt=128;for(;Lt>0;)et[ct++]=St&Lt?0:255,Lt>>=1}let bt=0;for(ct=0,et[ct]!==0&&(S[0]=1,++bt),U=1;U<n;U++)et[ct]!==et[ct+1]&&(S[U]=et[ct]?2:1,++bt),ct++;for(et[ct]!==0&&(S[U]=2,++bt),L=1;L<o;L++){ct=L*tt,it=L*u,et[ct-tt]!==et[ct]&&(S[it]=et[ct]?1:8,++bt);let St=(et[ct]?4:0)+(et[ct-tt]?8:0);for(U=1;U<n;U++)St=(St>>2)+(et[ct+1]?4:0)+(et[ct-tt+1]?8:0),h[St]&&(S[it+U]=h[St],++bt),ct++;if(et[ct-tt]!==et[ct]&&(S[it+U]=et[ct]?2:4,++bt),bt>i)return null}for(ct=tt*(o-1),it=L*u,et[ct]!==0&&(S[it]=8,++bt),U=1;U<n;U++)et[ct]!==et[ct+1]&&(S[it+U]=et[ct]?4:8,++bt),ct++;if(et[ct]!==0&&(S[it+U]=4,++bt),bt>i)return null;const dt=new Int32Array([0,u,-1,0,-u,0,0,0,1]),Ft=new Path2D;for(L=0;bt&&L<=o;L++){let St=L*u;const Lt=St+n;for(;St<Lt&&!S[St];)St++;if(St===Lt)continue;Ft.moveTo(St%u,L);const gt=St;let nt=S[St];do{const st=dt[nt];do St+=st;while(!S[St]);const pt=S[St];pt!==5&&pt!==10?(nt=pt,S[St]=0):(nt=pt&51*nt>>4,S[St]&=nt>>2|nt<<2),Ft.lineTo(St%u,St/u|0),S[St]||--bt}while(gt!==St);--L}return et=null,S=null,function(St){St.save(),St.scale(1/n,-1/o),St.translate(0,-o),St.fill(Ft),St.beginPath(),St.restore()}}class w{constructor(n,o){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=a.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=a.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=a.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,n,o])}clone(){const n=Object.create(this);return n.clipBox=this.clipBox.slice(),n}setCurrentPoint(n,o){this.x=n,this.y=o}updatePathMinMax(n,o,i){[o,i]=a.Util.applyTransform([o,i],n),this.minX=Math.min(this.minX,o),this.minY=Math.min(this.minY,i),this.maxX=Math.max(this.maxX,o),this.maxY=Math.max(this.maxY,i)}updateRectMinMax(n,o){const i=a.Util.applyTransform(o,n),h=a.Util.applyTransform(o.slice(2),n);this.minX=Math.min(this.minX,i[0],h[0]),this.minY=Math.min(this.minY,i[1],h[1]),this.maxX=Math.max(this.maxX,i[0],h[0]),this.maxY=Math.max(this.maxY,i[1],h[1])}updateScalingPathMinMax(n,o){a.Util.scaleMinMax(n,o),this.minX=Math.min(this.minX,o[0]),this.maxX=Math.max(this.maxX,o[1]),this.minY=Math.min(this.minY,o[2]),this.maxY=Math.max(this.maxY,o[3])}updateCurvePathMinMax(n,o,i,h,u,S,L,U,it,tt){const et=a.Util.bezierBoundingBox(o,i,h,u,S,L,U,it);if(tt){tt[0]=Math.min(tt[0],et[0],et[2]),tt[1]=Math.max(tt[1],et[0],et[2]),tt[2]=Math.min(tt[2],et[1],et[3]),tt[3]=Math.max(tt[3],et[1],et[3]);return}this.updateRectMinMax(n,et)}getPathBoundingBox(n=G.PathType.FILL,o=null){const i=[this.minX,this.minY,this.maxX,this.maxY];if(n===G.PathType.STROKE){o||(0,a.unreachable)("Stroke bounding box must include transform.");const h=a.Util.singularValueDecompose2dScale(o),u=h[0]*this.lineWidth/2,S=h[1]*this.lineWidth/2;i[0]-=u,i[1]-=S,i[2]+=u,i[3]+=S}return i}updateClipFromPath(){const n=a.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(n||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(n){this.clipBox=n,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(n=G.PathType.FILL,o=null){return a.Util.intersect(this.clipBox,this.getPathBoundingBox(n,o))}}function P(C,n){if(typeof ImageData<"u"&&n instanceof ImageData){C.putImageData(n,0,0);return}const o=n.height,i=n.width,h=o%R,u=(o-h)/R,S=h===0?u:u+1,L=C.createImageData(i,R);let U=0,it;const tt=n.data,et=L.data;let ct,bt,dt,Ft;if(n.kind===a.ImageKind.GRAYSCALE_1BPP){const jt=tt.byteLength,St=new Uint32Array(et.buffer,0,et.byteLength>>2),Lt=St.length,gt=i+7>>3,nt=4294967295,st=a.FeatureTest.isLittleEndian?4278190080:255;for(ct=0;ct<S;ct++){for(dt=ct<u?R:h,it=0,bt=0;bt<dt;bt++){const pt=jt-U;let wt=0;const xt=pt>gt?i:pt*8-7,Ut=xt&-8;let Vt=0,Wt=0;for(;wt<Ut;wt+=8)Wt=tt[U++],St[it++]=Wt&128?nt:st,St[it++]=Wt&64?nt:st,St[it++]=Wt&32?nt:st,St[it++]=Wt&16?nt:st,St[it++]=Wt&8?nt:st,St[it++]=Wt&4?nt:st,St[it++]=Wt&2?nt:st,St[it++]=Wt&1?nt:st;for(;wt<xt;wt++)Vt===0&&(Wt=tt[U++],Vt=128),St[it++]=Wt&Vt?nt:st,Vt>>=1}for(;it<Lt;)St[it++]=0;C.putImageData(L,0,ct*R)}}else if(n.kind===a.ImageKind.RGBA_32BPP){for(bt=0,Ft=i*R*4,ct=0;ct<u;ct++)et.set(tt.subarray(U,U+Ft)),U+=Ft,C.putImageData(L,0,bt),bt+=R;ct<S&&(Ft=i*h*4,et.set(tt.subarray(U,U+Ft)),C.putImageData(L,0,bt))}else if(n.kind===a.ImageKind.RGB_24BPP)for(dt=R,Ft=i*dt,ct=0;ct<S;ct++){for(ct>=u&&(dt=h,Ft=i*dt),it=0,bt=Ft;bt--;)et[it++]=tt[U++],et[it++]=tt[U++],et[it++]=tt[U++],et[it++]=255;C.putImageData(L,0,ct*R)}else throw new Error(`bad image kind: ${n.kind}`)}function v(C,n){if(n.bitmap){C.drawImage(n.bitmap,0,0);return}const o=n.height,i=n.width,h=o%R,u=(o-h)/R,S=h===0?u:u+1,L=C.createImageData(i,R);let U=0;const it=n.data,tt=L.data;for(let et=0;et<S;et++){const ct=et<u?R:h;({srcPos:U}=(0,H.convertBlackAndWhiteToRGBA)({src:it,srcPos:U,dest:tt,width:i,height:ct,nonBlackColor:0})),C.putImageData(L,0,et*R)}}function l(C,n){const o=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const i of o)C[i]!==void 0&&(n[i]=C[i]);C.setLineDash!==void 0&&(n.setLineDash(C.getLineDash()),n.lineDashOffset=C.lineDashOffset)}function d(C){if(C.strokeStyle=C.fillStyle="#000000",C.fillRule="nonzero",C.globalAlpha=1,C.lineWidth=1,C.lineCap="butt",C.lineJoin="miter",C.miterLimit=10,C.globalCompositeOperation="source-over",C.font="10px sans-serif",C.setLineDash!==void 0&&(C.setLineDash([]),C.lineDashOffset=0),!a.isNodeJS){const{filter:n}=C;n!=="none"&&n!==""&&(C.filter="none")}}function F(C,n,o,i){const h=C.length;for(let u=3;u<h;u+=4){const S=C[u];if(S===0)C[u-3]=n,C[u-2]=o,C[u-1]=i;else if(S<255){const L=255-S;C[u-3]=C[u-3]*S+n*L>>8,C[u-2]=C[u-2]*S+o*L>>8,C[u-1]=C[u-1]*S+i*L>>8}}}function b(C,n,o){const i=C.length,h=1/255;for(let u=3;u<i;u+=4){const S=o?o[C[u]]:C[u];n[u]=n[u]*S*h|0}}function c(C,n,o){const i=C.length;for(let h=3;h<i;h+=4){const u=C[h-3]*77+C[h-2]*152+C[h-1]*28;n[h]=o?n[h]*o[u>>8]>>8:n[h]*u>>16}}function k(C,n,o,i,h,u,S,L,U,it,tt){const et=!!u,ct=et?u[0]:0,bt=et?u[1]:0,dt=et?u[2]:0,Ft=h==="Luminosity"?c:b,St=Math.min(i,Math.ceil(1048576/o));for(let Lt=0;Lt<i;Lt+=St){const gt=Math.min(St,i-Lt),nt=C.getImageData(L-it,Lt+(U-tt),o,gt),st=n.getImageData(L,Lt+U,o,gt);et&&F(nt.data,ct,bt,dt),Ft(nt.data,st.data,S),n.putImageData(st,L,Lt+U)}}function m(C,n,o,i){const h=i[0],u=i[1],S=i[2]-h,L=i[3]-u;S===0||L===0||(k(n.context,o,S,L,n.subtype,n.backdrop,n.transferMap,h,u,n.offsetX,n.offsetY),C.save(),C.globalAlpha=1,C.globalCompositeOperation="source-over",C.setTransform(1,0,0,1,0,0),C.drawImage(o.canvas,0,0),C.restore())}function $(C,n){const o=a.Util.singularValueDecompose2dScale(C);o[0]=Math.fround(o[0]),o[1]=Math.fround(o[1]);const i=Math.fround((globalThis.devicePixelRatio||1)*p.PixelsPerInch.PDF_TO_CSS_UNITS);return n!==void 0?n:o[0]<=i||o[1]<=i}const z=["butt","round","square"],T=["miter","round","bevel"],Y={},rt={},Pt=class Pt{constructor(n,o,i,h,u,{optionalContentConfig:S,markedContentStack:L=null},U,it){W(this,V);W(this,mt);this.ctx=n,this.current=new w(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=o,this.objs=i,this.canvasFactory=h,this.filterFactory=u,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=L||[],this.optionalContentConfig=S,this.cachedCanvases=new A(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=U,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=it,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(n,o=null){return typeof n=="string"?n.startsWith("g_")?this.commonObjs.get(n):this.objs.get(n):o}beginDrawing({transform:n,viewport:o,transparency:i=!1,background:h=null}){const u=this.ctx.canvas.width,S=this.ctx.canvas.height,L=this.ctx.fillStyle;if(this.ctx.fillStyle=h||"#ffffff",this.ctx.fillRect(0,0,u,S),this.ctx.fillStyle=L,i){const U=this.cachedCanvases.getCanvas("transparent",u,S);this.compositeCtx=this.ctx,this.transparentCanvas=U.canvas,this.ctx=U.context,this.ctx.save(),this.ctx.transform(...(0,p.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),d(this.ctx),n&&(this.ctx.transform(...n),this.outputScaleX=n[0],this.outputScaleY=n[0]),this.ctx.transform(...o.transform),this.viewportScale=o.scale,this.baseTransform=(0,p.getCurrentTransform)(this.ctx)}executeOperatorList(n,o,i,h){const u=n.argsArray,S=n.fnArray;let L=o||0;const U=u.length;if(U===L)return L;const it=U-L>I&&typeof i=="function",tt=it?Date.now()+g:0;let et=0;const ct=this.commonObjs,bt=this.objs;let dt;for(;;){if(h!==void 0&&L===h.nextBreakPoint)return h.breakIt(L,i),L;if(dt=S[L],dt!==a.OPS.dependency)this[dt].apply(this,u[L]);else for(const Ft of u[L]){const jt=Ft.startsWith("g_")?ct:bt;if(!jt.has(Ft))return jt.get(Ft,i),L}if(L++,L===U)return L;if(it&&++et>I){if(Date.now()>tt)return i(),L;et=0}}}endDrawing(){q(this,V,Ze).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const n of this._cachedBitmapsMap.values()){for(const o of n.values())typeof HTMLCanvasElement<"u"&&o instanceof HTMLCanvasElement&&(o.width=o.height=0);n.clear()}this._cachedBitmapsMap.clear(),q(this,mt,tn).call(this)}_scaleImage(n,o){const i=n.width,h=n.height;let u=Math.max(Math.hypot(o[0],o[1]),1),S=Math.max(Math.hypot(o[2],o[3]),1),L=i,U=h,it="prescale1",tt,et;for(;u>2&&L>1||S>2&&U>1;){let ct=L,bt=U;u>2&&L>1&&(ct=L>=16384?Math.floor(L/2)-1||1:Math.ceil(L/2),u/=L/ct),S>2&&U>1&&(bt=U>=16384?Math.floor(U/2)-1||1:Math.ceil(U)/2,S/=U/bt),tt=this.cachedCanvases.getCanvas(it,ct,bt),et=tt.context,et.clearRect(0,0,ct,bt),et.drawImage(n,0,0,L,U,0,0,ct,bt),n=tt.canvas,L=ct,U=bt,it=it==="prescale1"?"prescale2":"prescale1"}return{img:n,paintWidth:L,paintHeight:U}}_createMaskCanvas(n){const o=this.ctx,{width:i,height:h}=n,u=this.current.fillColor,S=this.current.patternFill,L=(0,p.getCurrentTransform)(o);let U,it,tt,et;if((n.bitmap||n.data)&&n.count>1){const wt=n.bitmap||n.data.buffer;it=JSON.stringify(S?L:[L.slice(0,4),u]),U=this._cachedBitmapsMap.get(wt),U||(U=new Map,this._cachedBitmapsMap.set(wt,U));const xt=U.get(it);if(xt&&!S){const Ut=Math.round(Math.min(L[0],L[2])+L[4]),Vt=Math.round(Math.min(L[1],L[3])+L[5]);return{canvas:xt,offsetX:Ut,offsetY:Vt}}tt=xt}tt||(et=this.cachedCanvases.getCanvas("maskCanvas",i,h),v(et.context,n));let ct=a.Util.transform(L,[1/i,0,0,-1/h,0,0]);ct=a.Util.transform(ct,[1,0,0,1,0,-h]);const bt=a.Util.applyTransform([0,0],ct),dt=a.Util.applyTransform([i,h],ct),Ft=a.Util.normalizeRect([bt[0],bt[1],dt[0],dt[1]]),jt=Math.round(Ft[2]-Ft[0])||1,St=Math.round(Ft[3]-Ft[1])||1,Lt=this.cachedCanvases.getCanvas("fillCanvas",jt,St),gt=Lt.context,nt=Math.min(bt[0],dt[0]),st=Math.min(bt[1],dt[1]);gt.translate(-nt,-st),gt.transform(...ct),tt||(tt=this._scaleImage(et.canvas,(0,p.getCurrentTransformInverse)(gt)),tt=tt.img,U&&S&&U.set(it,tt)),gt.imageSmoothingEnabled=$((0,p.getCurrentTransform)(gt),n.interpolate),f(gt,tt,0,0,tt.width,tt.height,0,0,i,h),gt.globalCompositeOperation="source-in";const pt=a.Util.transform((0,p.getCurrentTransformInverse)(gt),[1,0,0,1,-nt,-st]);return gt.fillStyle=S?u.getPattern(o,this,pt,G.PathType.FILL):u,gt.fillRect(0,0,i,h),U&&!S&&(this.cachedCanvases.delete("fillCanvas"),U.set(it,Lt.canvas)),{canvas:Lt.canvas,offsetX:Math.round(nt),offsetY:Math.round(st)}}setLineWidth(n){n!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=n,this.ctx.lineWidth=n}setLineCap(n){this.ctx.lineCap=z[n]}setLineJoin(n){this.ctx.lineJoin=T[n]}setMiterLimit(n){this.ctx.miterLimit=n}setDash(n,o){const i=this.ctx;i.setLineDash!==void 0&&(i.setLineDash(n),i.lineDashOffset=o)}setRenderingIntent(n){}setFlatness(n){}setGState(n){for(const[o,i]of n)switch(o){case"LW":this.setLineWidth(i);break;case"LC":this.setLineCap(i);break;case"LJ":this.setLineJoin(i);break;case"ML":this.setMiterLimit(i);break;case"D":this.setDash(i[0],i[1]);break;case"RI":this.setRenderingIntent(i);break;case"FL":this.setFlatness(i);break;case"Font":this.setFont(i[0],i[1]);break;case"CA":this.current.strokeAlpha=i;break;case"ca":this.current.fillAlpha=i,this.ctx.globalAlpha=i;break;case"BM":this.ctx.globalCompositeOperation=i;break;case"SMask":this.current.activeSMask=i?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(i);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const n=this.inSMaskMode;this.current.activeSMask&&!n?this.beginSMaskMode():!this.current.activeSMask&&n&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const n=this.ctx.canvas.width,o=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,h=this.cachedCanvases.getCanvas(i,n,o);this.suspendedCtx=this.ctx,this.ctx=h.context;const u=this.ctx;u.setTransform(...(0,p.getCurrentTransform)(this.suspendedCtx)),l(this.suspendedCtx,u),E(u,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),l(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(n){if(!this.current.activeSMask)return;n?(n[0]=Math.floor(n[0]),n[1]=Math.floor(n[1]),n[2]=Math.ceil(n[2]),n[3]=Math.ceil(n[3])):n=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const o=this.current.activeSMask,i=this.suspendedCtx;m(i,o,this.ctx,n),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(l(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const n=this.current;this.stateStack.push(n),this.current=n.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),l(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(n,o,i,h,u,S){this.ctx.transform(n,o,i,h,u,S),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(n,o,i){const h=this.ctx,u=this.current;let S=u.x,L=u.y,U,it;const tt=(0,p.getCurrentTransform)(h),et=tt[0]===0&&tt[3]===0||tt[1]===0&&tt[2]===0,ct=et?i.slice(0):null;for(let bt=0,dt=0,Ft=n.length;bt<Ft;bt++)switch(n[bt]|0){case a.OPS.rectangle:S=o[dt++],L=o[dt++];const jt=o[dt++],St=o[dt++],Lt=S+jt,gt=L+St;h.moveTo(S,L),jt===0||St===0?h.lineTo(Lt,gt):(h.lineTo(Lt,L),h.lineTo(Lt,gt),h.lineTo(S,gt)),et||u.updateRectMinMax(tt,[S,L,Lt,gt]),h.closePath();break;case a.OPS.moveTo:S=o[dt++],L=o[dt++],h.moveTo(S,L),et||u.updatePathMinMax(tt,S,L);break;case a.OPS.lineTo:S=o[dt++],L=o[dt++],h.lineTo(S,L),et||u.updatePathMinMax(tt,S,L);break;case a.OPS.curveTo:U=S,it=L,S=o[dt+4],L=o[dt+5],h.bezierCurveTo(o[dt],o[dt+1],o[dt+2],o[dt+3],S,L),u.updateCurvePathMinMax(tt,U,it,o[dt],o[dt+1],o[dt+2],o[dt+3],S,L,ct),dt+=6;break;case a.OPS.curveTo2:U=S,it=L,h.bezierCurveTo(S,L,o[dt],o[dt+1],o[dt+2],o[dt+3]),u.updateCurvePathMinMax(tt,U,it,S,L,o[dt],o[dt+1],o[dt+2],o[dt+3],ct),S=o[dt+2],L=o[dt+3],dt+=4;break;case a.OPS.curveTo3:U=S,it=L,S=o[dt+2],L=o[dt+3],h.bezierCurveTo(o[dt],o[dt+1],S,L,S,L),u.updateCurvePathMinMax(tt,U,it,o[dt],o[dt+1],S,L,S,L,ct),dt+=4;break;case a.OPS.closePath:h.closePath();break}et&&u.updateScalingPathMinMax(tt,ct),u.setCurrentPoint(S,L)}closePath(){this.ctx.closePath()}stroke(n=!0){const o=this.ctx,i=this.current.strokeColor;o.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof i=="object"&&(i!=null&&i.getPattern)?(o.save(),o.strokeStyle=i.getPattern(o,this,(0,p.getCurrentTransformInverse)(o),G.PathType.STROKE),this.rescaleAndStroke(!1),o.restore()):this.rescaleAndStroke(!0)),n&&this.consumePath(this.current.getClippedPathBoundingBox()),o.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(n=!0){const o=this.ctx,i=this.current.fillColor,h=this.current.patternFill;let u=!1;h&&(o.save(),o.fillStyle=i.getPattern(o,this,(0,p.getCurrentTransformInverse)(o),G.PathType.FILL),u=!0);const S=this.current.getClippedPathBoundingBox();this.contentVisible&&S!==null&&(this.pendingEOFill?(o.fill("evenodd"),this.pendingEOFill=!1):o.fill()),u&&o.restore(),n&&this.consumePath(S)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=Y}eoClip(){this.pendingClip=rt}beginText(){this.current.textMatrix=a.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const n=this.pendingTextPaths,o=this.ctx;if(n===void 0){o.beginPath();return}o.save(),o.beginPath();for(const i of n)o.setTransform(...i.transform),o.translate(i.x,i.y),i.addToPath(o,i.fontSize);o.restore(),o.clip(),o.beginPath(),delete this.pendingTextPaths}setCharSpacing(n){this.current.charSpacing=n}setWordSpacing(n){this.current.wordSpacing=n}setHScale(n){this.current.textHScale=n/100}setLeading(n){this.current.leading=-n}setFont(n,o){var tt;const i=this.commonObjs.get(n),h=this.current;if(!i)throw new Error(`Can't find font for ${n}`);if(h.fontMatrix=i.fontMatrix||a.FONT_IDENTITY_MATRIX,(h.fontMatrix[0]===0||h.fontMatrix[3]===0)&&(0,a.warn)("Invalid font matrix for font "+n),o<0?(o=-o,h.fontDirection=-1):h.fontDirection=1,this.current.font=i,this.current.fontSize=o,i.isType3Font)return;const u=i.loadedName||"sans-serif",S=((tt=i.systemFontInfo)==null?void 0:tt.css)||`"${u}", ${i.fallbackName}`;let L="normal";i.black?L="900":i.bold&&(L="bold");const U=i.italic?"italic":"normal";let it=o;o<ut?it=ut:o>M&&(it=M),this.current.fontSizeScale=o/it,this.ctx.font=`${U} ${L} ${it}px ${S}`}setTextRenderingMode(n){this.current.textRenderingMode=n}setTextRise(n){this.current.textRise=n}moveText(n,o){this.current.x=this.current.lineX+=n,this.current.y=this.current.lineY+=o}setLeadingMoveText(n,o){this.setLeading(-o),this.moveText(n,o)}setTextMatrix(n,o,i,h,u,S){this.current.textMatrix=[n,o,i,h,u,S],this.current.textMatrixScale=Math.hypot(n,o),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(n,o,i,h){const u=this.ctx,S=this.current,L=S.font,U=S.textRenderingMode,it=S.fontSize/S.fontSizeScale,tt=U&a.TextRenderingMode.FILL_STROKE_MASK,et=!!(U&a.TextRenderingMode.ADD_TO_PATH_FLAG),ct=S.patternFill&&!L.missingFile;let bt;(L.disableFontFace||et||ct)&&(bt=L.getPathGenerator(this.commonObjs,n)),L.disableFontFace||ct?(u.save(),u.translate(o,i),u.beginPath(),bt(u,it),h&&u.setTransform(...h),(tt===a.TextRenderingMode.FILL||tt===a.TextRenderingMode.FILL_STROKE)&&u.fill(),(tt===a.TextRenderingMode.STROKE||tt===a.TextRenderingMode.FILL_STROKE)&&u.stroke(),u.restore()):((tt===a.TextRenderingMode.FILL||tt===a.TextRenderingMode.FILL_STROKE)&&u.fillText(n,o,i),(tt===a.TextRenderingMode.STROKE||tt===a.TextRenderingMode.FILL_STROKE)&&u.strokeText(n,o,i)),et&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,p.getCurrentTransform)(u),x:o,y:i,fontSize:it,addToPath:bt})}get isFontSubpixelAAEnabled(){const{context:n}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);n.scale(1.5,1),n.fillText("I",0,10);const o=n.getImageData(0,0,10,10).data;let i=!1;for(let h=3;h<o.length;h+=4)if(o[h]>0&&o[h]<255){i=!0;break}return(0,a.shadow)(this,"isFontSubpixelAAEnabled",i)}showText(n){const o=this.current,i=o.font;if(i.isType3Font)return this.showType3Text(n);const h=o.fontSize;if(h===0)return;const u=this.ctx,S=o.fontSizeScale,L=o.charSpacing,U=o.wordSpacing,it=o.fontDirection,tt=o.textHScale*it,et=n.length,ct=i.vertical,bt=ct?1:-1,dt=i.defaultVMetrics,Ft=h*o.fontMatrix[0],jt=o.textRenderingMode===a.TextRenderingMode.FILL&&!i.disableFontFace&&!o.patternFill;u.save(),u.transform(...o.textMatrix),u.translate(o.x,o.y+o.textRise),it>0?u.scale(tt,-1):u.scale(tt,1);let St;if(o.patternFill){u.save();const pt=o.fillColor.getPattern(u,this,(0,p.getCurrentTransformInverse)(u),G.PathType.FILL);St=(0,p.getCurrentTransform)(u),u.restore(),u.fillStyle=pt}let Lt=o.lineWidth;const gt=o.textMatrixScale;if(gt===0||Lt===0){const pt=o.textRenderingMode&a.TextRenderingMode.FILL_STROKE_MASK;(pt===a.TextRenderingMode.STROKE||pt===a.TextRenderingMode.FILL_STROKE)&&(Lt=this.getSinglePixelWidth())}else Lt/=gt;if(S!==1&&(u.scale(S,S),Lt/=S),u.lineWidth=Lt,i.isInvalidPDFjsFont){const pt=[];let wt=0;for(const xt of n)pt.push(xt.unicode),wt+=xt.width;u.fillText(pt.join(""),0,0),o.x+=wt*Ft*tt,u.restore(),this.compose();return}let nt=0,st;for(st=0;st<et;++st){const pt=n[st];if(typeof pt=="number"){nt+=bt*pt*h/1e3;continue}let wt=!1;const xt=(pt.isSpace?U:0)+L,Ut=pt.fontChar,Vt=pt.accent;let Wt,zt,Gt=pt.width;if(ct){const Xt=pt.vmetric||dt,ft=-(pt.vmetric?Xt[1]:Gt*.5)*Ft,Z=Xt[2]*Ft;Gt=Xt?-Xt[0]:Gt,Wt=ft/S,zt=(nt+Z)/S}else Wt=nt/S,zt=0;if(i.remeasure&&Gt>0){const Xt=u.measureText(Ut).width*1e3/h*S;if(Gt<Xt&&this.isFontSubpixelAAEnabled){const ft=Gt/Xt;wt=!0,u.save(),u.scale(ft,1),Wt/=ft}else Gt!==Xt&&(Wt+=(Gt-Xt)/2e3*h/S)}if(this.contentVisible&&(pt.isInFont||i.missingFile)){if(jt&&!Vt)u.fillText(Ut,Wt,zt);else if(this.paintChar(Ut,Wt,zt,St),Vt){const Xt=Wt+h*Vt.offset.x/S,ft=zt-h*Vt.offset.y/S;this.paintChar(Vt.fontChar,Xt,ft,St)}}const Ht=ct?Gt*Ft-xt*it:Gt*Ft+xt*it;nt+=Ht,wt&&u.restore()}ct?o.y-=nt:o.x+=nt*tt,u.restore(),this.compose()}showType3Text(n){const o=this.ctx,i=this.current,h=i.font,u=i.fontSize,S=i.fontDirection,L=h.vertical?1:-1,U=i.charSpacing,it=i.wordSpacing,tt=i.textHScale*S,et=i.fontMatrix||a.FONT_IDENTITY_MATRIX,ct=n.length,bt=i.textRenderingMode===a.TextRenderingMode.INVISIBLE;let dt,Ft,jt,St;if(!(bt||u===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,o.save(),o.transform(...i.textMatrix),o.translate(i.x,i.y),o.scale(tt,S),dt=0;dt<ct;++dt){if(Ft=n[dt],typeof Ft=="number"){St=L*Ft*u/1e3,this.ctx.translate(St,0),i.x+=St*tt;continue}const Lt=(Ft.isSpace?it:0)+U,gt=h.charProcOperatorList[Ft.operatorListId];if(!gt){(0,a.warn)(`Type3 character "${Ft.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=Ft,this.save(),o.scale(u,u),o.transform(...et),this.executeOperatorList(gt),this.restore()),jt=a.Util.applyTransform([Ft.width,0],et)[0]*u+Lt,o.translate(jt,0),i.x+=jt*tt}o.restore(),this.processingType3=null}}setCharWidth(n,o){}setCharWidthAndBounds(n,o,i,h,u,S){this.ctx.rect(i,h,u-i,S-h),this.ctx.clip(),this.endPath()}getColorN_Pattern(n){let o;if(n[0]==="TilingPattern"){const i=n[1],h=this.baseTransform||(0,p.getCurrentTransform)(this.ctx),u={createCanvasGraphics:S=>new Pt(S,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};o=new G.TilingPattern(n,i,this.ctx,u,h)}else o=this._getPattern(n[1],n[2]);return o}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(n,o,i){const h=a.Util.makeHexColor(n,o,i);this.ctx.strokeStyle=h,this.current.strokeColor=h}setFillRGBColor(n,o,i){const h=a.Util.makeHexColor(n,o,i);this.ctx.fillStyle=h,this.current.fillColor=h,this.current.patternFill=!1}_getPattern(n,o=null){let i;return this.cachedPatterns.has(n)?i=this.cachedPatterns.get(n):(i=(0,G.getShadingPattern)(this.getObject(n)),this.cachedPatterns.set(n,i)),o&&(i.matrix=o),i}shadingFill(n){if(!this.contentVisible)return;const o=this.ctx;this.save();const i=this._getPattern(n);o.fillStyle=i.getPattern(o,this,(0,p.getCurrentTransformInverse)(o),G.PathType.SHADING);const h=(0,p.getCurrentTransformInverse)(o);if(h){const{width:u,height:S}=o.canvas,[L,U,it,tt]=a.Util.getAxialAlignedBoundingBox([0,0,u,S],h);this.ctx.fillRect(L,U,it-L,tt-U)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,a.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,a.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(n,o){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(n)&&n.length===6&&this.transform(...n),this.baseTransform=(0,p.getCurrentTransform)(this.ctx),o)){const i=o[2]-o[0],h=o[3]-o[1];this.ctx.rect(o[0],o[1],i,h),this.current.updateRectMinMax((0,p.getCurrentTransform)(this.ctx),o),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(n){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const o=this.ctx;n.isolated||(0,a.info)("TODO: Support non-isolated groups."),n.knockout&&(0,a.warn)("Knockout groups not supported.");const i=(0,p.getCurrentTransform)(o);if(n.matrix&&o.transform(...n.matrix),!n.bbox)throw new Error("Bounding box is required.");let h=a.Util.getAxialAlignedBoundingBox(n.bbox,(0,p.getCurrentTransform)(o));const u=[0,0,o.canvas.width,o.canvas.height];h=a.Util.intersect(h,u)||[0,0,0,0];const S=Math.floor(h[0]),L=Math.floor(h[1]);let U=Math.max(Math.ceil(h[2])-S,1),it=Math.max(Math.ceil(h[3])-L,1),tt=1,et=1;U>x&&(tt=U/x,U=x),it>x&&(et=it/x,it=x),this.current.startNewPathAndClipBox([0,0,U,it]);let ct="groupAt"+this.groupLevel;n.smask&&(ct+="_smask_"+this.smaskCounter++%2);const bt=this.cachedCanvases.getCanvas(ct,U,it),dt=bt.context;dt.scale(1/tt,1/et),dt.translate(-S,-L),dt.transform(...i),n.smask?this.smaskStack.push({canvas:bt.canvas,context:dt,offsetX:S,offsetY:L,scaleX:tt,scaleY:et,subtype:n.smask.subtype,backdrop:n.smask.backdrop,transferMap:n.smask.transferMap||null,startTransformInverse:null}):(o.setTransform(1,0,0,1,0,0),o.translate(S,L),o.scale(tt,et),o.save()),l(o,dt),this.ctx=dt,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(o),this.groupLevel++}endGroup(n){if(!this.contentVisible)return;this.groupLevel--;const o=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,n.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const h=(0,p.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...h);const u=a.Util.getAxialAlignedBoundingBox([0,0,o.canvas.width,o.canvas.height],h);this.ctx.drawImage(o.canvas,0,0),this.ctx.restore(),this.compose(u)}}beginAnnotation(n,o,i,h,u){if(q(this,V,Ze).call(this),d(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(o)&&o.length===4){const S=o[2]-o[0],L=o[3]-o[1];if(u&&this.annotationCanvasMap){i=i.slice(),i[4]-=o[0],i[5]-=o[1],o=o.slice(),o[0]=o[1]=0,o[2]=S,o[3]=L;const[U,it]=a.Util.singularValueDecompose2dScale((0,p.getCurrentTransform)(this.ctx)),{viewportScale:tt}=this,et=Math.ceil(S*this.outputScaleX*tt),ct=Math.ceil(L*this.outputScaleY*tt);this.annotationCanvas=this.canvasFactory.create(et,ct);const{canvas:bt,context:dt}=this.annotationCanvas;this.annotationCanvasMap.set(n,bt),this.annotationCanvas.savedCtx=this.ctx,this.ctx=dt,this.ctx.save(),this.ctx.setTransform(U,0,0,-it,0,L*it),d(this.ctx)}else d(this.ctx),this.ctx.rect(o[0],o[1],S,L),this.ctx.clip(),this.endPath()}this.current=new w(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...i),this.transform(...h)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),q(this,mt,tn).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(n){if(!this.contentVisible)return;const o=n.count;n=this.getObject(n.data,n),n.count=o;const i=this.ctx,h=this.processingType3;if(h&&(h.compiled===void 0&&(h.compiled=y(n)),h.compiled)){h.compiled(i);return}const u=this._createMaskCanvas(n),S=u.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(S,u.offsetX,u.offsetY),i.restore(),this.compose()}paintImageMaskXObjectRepeat(n,o,i=0,h=0,u,S){if(!this.contentVisible)return;n=this.getObject(n.data,n);const L=this.ctx;L.save();const U=(0,p.getCurrentTransform)(L);L.transform(o,i,h,u,0,0);const it=this._createMaskCanvas(n);L.setTransform(1,0,0,1,it.offsetX-U[4],it.offsetY-U[5]);for(let tt=0,et=S.length;tt<et;tt+=2){const ct=a.Util.transform(U,[o,i,h,u,S[tt],S[tt+1]]),[bt,dt]=a.Util.applyTransform([0,0],ct);L.drawImage(it.canvas,bt,dt)}L.restore(),this.compose()}paintImageMaskXObjectGroup(n){if(!this.contentVisible)return;const o=this.ctx,i=this.current.fillColor,h=this.current.patternFill;for(const u of n){const{data:S,width:L,height:U,transform:it}=u,tt=this.cachedCanvases.getCanvas("maskCanvas",L,U),et=tt.context;et.save();const ct=this.getObject(S,u);v(et,ct),et.globalCompositeOperation="source-in",et.fillStyle=h?i.getPattern(et,this,(0,p.getCurrentTransformInverse)(o),G.PathType.FILL):i,et.fillRect(0,0,L,U),et.restore(),o.save(),o.transform(...it),o.scale(1,-1),f(o,tt.canvas,0,0,L,U,0,-1,1,1),o.restore()}this.compose()}paintImageXObject(n){if(!this.contentVisible)return;const o=this.getObject(n);if(!o){(0,a.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(o)}paintImageXObjectRepeat(n,o,i,h){if(!this.contentVisible)return;const u=this.getObject(n);if(!u){(0,a.warn)("Dependent image isn't ready yet");return}const S=u.width,L=u.height,U=[];for(let it=0,tt=h.length;it<tt;it+=2)U.push({transform:[o,0,0,i,h[it],h[it+1]],x:0,y:0,w:S,h:L});this.paintInlineImageXObjectGroup(u,U)}applyTransferMapsToCanvas(n){return this.current.transferMaps!=="none"&&(n.filter=this.current.transferMaps,n.drawImage(n.canvas,0,0),n.filter="none"),n.canvas}applyTransferMapsToBitmap(n){if(this.current.transferMaps==="none")return n.bitmap;const{bitmap:o,width:i,height:h}=n,u=this.cachedCanvases.getCanvas("inlineImage",i,h),S=u.context;return S.filter=this.current.transferMaps,S.drawImage(o,0,0),S.filter="none",u.canvas}paintInlineImageXObject(n){if(!this.contentVisible)return;const o=n.width,i=n.height,h=this.ctx;if(this.save(),!a.isNodeJS){const{filter:L}=h;L!=="none"&&L!==""&&(h.filter="none")}h.scale(1/o,-1/i);let u;if(n.bitmap)u=this.applyTransferMapsToBitmap(n);else if(typeof HTMLElement=="function"&&n instanceof HTMLElement||!n.data)u=n;else{const U=this.cachedCanvases.getCanvas("inlineImage",o,i).context;P(U,n),u=this.applyTransferMapsToCanvas(U)}const S=this._scaleImage(u,(0,p.getCurrentTransformInverse)(h));h.imageSmoothingEnabled=$((0,p.getCurrentTransform)(h),n.interpolate),f(h,S.img,0,0,S.paintWidth,S.paintHeight,0,-i,o,i),this.compose(),this.restore()}paintInlineImageXObjectGroup(n,o){if(!this.contentVisible)return;const i=this.ctx;let h;if(n.bitmap)h=n.bitmap;else{const u=n.width,S=n.height,U=this.cachedCanvases.getCanvas("inlineImage",u,S).context;P(U,n),h=this.applyTransferMapsToCanvas(U)}for(const u of o)i.save(),i.transform(...u.transform),i.scale(1,-1),f(i,h,u.x,u.y,u.w,u.h,0,-1,1,1),i.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(n){}markPointProps(n,o){}beginMarkedContent(n){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(n,o){n==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(o)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(n){const o=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(n);const i=this.ctx;this.pendingClip&&(o||(this.pendingClip===rt?i.clip("evenodd"):i.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),i.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const n=(0,p.getCurrentTransform)(this.ctx);if(n[1]===0&&n[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(n[0]),Math.abs(n[3]));else{const o=Math.abs(n[0]*n[3]-n[2]*n[1]),i=Math.hypot(n[0],n[2]),h=Math.hypot(n[1],n[3]);this._cachedGetSinglePixelWidth=Math.max(i,h)/o}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:n}=this.current,{a:o,b:i,c:h,d:u}=this.ctx.getTransform();let S,L;if(i===0&&h===0){const U=Math.abs(o),it=Math.abs(u);if(U===it)if(n===0)S=L=1/U;else{const tt=U*n;S=L=tt<1?1/tt:1}else if(n===0)S=1/U,L=1/it;else{const tt=U*n,et=it*n;S=tt<1?1/tt:1,L=et<1?1/et:1}}else{const U=Math.abs(o*u-i*h),it=Math.hypot(o,i),tt=Math.hypot(h,u);if(n===0)S=tt/U,L=it/U;else{const et=n*U;S=tt>et?tt/et:1,L=it>et?it/et:1}}this._cachedScaleForStroking[0]=S,this._cachedScaleForStroking[1]=L}return this._cachedScaleForStroking}rescaleAndStroke(n){const{ctx:o}=this,{lineWidth:i}=this.current,[h,u]=this.getScaleForStroking();if(o.lineWidth=i||1,h===1&&u===1){o.stroke();return}const S=o.getLineDash();if(n&&o.save(),o.scale(h,u),S.length>0){const L=Math.max(h,u);o.setLineDash(S.map(U=>U/L)),o.lineDashOffset/=L}o.stroke(),n&&o.restore()}isContentVisible(){for(let n=this.markedContentStack.length-1;n>=0;n--)if(!this.markedContentStack[n].visible)return!1;return!0}};V=new WeakSet,Ze=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},mt=new WeakSet,tn=function(){if(this.pageColors){const n=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(n!=="none"){const o=this.ctx.filter;this.ctx.filter=n,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=o}}};let lt=Pt;s.CanvasGraphics=lt;for(const C in a.OPS)lt.prototype[C]!==void 0&&(lt.prototype[a.OPS[C]]=lt.prototype[C])},(D,s,O)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.TilingPattern=s.PathType=void 0,s.getShadingPattern=R;var a=O(1),p=O(6);const G={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};s.PathType=G;function H(y,w){if(!w)return;const P=w[2]-w[0],v=w[3]-w[1],l=new Path2D;l.rect(w[0],w[1],P,v),y.clip(l)}class ut{constructor(){this.constructor===ut&&(0,a.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,a.unreachable)("Abstract method `getPattern` called.")}}class M extends ut{constructor(w){super(),this._type=w[1],this._bbox=w[2],this._colorStops=w[3],this._p0=w[4],this._p1=w[5],this._r0=w[6],this._r1=w[7],this.matrix=null}_createGradient(w){let P;this._type==="axial"?P=w.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(P=w.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const v of this._colorStops)P.addColorStop(v[0],v[1]);return P}getPattern(w,P,v,l){let d;if(l===G.STROKE||l===G.FILL){const F=P.current.getClippedPathBoundingBox(l,(0,p.getCurrentTransform)(w))||[0,0,0,0],b=Math.ceil(F[2]-F[0])||1,c=Math.ceil(F[3]-F[1])||1,k=P.cachedCanvases.getCanvas("pattern",b,c,!0),m=k.context;m.clearRect(0,0,m.canvas.width,m.canvas.height),m.beginPath(),m.rect(0,0,m.canvas.width,m.canvas.height),m.translate(-F[0],-F[1]),v=a.Util.transform(v,[1,0,0,1,F[0],F[1]]),m.transform(...P.baseTransform),this.matrix&&m.transform(...this.matrix),H(m,this._bbox),m.fillStyle=this._createGradient(m),m.fill(),d=w.createPattern(k.canvas,"no-repeat");const $=new DOMMatrix(v);d.setTransform($)}else H(w,this._bbox),d=this._createGradient(w);return d}}function x(y,w,P,v,l,d,F,b){const c=w.coords,k=w.colors,m=y.data,$=y.width*4;let z;c[P+1]>c[v+1]&&(z=P,P=v,v=z,z=d,d=F,F=z),c[v+1]>c[l+1]&&(z=v,v=l,l=z,z=F,F=b,b=z),c[P+1]>c[v+1]&&(z=P,P=v,v=z,z=d,d=F,F=z);const T=(c[P]+w.offsetX)*w.scaleX,Y=(c[P+1]+w.offsetY)*w.scaleY,rt=(c[v]+w.offsetX)*w.scaleX,lt=(c[v+1]+w.offsetY)*w.scaleY,V=(c[l]+w.offsetX)*w.scaleX,ht=(c[l+1]+w.offsetY)*w.scaleY;if(Y>=ht)return;const mt=k[d],Et=k[d+1],Pt=k[d+2],C=k[F],n=k[F+1],o=k[F+2],i=k[b],h=k[b+1],u=k[b+2],S=Math.round(Y),L=Math.round(ht);let U,it,tt,et,ct,bt,dt,Ft;for(let jt=S;jt<=L;jt++){if(jt<lt){const st=jt<Y?0:(Y-jt)/(Y-lt);U=T-(T-rt)*st,it=mt-(mt-C)*st,tt=Et-(Et-n)*st,et=Pt-(Pt-o)*st}else{let st;jt>ht?st=1:lt===ht?st=0:st=(lt-jt)/(lt-ht),U=rt-(rt-V)*st,it=C-(C-i)*st,tt=n-(n-h)*st,et=o-(o-u)*st}let St;jt<Y?St=0:jt>ht?St=1:St=(Y-jt)/(Y-ht),ct=T-(T-V)*St,bt=mt-(mt-i)*St,dt=Et-(Et-h)*St,Ft=Pt-(Pt-u)*St;const Lt=Math.round(Math.min(U,ct)),gt=Math.round(Math.max(U,ct));let nt=$*jt+Lt*4;for(let st=Lt;st<=gt;st++)St=(U-st)/(U-ct),St<0?St=0:St>1&&(St=1),m[nt++]=it-(it-bt)*St|0,m[nt++]=tt-(tt-dt)*St|0,m[nt++]=et-(et-Ft)*St|0,m[nt++]=255}}function g(y,w,P){const v=w.coords,l=w.colors;let d,F;switch(w.type){case"lattice":const b=w.verticesPerRow,c=Math.floor(v.length/b)-1,k=b-1;for(d=0;d<c;d++){let m=d*b;for(let $=0;$<k;$++,m++)x(y,P,v[m],v[m+1],v[m+b],l[m],l[m+1],l[m+b]),x(y,P,v[m+b+1],v[m+1],v[m+b],l[m+b+1],l[m+1],l[m+b])}break;case"triangles":for(d=0,F=v.length;d<F;d+=3)x(y,P,v[d],v[d+1],v[d+2],l[d],l[d+1],l[d+2]);break;default:throw new Error("illegal figure")}}class I extends ut{constructor(w){super(),this._coords=w[2],this._colors=w[3],this._figures=w[4],this._bounds=w[5],this._bbox=w[7],this._background=w[8],this.matrix=null}_createMeshCanvas(w,P,v){const b=Math.floor(this._bounds[0]),c=Math.floor(this._bounds[1]),k=Math.ceil(this._bounds[2])-b,m=Math.ceil(this._bounds[3])-c,$=Math.min(Math.ceil(Math.abs(k*w[0]*1.1)),3e3),z=Math.min(Math.ceil(Math.abs(m*w[1]*1.1)),3e3),T=k/$,Y=m/z,rt={coords:this._coords,colors:this._colors,offsetX:-b,offsetY:-c,scaleX:1/T,scaleY:1/Y},lt=$+2*2,V=z+2*2,ht=v.getCanvas("mesh",lt,V,!1),mt=ht.context,Et=mt.createImageData($,z);if(P){const C=Et.data;for(let n=0,o=C.length;n<o;n+=4)C[n]=P[0],C[n+1]=P[1],C[n+2]=P[2],C[n+3]=255}for(const C of this._figures)g(Et,C,rt);return mt.putImageData(Et,2,2),{canvas:ht.canvas,offsetX:b-2*T,offsetY:c-2*Y,scaleX:T,scaleY:Y}}getPattern(w,P,v,l){H(w,this._bbox);let d;if(l===G.SHADING)d=a.Util.singularValueDecompose2dScale((0,p.getCurrentTransform)(w));else if(d=a.Util.singularValueDecompose2dScale(P.baseTransform),this.matrix){const b=a.Util.singularValueDecompose2dScale(this.matrix);d=[d[0]*b[0],d[1]*b[1]]}const F=this._createMeshCanvas(d,l===G.SHADING?null:this._background,P.cachedCanvases);return l!==G.SHADING&&(w.setTransform(...P.baseTransform),this.matrix&&w.transform(...this.matrix)),w.translate(F.offsetX,F.offsetY),w.scale(F.scaleX,F.scaleY),w.createPattern(F.canvas,"no-repeat")}}class N extends ut{getPattern(){return"hotpink"}}function R(y){switch(y[0]){case"RadialAxial":return new M(y);case"Mesh":return new I(y);case"Dummy":return new N}throw new Error(`Unknown IR type: ${y[0]}`)}const E={COLORED:1,UNCOLORED:2},f=class f{constructor(w,P,v,l,d){this.operatorList=w[2],this.matrix=w[3]||[1,0,0,1,0,0],this.bbox=w[4],this.xstep=w[5],this.ystep=w[6],this.paintType=w[7],this.tilingType=w[8],this.color=P,this.ctx=v,this.canvasGraphicsFactory=l,this.baseTransform=d}createPatternCanvas(w){const P=this.operatorList,v=this.bbox,l=this.xstep,d=this.ystep,F=this.paintType,b=this.tilingType,c=this.color,k=this.canvasGraphicsFactory;(0,a.info)("TilingType: "+b);const m=v[0],$=v[1],z=v[2],T=v[3],Y=a.Util.singularValueDecompose2dScale(this.matrix),rt=a.Util.singularValueDecompose2dScale(this.baseTransform),lt=[Y[0]*rt[0],Y[1]*rt[1]],V=this.getSizeAndScale(l,this.ctx.canvas.width,lt[0]),ht=this.getSizeAndScale(d,this.ctx.canvas.height,lt[1]),mt=w.cachedCanvases.getCanvas("pattern",V.size,ht.size,!0),Et=mt.context,Pt=k.createCanvasGraphics(Et);Pt.groupLevel=w.groupLevel,this.setFillAndStrokeStyleToContext(Pt,F,c);let C=m,n=$,o=z,i=T;return m<0&&(C=0,o+=Math.abs(m)),$<0&&(n=0,i+=Math.abs($)),Et.translate(-(V.scale*C),-(ht.scale*n)),Pt.transform(V.scale,0,0,ht.scale,0,0),Et.save(),this.clipBbox(Pt,C,n,o,i),Pt.baseTransform=(0,p.getCurrentTransform)(Pt.ctx),Pt.executeOperatorList(P),Pt.endDrawing(),{canvas:mt.canvas,scaleX:V.scale,scaleY:ht.scale,offsetX:C,offsetY:n}}getSizeAndScale(w,P,v){w=Math.abs(w);const l=Math.max(f.MAX_PATTERN_SIZE,P);let d=Math.ceil(w*v);return d>=l?d=l:v=d/w,{scale:v,size:d}}clipBbox(w,P,v,l,d){const F=l-P,b=d-v;w.ctx.rect(P,v,F,b),w.current.updateRectMinMax((0,p.getCurrentTransform)(w.ctx),[P,v,l,d]),w.clip(),w.endPath()}setFillAndStrokeStyleToContext(w,P,v){const l=w.ctx,d=w.current;switch(P){case E.COLORED:const F=this.ctx;l.fillStyle=F.fillStyle,l.strokeStyle=F.strokeStyle,d.fillColor=F.fillStyle,d.strokeColor=F.strokeStyle;break;case E.UNCOLORED:const b=a.Util.makeHexColor(v[0],v[1],v[2]);l.fillStyle=b,l.strokeStyle=b,d.fillColor=b,d.strokeColor=b;break;default:throw new a.FormatError(`Unsupported paint type: ${P}`)}}getPattern(w,P,v,l){let d=v;l!==G.SHADING&&(d=a.Util.transform(d,P.baseTransform),this.matrix&&(d=a.Util.transform(d,this.matrix)));const F=this.createPatternCanvas(P);let b=new DOMMatrix(d);b=b.translate(F.offsetX,F.offsetY),b=b.scale(1/F.scaleX,1/F.scaleY);const c=w.createPattern(F.canvas,"repeat");return c.setTransform(b),c}};ne(f,"MAX_PATTERN_SIZE",3e3);let A=f;s.TilingPattern=A},(D,s,O)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.convertBlackAndWhiteToRGBA=G,s.convertToRGBA=p,s.grayToRGBA=ut;var a=O(1);function p(M){switch(M.kind){case a.ImageKind.GRAYSCALE_1BPP:return G(M);case a.ImageKind.RGB_24BPP:return H(M)}return null}function G({src:M,srcPos:x=0,dest:g,width:I,height:N,nonBlackColor:R=4294967295,inverseDecode:E=!1}){const A=a.FeatureTest.isLittleEndian?4278190080:255,[f,y]=E?[R,A]:[A,R],w=I>>3,P=I&7,v=M.length;g=new Uint32Array(g.buffer);let l=0;for(let d=0;d<N;d++){for(const b=x+w;x<b;x++){const c=x<v?M[x]:255;g[l++]=c&128?y:f,g[l++]=c&64?y:f,g[l++]=c&32?y:f,g[l++]=c&16?y:f,g[l++]=c&8?y:f,g[l++]=c&4?y:f,g[l++]=c&2?y:f,g[l++]=c&1?y:f}if(P===0)continue;const F=x<v?M[x++]:255;for(let b=0;b<P;b++)g[l++]=F&1<<7-b?y:f}return{srcPos:x,destPos:l}}function H({src:M,srcPos:x=0,dest:g,destPos:I=0,width:N,height:R}){let E=0;const A=M.length>>2,f=new Uint32Array(M.buffer,x,A);if(a.FeatureTest.isLittleEndian){for(;E<A-2;E+=3,I+=4){const y=f[E],w=f[E+1],P=f[E+2];g[I]=y|4278190080,g[I+1]=y>>>24|w<<8|4278190080,g[I+2]=w>>>16|P<<16|4278190080,g[I+3]=P>>>8|4278190080}for(let y=E*4,w=M.length;y<w;y+=3)g[I++]=M[y]|M[y+1]<<8|M[y+2]<<16|4278190080}else{for(;E<A-2;E+=3,I+=4){const y=f[E],w=f[E+1],P=f[E+2];g[I]=y|255,g[I+1]=y<<24|w>>>8|255,g[I+2]=w<<16|P>>>16|255,g[I+3]=P<<8|255}for(let y=E*4,w=M.length;y<w;y+=3)g[I++]=M[y]<<24|M[y+1]<<16|M[y+2]<<8|255}return{srcPos:x,destPos:I}}function ut(M,x){if(a.FeatureTest.isLittleEndian)for(let g=0,I=M.length;g<I;g++)x[g]=M[g]*65793|4278190080;else for(let g=0,I=M.length;g<I;g++)x[g]=M[g]*16843008|255}},(D,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.GlobalWorkerOptions=void 0;const O=Object.create(null);s.GlobalWorkerOptions=O,O.workerPort=null,O.workerSrc=""},(D,s,O)=>{var M,kn,g,Fn,N,Re;Object.defineProperty(s,"__esModule",{value:!0}),s.MessageHandler=void 0;var a=O(1);const p={UNKNOWN:0,DATA:1,ERROR:2},G={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function H(E){switch(E instanceof Error||typeof E=="object"&&E!==null||(0,a.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),E.name){case"AbortException":return new a.AbortException(E.message);case"MissingPDFException":return new a.MissingPDFException(E.message);case"PasswordException":return new a.PasswordException(E.message,E.code);case"UnexpectedResponseException":return new a.UnexpectedResponseException(E.message,E.status);case"UnknownErrorException":return new a.UnknownErrorException(E.message,E.details);default:return new a.UnknownErrorException(E.message,E.toString())}}class ut{constructor(A,f,y){W(this,M);W(this,g);W(this,N);this.sourceName=A,this.targetName=f,this.comObj=y,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=w=>{const P=w.data;if(P.targetName!==this.sourceName)return;if(P.stream){q(this,g,Fn).call(this,P);return}if(P.callback){const l=P.callbackId,d=this.callbackCapabilities[l];if(!d)throw new Error(`Cannot resolve callback ${l}`);if(delete this.callbackCapabilities[l],P.callback===p.DATA)d.resolve(P.data);else if(P.callback===p.ERROR)d.reject(H(P.reason));else throw new Error("Unexpected callback case");return}const v=this.actionHandler[P.action];if(!v)throw new Error(`Unknown action from worker: ${P.action}`);if(P.callbackId){const l=this.sourceName,d=P.sourceName;new Promise(function(F){F(v(P.data))}).then(function(F){y.postMessage({sourceName:l,targetName:d,callback:p.DATA,callbackId:P.callbackId,data:F})},function(F){y.postMessage({sourceName:l,targetName:d,callback:p.ERROR,callbackId:P.callbackId,reason:H(F)})});return}if(P.streamId){q(this,M,kn).call(this,P);return}v(P.data)},y.addEventListener("message",this._onComObjOnMessage)}on(A,f){const y=this.actionHandler;if(y[A])throw new Error(`There is already an actionName called "${A}"`);y[A]=f}send(A,f,y){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:A,data:f},y)}sendWithPromise(A,f,y){const w=this.callbackId++,P=new a.PromiseCapability;this.callbackCapabilities[w]=P;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:A,callbackId:w,data:f},y)}catch(v){P.reject(v)}return P.promise}sendWithStream(A,f,y,w){const P=this.streamId++,v=this.sourceName,l=this.targetName,d=this.comObj;return new ReadableStream({start:F=>{const b=new a.PromiseCapability;return this.streamControllers[P]={controller:F,startCall:b,pullCall:null,cancelCall:null,isClosed:!1},d.postMessage({sourceName:v,targetName:l,action:A,streamId:P,data:f,desiredSize:F.desiredSize},w),b.promise},pull:F=>{const b=new a.PromiseCapability;return this.streamControllers[P].pullCall=b,d.postMessage({sourceName:v,targetName:l,stream:G.PULL,streamId:P,desiredSize:F.desiredSize}),b.promise},cancel:F=>{(0,a.assert)(F instanceof Error,"cancel must have a valid reason");const b=new a.PromiseCapability;return this.streamControllers[P].cancelCall=b,this.streamControllers[P].isClosed=!0,d.postMessage({sourceName:v,targetName:l,stream:G.CANCEL,streamId:P,reason:H(F)}),b.promise}},y)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}M=new WeakSet,kn=function(A){const f=A.streamId,y=this.sourceName,w=A.sourceName,P=this.comObj,v=this,l=this.actionHandler[A.action],d={enqueue(F,b=1,c){if(this.isCancelled)return;const k=this.desiredSize;this.desiredSize-=b,k>0&&this.desiredSize<=0&&(this.sinkCapability=new a.PromiseCapability,this.ready=this.sinkCapability.promise),P.postMessage({sourceName:y,targetName:w,stream:G.ENQUEUE,streamId:f,chunk:F},c)},close(){this.isCancelled||(this.isCancelled=!0,P.postMessage({sourceName:y,targetName:w,stream:G.CLOSE,streamId:f}),delete v.streamSinks[f])},error(F){(0,a.assert)(F instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,P.postMessage({sourceName:y,targetName:w,stream:G.ERROR,streamId:f,reason:H(F)}))},sinkCapability:new a.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:A.desiredSize,ready:null};d.sinkCapability.resolve(),d.ready=d.sinkCapability.promise,this.streamSinks[f]=d,new Promise(function(F){F(l(A.data,d))}).then(function(){P.postMessage({sourceName:y,targetName:w,stream:G.START_COMPLETE,streamId:f,success:!0})},function(F){P.postMessage({sourceName:y,targetName:w,stream:G.START_COMPLETE,streamId:f,reason:H(F)})})},g=new WeakSet,Fn=function(A){const f=A.streamId,y=this.sourceName,w=A.sourceName,P=this.comObj,v=this.streamControllers[f],l=this.streamSinks[f];switch(A.stream){case G.START_COMPLETE:A.success?v.startCall.resolve():v.startCall.reject(H(A.reason));break;case G.PULL_COMPLETE:A.success?v.pullCall.resolve():v.pullCall.reject(H(A.reason));break;case G.PULL:if(!l){P.postMessage({sourceName:y,targetName:w,stream:G.PULL_COMPLETE,streamId:f,success:!0});break}l.desiredSize<=0&&A.desiredSize>0&&l.sinkCapability.resolve(),l.desiredSize=A.desiredSize,new Promise(function(d){var F;d((F=l.onPull)==null?void 0:F.call(l))}).then(function(){P.postMessage({sourceName:y,targetName:w,stream:G.PULL_COMPLETE,streamId:f,success:!0})},function(d){P.postMessage({sourceName:y,targetName:w,stream:G.PULL_COMPLETE,streamId:f,reason:H(d)})});break;case G.ENQUEUE:if((0,a.assert)(v,"enqueue should have stream controller"),v.isClosed)break;v.controller.enqueue(A.chunk);break;case G.CLOSE:if((0,a.assert)(v,"close should have stream controller"),v.isClosed)break;v.isClosed=!0,v.controller.close(),q(this,N,Re).call(this,v,f);break;case G.ERROR:(0,a.assert)(v,"error should have stream controller"),v.controller.error(H(A.reason)),q(this,N,Re).call(this,v,f);break;case G.CANCEL_COMPLETE:A.success?v.cancelCall.resolve():v.cancelCall.reject(H(A.reason)),q(this,N,Re).call(this,v,f);break;case G.CANCEL:if(!l)break;new Promise(function(d){var F;d((F=l.onCancel)==null?void 0:F.call(l,H(A.reason)))}).then(function(){P.postMessage({sourceName:y,targetName:w,stream:G.CANCEL_COMPLETE,streamId:f,success:!0})},function(d){P.postMessage({sourceName:y,targetName:w,stream:G.CANCEL_COMPLETE,streamId:f,reason:H(d)})}),l.sinkCapability.reject(H(A.reason)),l.isCancelled=!0,delete this.streamSinks[f];break;default:throw new Error("Unexpected stream case")}},N=new WeakSet,Re=async function(A,f){var y,w,P;await Promise.allSettled([(y=A.startCall)==null?void 0:y.promise,(w=A.pullCall)==null?void 0:w.promise,(P=A.cancelCall)==null?void 0:P.promise]),delete this.streamControllers[f]},s.MessageHandler=ut},(D,s,O)=>{var G,H;Object.defineProperty(s,"__esModule",{value:!0}),s.Metadata=void 0;var a=O(1);class p{constructor({parsedData:M,rawData:x}){W(this,G,void 0);W(this,H,void 0);at(this,G,M),at(this,H,x)}getRaw(){return t(this,H)}get(M){return t(this,G).get(M)??null}getAll(){return(0,a.objectFromMap)(t(this,G))}has(M){return t(this,G).has(M)}}G=new WeakMap,H=new WeakMap,s.Metadata=p},(D,s,O)=>{var M,x,g,I,N,R,en;Object.defineProperty(s,"__esModule",{value:!0}),s.OptionalContentConfig=void 0;var a=O(1),p=O(8);const G=Symbol("INTERNAL");class H{constructor(f,y){W(this,M,!0);this.name=f,this.intent=y}get visible(){return t(this,M)}_setVisible(f,y){f!==G&&(0,a.unreachable)("Internal method `_setVisible` called."),at(this,M,y)}}M=new WeakMap;class ut{constructor(f){W(this,R);W(this,x,null);W(this,g,new Map);W(this,I,null);W(this,N,null);if(this.name=null,this.creator=null,f!==null){this.name=f.name,this.creator=f.creator,at(this,N,f.order);for(const y of f.groups)t(this,g).set(y.id,new H(y.name,y.intent));if(f.baseState==="OFF")for(const y of t(this,g).values())y._setVisible(G,!1);for(const y of f.on)t(this,g).get(y)._setVisible(G,!0);for(const y of f.off)t(this,g).get(y)._setVisible(G,!1);at(this,I,this.getHash())}}isVisible(f){if(t(this,g).size===0)return!0;if(!f)return(0,a.warn)("Optional content group not defined."),!0;if(f.type==="OCG")return t(this,g).has(f.id)?t(this,g).get(f.id).visible:((0,a.warn)(`Optional content group not found: ${f.id}`),!0);if(f.type==="OCMD"){if(f.expression)return q(this,R,en).call(this,f.expression);if(!f.policy||f.policy==="AnyOn"){for(const y of f.ids){if(!t(this,g).has(y))return(0,a.warn)(`Optional content group not found: ${y}`),!0;if(t(this,g).get(y).visible)return!0}return!1}else if(f.policy==="AllOn"){for(const y of f.ids){if(!t(this,g).has(y))return(0,a.warn)(`Optional content group not found: ${y}`),!0;if(!t(this,g).get(y).visible)return!1}return!0}else if(f.policy==="AnyOff"){for(const y of f.ids){if(!t(this,g).has(y))return(0,a.warn)(`Optional content group not found: ${y}`),!0;if(!t(this,g).get(y).visible)return!0}return!1}else if(f.policy==="AllOff"){for(const y of f.ids){if(!t(this,g).has(y))return(0,a.warn)(`Optional content group not found: ${y}`),!0;if(t(this,g).get(y).visible)return!1}return!0}return(0,a.warn)(`Unknown optional content policy ${f.policy}.`),!0}return(0,a.warn)(`Unknown group type ${f.type}.`),!0}setVisibility(f,y=!0){if(!t(this,g).has(f)){(0,a.warn)(`Optional content group not found: ${f}`);return}t(this,g).get(f)._setVisible(G,!!y),at(this,x,null)}get hasInitialVisibility(){return t(this,I)===null||this.getHash()===t(this,I)}getOrder(){return t(this,g).size?t(this,N)?t(this,N).slice():[...t(this,g).keys()]:null}getGroups(){return t(this,g).size>0?(0,a.objectFromMap)(t(this,g)):null}getGroup(f){return t(this,g).get(f)||null}getHash(){if(t(this,x)!==null)return t(this,x);const f=new p.MurmurHash3_64;for(const[y,w]of t(this,g))f.update(`${y}:${w.visible}`);return at(this,x,f.hexdigest())}}x=new WeakMap,g=new WeakMap,I=new WeakMap,N=new WeakMap,R=new WeakSet,en=function(f){const y=f.length;if(y<2)return!0;const w=f[0];for(let P=1;P<y;P++){const v=f[P];let l;if(Array.isArray(v))l=q(this,R,en).call(this,v);else if(t(this,g).has(v))l=t(this,g).get(v).visible;else return(0,a.warn)(`Optional content group not found: ${v}`),!0;switch(w){case"And":if(!l)return!1;break;case"Or":if(l)return!0;break;case"Not":return!l;default:return!0}}return w==="And"},s.OptionalContentConfig=ut},(D,s,O)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PDFDataTransportStream=void 0;var a=O(1),p=O(6);class G{constructor({length:x,initialData:g,progressiveDone:I=!1,contentDispositionFilename:N=null,disableRange:R=!1,disableStream:E=!1},A){if((0,a.assert)(A,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=I,this._contentDispositionFilename=N,(g==null?void 0:g.length)>0){const f=g instanceof Uint8Array&&g.byteLength===g.buffer.byteLength?g.buffer:new Uint8Array(g).buffer;this._queuedChunks.push(f)}this._pdfDataRangeTransport=A,this._isStreamingSupported=!E,this._isRangeSupported=!R,this._contentLength=x,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((f,y)=>{this._onReceiveData({begin:f,chunk:y})}),this._pdfDataRangeTransport.addProgressListener((f,y)=>{this._onProgress({loaded:f,total:y})}),this._pdfDataRangeTransport.addProgressiveReadListener(f=>{this._onReceiveData({chunk:f})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:x,chunk:g}){const I=g instanceof Uint8Array&&g.byteLength===g.buffer.byteLength?g.buffer:new Uint8Array(g).buffer;if(x===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(I):this._queuedChunks.push(I);else{const N=this._rangeReaders.some(function(R){return R._begin!==x?!1:(R._enqueue(I),!0)});(0,a.assert)(N,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var x;return((x=this._fullRequestReader)==null?void 0:x._loaded)??0}_onProgress(x){var g,I,N,R;x.total===void 0?(I=(g=this._rangeReaders[0])==null?void 0:g.onProgress)==null||I.call(g,{loaded:x.loaded}):(R=(N=this._fullRequestReader)==null?void 0:N.onProgress)==null||R.call(N,{loaded:x.loaded,total:x.total})}_onProgressiveDone(){var x;(x=this._fullRequestReader)==null||x.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(x){const g=this._rangeReaders.indexOf(x);g>=0&&this._rangeReaders.splice(g,1)}getFullReader(){(0,a.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const x=this._queuedChunks;return this._queuedChunks=null,new H(this,x,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(x,g){if(g<=this._progressiveDataLength)return null;const I=new ut(this,x,g);return this._pdfDataRangeTransport.requestDataRange(x,g),this._rangeReaders.push(I),I}cancelAllRequests(x){var g;(g=this._fullRequestReader)==null||g.cancel(x);for(const I of this._rangeReaders.slice(0))I.cancel(x);this._pdfDataRangeTransport.abort()}}s.PDFDataTransportStream=G;class H{constructor(x,g,I=!1,N=null){this._stream=x,this._done=I||!1,this._filename=(0,p.isPdfFile)(N)?N:null,this._queuedChunks=g||[],this._loaded=0;for(const R of this._queuedChunks)this._loaded+=R.byteLength;this._requests=[],this._headersReady=Promise.resolve(),x._fullRequestReader=this,this.onProgress=null}_enqueue(x){this._done||(this._requests.length>0?this._requests.shift().resolve({value:x,done:!1}):this._queuedChunks.push(x),this._loaded+=x.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const x=new a.PromiseCapability;return this._requests.push(x),x.promise}cancel(x){this._done=!0;for(const g of this._requests)g.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class ut{constructor(x,g,I){this._stream=x,this._begin=g,this._end=I,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(x){if(!this._done){if(this._requests.length===0)this._queuedChunk=x;else{this._requests.shift().resolve({value:x,done:!1});for(const I of this._requests)I.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const g=this._queuedChunk;return this._queuedChunk=null,{value:g,done:!1}}if(this._done)return{value:void 0,done:!0};const x=new a.PromiseCapability;return this._requests.push(x),x.promise}cancel(x){this._done=!0;for(const g of this._requests)g.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(D,s,O)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PDFFetchStream=void 0;var a=O(1),p=O(20);function G(I,N,R){return{method:"GET",headers:I,signal:R.signal,mode:"cors",credentials:N?"include":"same-origin",redirect:"follow"}}function H(I){const N=new Headers;for(const R in I){const E=I[R];E!==void 0&&N.append(R,E)}return N}function ut(I){return I instanceof Uint8Array?I.buffer:I instanceof ArrayBuffer?I:((0,a.warn)(`getArrayBuffer - unexpected data format: ${I}`),new Uint8Array(I).buffer)}class M{constructor(N){this.source=N,this.isHttp=/^https?:/i.test(N.url),this.httpHeaders=this.isHttp&&N.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var N;return((N=this._fullRequestReader)==null?void 0:N._loaded)??0}getFullReader(){return(0,a.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new x(this),this._fullRequestReader}getRangeReader(N,R){if(R<=this._progressiveDataLength)return null;const E=new g(this,N,R);return this._rangeRequestReaders.push(E),E}cancelAllRequests(N){var R;(R=this._fullRequestReader)==null||R.cancel(N);for(const E of this._rangeRequestReaders.slice(0))E.cancel(N)}}s.PDFFetchStream=M;class x{constructor(N){this._stream=N,this._reader=null,this._loaded=0,this._filename=null;const R=N.source;this._withCredentials=R.withCredentials||!1,this._contentLength=R.length,this._headersCapability=new a.PromiseCapability,this._disableRange=R.disableRange||!1,this._rangeChunkSize=R.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!R.disableStream,this._isRangeSupported=!R.disableRange,this._headers=H(this._stream.httpHeaders);const E=R.url;fetch(E,G(this._headers,this._withCredentials,this._abortController)).then(A=>{if(!(0,p.validateResponseStatus)(A.status))throw(0,p.createResponseStatusError)(A.status,E);this._reader=A.body.getReader(),this._headersCapability.resolve();const f=P=>A.headers.get(P),{allowRangeRequests:y,suggestedLength:w}=(0,p.validateRangeRequestCapabilities)({getResponseHeader:f,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=y,this._contentLength=w||this._contentLength,this._filename=(0,p.extractFilenameFromHeader)(f),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new a.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var E;await this._headersCapability.promise;const{value:N,done:R}=await this._reader.read();return R?{value:N,done:R}:(this._loaded+=N.byteLength,(E=this.onProgress)==null||E.call(this,{loaded:this._loaded,total:this._contentLength}),{value:ut(N),done:!1})}cancel(N){var R;(R=this._reader)==null||R.cancel(N),this._abortController.abort()}}class g{constructor(N,R,E){this._stream=N,this._reader=null,this._loaded=0;const A=N.source;this._withCredentials=A.withCredentials||!1,this._readCapability=new a.PromiseCapability,this._isStreamingSupported=!A.disableStream,this._abortController=new AbortController,this._headers=H(this._stream.httpHeaders),this._headers.append("Range",`bytes=${R}-${E-1}`);const f=A.url;fetch(f,G(this._headers,this._withCredentials,this._abortController)).then(y=>{if(!(0,p.validateResponseStatus)(y.status))throw(0,p.createResponseStatusError)(y.status,f);this._readCapability.resolve(),this._reader=y.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var E;await this._readCapability.promise;const{value:N,done:R}=await this._reader.read();return R?{value:N,done:R}:(this._loaded+=N.byteLength,(E=this.onProgress)==null||E.call(this,{loaded:this._loaded}),{value:ut(N),done:!1})}cancel(N){var R;(R=this._reader)==null||R.cancel(N),this._abortController.abort()}}},(D,s,O)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.createResponseStatusError=M,s.extractFilenameFromHeader=ut,s.validateRangeRequestCapabilities=H,s.validateResponseStatus=x;var a=O(1),p=O(21),G=O(6);function H({getResponseHeader:g,isHttp:I,rangeChunkSize:N,disableRange:R}){const E={allowRangeRequests:!1,suggestedLength:void 0},A=parseInt(g("Content-Length"),10);return!Number.isInteger(A)||(E.suggestedLength=A,A<=2*N)||R||!I||g("Accept-Ranges")!=="bytes"||(g("Content-Encoding")||"identity")!=="identity"||(E.allowRangeRequests=!0),E}function ut(g){const I=g("Content-Disposition");if(I){let N=(0,p.getFilenameFromContentDispositionHeader)(I);if(N.includes("%"))try{N=decodeURIComponent(N)}catch{}if((0,G.isPdfFile)(N))return N}return null}function M(g,I){return g===404||g===0&&I.startsWith("file:")?new a.MissingPDFException('Missing PDF "'+I+'".'):new a.UnexpectedResponseException(`Unexpected server response (${g}) while retrieving PDF "${I}".`,g)}function x(g){return g===200||g===206}},(D,s,O)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.getFilenameFromContentDispositionHeader=p;var a=O(1);function p(G){let H=!0,ut=M("filename\\*","i").exec(G);if(ut){ut=ut[1];let A=N(ut);return A=unescape(A),A=R(A),A=E(A),g(A)}if(ut=I(G),ut){const A=E(ut);return g(A)}if(ut=M("filename","i").exec(G),ut){ut=ut[1];let A=N(ut);return A=E(A),g(A)}function M(A,f){return new RegExp("(?:^|;)\\s*"+A+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',f)}function x(A,f){if(A){if(!/^[\x00-\xFF]+$/.test(f))return f;try{const y=new TextDecoder(A,{fatal:!0}),w=(0,a.stringToBytes)(f);f=y.decode(w),H=!1}catch{}}return f}function g(A){return H&&/[\x80-\xff]/.test(A)&&(A=x("utf-8",A),H&&(A=x("iso-8859-1",A))),A}function I(A){const f=[];let y;const w=M("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(y=w.exec(A))!==null;){let[,v,l,d]=y;if(v=parseInt(v,10),v in f){if(v===0)break;continue}f[v]=[l,d]}const P=[];for(let v=0;v<f.length&&v in f;++v){let[l,d]=f[v];d=N(d),l&&(d=unescape(d),v===0&&(d=R(d))),P.push(d)}return P.join("")}function N(A){if(A.startsWith('"')){const f=A.slice(1).split('\\"');for(let y=0;y<f.length;++y){const w=f[y].indexOf('"');w!==-1&&(f[y]=f[y].slice(0,w),f.length=y+1),f[y]=f[y].replaceAll(/\\(.)/g,"$1")}A=f.join('"')}return A}function R(A){const f=A.indexOf("'");if(f===-1)return A;const y=A.slice(0,f),P=A.slice(f+1).replace(/^[^']*'/,"");return x(y,P)}function E(A){return!A.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(A)?A:A.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(f,y,w,P){if(w==="q"||w==="Q")return P=P.replaceAll("_"," "),P=P.replaceAll(/=([0-9a-fA-F]{2})/g,function(v,l){return String.fromCharCode(parseInt(l,16))}),x(y,P);try{P=atob(P)}catch{}return x(y,P)})}return""}},(D,s,O)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PDFNetworkStream=void 0;var a=O(1),p=O(20);const G=200,H=206;function ut(N){const R=N.response;return typeof R!="string"?R:(0,a.stringToBytes)(R).buffer}class M{constructor(R,E={}){this.url=R,this.isHttp=/^https?:/i.test(R),this.httpHeaders=this.isHttp&&E.httpHeaders||Object.create(null),this.withCredentials=E.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(R,E,A){const f={begin:R,end:E};for(const y in A)f[y]=A[y];return this.request(f)}requestFull(R){return this.request(R)}request(R){const E=new XMLHttpRequest,A=this.currXhrId++,f=this.pendingRequests[A]={xhr:E};E.open("GET",this.url),E.withCredentials=this.withCredentials;for(const y in this.httpHeaders){const w=this.httpHeaders[y];w!==void 0&&E.setRequestHeader(y,w)}return this.isHttp&&"begin"in R&&"end"in R?(E.setRequestHeader("Range",`bytes=${R.begin}-${R.end-1}`),f.expectedStatus=H):f.expectedStatus=G,E.responseType="arraybuffer",R.onError&&(E.onerror=function(y){R.onError(E.status)}),E.onreadystatechange=this.onStateChange.bind(this,A),E.onprogress=this.onProgress.bind(this,A),f.onHeadersReceived=R.onHeadersReceived,f.onDone=R.onDone,f.onError=R.onError,f.onProgress=R.onProgress,E.send(null),A}onProgress(R,E){var f;const A=this.pendingRequests[R];A&&((f=A.onProgress)==null||f.call(A,E))}onStateChange(R,E){var v,l,d;const A=this.pendingRequests[R];if(!A)return;const f=A.xhr;if(f.readyState>=2&&A.onHeadersReceived&&(A.onHeadersReceived(),delete A.onHeadersReceived),f.readyState!==4||!(R in this.pendingRequests))return;if(delete this.pendingRequests[R],f.status===0&&this.isHttp){(v=A.onError)==null||v.call(A,f.status);return}const y=f.status||G;if(!(y===G&&A.expectedStatus===H)&&y!==A.expectedStatus){(l=A.onError)==null||l.call(A,f.status);return}const P=ut(f);if(y===H){const F=f.getResponseHeader("Content-Range"),b=/bytes (\d+)-(\d+)\/(\d+)/.exec(F);A.onDone({begin:parseInt(b[1],10),chunk:P})}else P?A.onDone({begin:0,chunk:P}):(d=A.onError)==null||d.call(A,f.status)}getRequestXhr(R){return this.pendingRequests[R].xhr}isPendingRequest(R){return R in this.pendingRequests}abortRequest(R){const E=this.pendingRequests[R].xhr;delete this.pendingRequests[R],E.abort()}}class x{constructor(R){this._source=R,this._manager=new M(R.url,{httpHeaders:R.httpHeaders,withCredentials:R.withCredentials}),this._rangeChunkSize=R.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(R){const E=this._rangeRequestReaders.indexOf(R);E>=0&&this._rangeRequestReaders.splice(E,1)}getFullReader(){return(0,a.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new g(this._manager,this._source),this._fullRequestReader}getRangeReader(R,E){const A=new I(this._manager,R,E);return A.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(A),A}cancelAllRequests(R){var E;(E=this._fullRequestReader)==null||E.cancel(R);for(const A of this._rangeRequestReaders.slice(0))A.cancel(R)}}s.PDFNetworkStream=x;class g{constructor(R,E){this._manager=R;const A={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=E.url,this._fullRequestId=R.requestFull(A),this._headersReceivedCapability=new a.PromiseCapability,this._disableRange=E.disableRange||!1,this._contentLength=E.length,this._rangeChunkSize=E.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const R=this._fullRequestId,E=this._manager.getRequestXhr(R),A=w=>E.getResponseHeader(w),{allowRangeRequests:f,suggestedLength:y}=(0,p.validateRangeRequestCapabilities)({getResponseHeader:A,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});f&&(this._isRangeSupported=!0),this._contentLength=y||this._contentLength,this._filename=(0,p.extractFilenameFromHeader)(A),this._isRangeSupported&&this._manager.abortRequest(R),this._headersReceivedCapability.resolve()}_onDone(R){if(R&&(this._requests.length>0?this._requests.shift().resolve({value:R.chunk,done:!1}):this._cachedChunks.push(R.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const E of this._requests)E.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(R){this._storedError=(0,p.createResponseStatusError)(R,this._url),this._headersReceivedCapability.reject(this._storedError);for(const E of this._requests)E.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(R){var E;(E=this.onProgress)==null||E.call(this,{loaded:R.loaded,total:R.lengthComputable?R.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const R=new a.PromiseCapability;return this._requests.push(R),R.promise}cancel(R){this._done=!0,this._headersReceivedCapability.reject(R);for(const E of this._requests)E.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class I{constructor(R,E,A){this._manager=R;const f={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=R.url,this._requestId=R.requestRange(E,A,f),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var R;(R=this.onClosed)==null||R.call(this,this)}_onDone(R){const E=R.chunk;this._requests.length>0?this._requests.shift().resolve({value:E,done:!1}):this._queuedChunk=E,this._done=!0;for(const A of this._requests)A.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(R){this._storedError=(0,p.createResponseStatusError)(R,this._url);for(const E of this._requests)E.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(R){var E;this.isStreamingSupported||(E=this.onProgress)==null||E.call(this,{loaded:R.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const E=this._queuedChunk;return this._queuedChunk=null,{value:E,done:!1}}if(this._done)return{value:void 0,done:!0};const R=new a.PromiseCapability;return this._requests.push(R),R.promise}cancel(R){this._done=!0;for(const E of this._requests)E.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(D,s,O)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PDFNodeStream=void 0;var a=O(1),p=O(20);const G=/^file:\/\/\/[a-zA-Z]:\//;function H(A){const f=require$$5,y=f.parse(A);return y.protocol==="file:"||y.host?y:/^[a-z]:[/\\]/i.test(A)?f.parse(`file:///${A}`):(y.host||(y.protocol="file:"),y)}class ut{constructor(f){this.source=f,this.url=H(f.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&f.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var f;return((f=this._fullRequestReader)==null?void 0:f._loaded)??0}getFullReader(){return(0,a.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new R(this):new I(this),this._fullRequestReader}getRangeReader(f,y){if(y<=this._progressiveDataLength)return null;const w=this.isFsUrl?new E(this,f,y):new N(this,f,y);return this._rangeRequestReaders.push(w),w}cancelAllRequests(f){var y;(y=this._fullRequestReader)==null||y.cancel(f);for(const w of this._rangeRequestReaders.slice(0))w.cancel(f)}}s.PDFNodeStream=ut;class M{constructor(f){this._url=f.url,this._done=!1,this._storedError=null,this.onProgress=null;const y=f.source;this._contentLength=y.length,this._loaded=0,this._filename=null,this._disableRange=y.disableRange||!1,this._rangeChunkSize=y.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!y.disableStream,this._isRangeSupported=!y.disableRange,this._readableStream=null,this._readCapability=new a.PromiseCapability,this._headersCapability=new a.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var w;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const f=this._readableStream.read();return f===null?(this._readCapability=new a.PromiseCapability,this.read()):(this._loaded+=f.length,(w=this.onProgress)==null||w.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(f).buffer,done:!1})}cancel(f){if(!this._readableStream){this._error(f);return}this._readableStream.destroy(f)}_error(f){this._storedError=f,this._readCapability.resolve()}_setReadableStream(f){this._readableStream=f,f.on("readable",()=>{this._readCapability.resolve()}),f.on("end",()=>{f.destroy(),this._done=!0,this._readCapability.resolve()}),f.on("error",y=>{this._error(y)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new a.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class x{constructor(f){this._url=f.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new a.PromiseCapability;const y=f.source;this._isStreamingSupported=!y.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var w;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const f=this._readableStream.read();return f===null?(this._readCapability=new a.PromiseCapability,this.read()):(this._loaded+=f.length,(w=this.onProgress)==null||w.call(this,{loaded:this._loaded}),{value:new Uint8Array(f).buffer,done:!1})}cancel(f){if(!this._readableStream){this._error(f);return}this._readableStream.destroy(f)}_error(f){this._storedError=f,this._readCapability.resolve()}_setReadableStream(f){this._readableStream=f,f.on("readable",()=>{this._readCapability.resolve()}),f.on("end",()=>{f.destroy(),this._done=!0,this._readCapability.resolve()}),f.on("error",y=>{this._error(y)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function g(A,f){return{protocol:A.protocol,auth:A.auth,host:A.hostname,port:A.port,path:A.path,method:"GET",headers:f}}class I extends M{constructor(f){super(f);const y=w=>{if(w.statusCode===404){const d=new a.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=d,this._headersCapability.reject(d);return}this._headersCapability.resolve(),this._setReadableStream(w);const P=d=>this._readableStream.headers[d.toLowerCase()],{allowRangeRequests:v,suggestedLength:l}=(0,p.validateRangeRequestCapabilities)({getResponseHeader:P,isHttp:f.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=v,this._contentLength=l||this._contentLength,this._filename=(0,p.extractFilenameFromHeader)(P)};if(this._request=null,this._url.protocol==="http:"){const w=require$$5;this._request=w.request(g(this._url,f.httpHeaders),y)}else{const w=require$$5;this._request=w.request(g(this._url,f.httpHeaders),y)}this._request.on("error",w=>{this._storedError=w,this._headersCapability.reject(w)}),this._request.end()}}class N extends x{constructor(f,y,w){super(f),this._httpHeaders={};for(const v in f.httpHeaders){const l=f.httpHeaders[v];l!==void 0&&(this._httpHeaders[v]=l)}this._httpHeaders.Range=`bytes=${y}-${w-1}`;const P=v=>{if(v.statusCode===404){const l=new a.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=l;return}this._setReadableStream(v)};if(this._request=null,this._url.protocol==="http:"){const v=require$$5;this._request=v.request(g(this._url,this._httpHeaders),P)}else{const v=require$$5;this._request=v.request(g(this._url,this._httpHeaders),P)}this._request.on("error",v=>{this._storedError=v}),this._request.end()}}class R extends M{constructor(f){super(f);let y=decodeURIComponent(this._url.path);G.test(this._url.href)&&(y=y.replace(/^\//,""));const w=require$$5;w.lstat(y,(P,v)=>{if(P){P.code==="ENOENT"&&(P=new a.MissingPDFException(`Missing PDF "${y}".`)),this._storedError=P,this._headersCapability.reject(P);return}this._contentLength=v.size,this._setReadableStream(w.createReadStream(y)),this._headersCapability.resolve()})}}class E extends x{constructor(f,y,w){super(f);let P=decodeURIComponent(this._url.path);G.test(this._url.href)&&(P=P.replace(/^\//,""));const v=require$$5;this._setReadableStream(v.createReadStream(P,{start:y,end:w-1}))}}},(D,s,O)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.SVGGraphics=void 0;var a=O(6),p=O(1);const G={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},H="http://www.w3.org/XML/1998/namespace",ut="http://www.w3.org/1999/xlink",M=["butt","round","square"],x=["miter","round","bevel"],g=function(v,l="",d=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!d)return URL.createObjectURL(new Blob([v],{type:l}));const F="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let b=`data:${l};base64,`;for(let c=0,k=v.length;c<k;c+=3){const m=v[c]&255,$=v[c+1]&255,z=v[c+2]&255,T=m>>2,Y=(m&3)<<4|$>>4,rt=c+1<k?($&15)<<2|z>>6:64,lt=c+2<k?z&63:64;b+=F[T]+F[Y]+F[rt]+F[lt]}return b},I=function(){const v=new Uint8Array([137,80,78,71,13,10,26,10]),l=12,d=new Int32Array(256);for(let z=0;z<256;z++){let T=z;for(let Y=0;Y<8;Y++)T=T&1?3988292384^T>>1&2147483647:T>>1&2147483647;d[z]=T}function F(z,T,Y){let rt=-1;for(let lt=T;lt<Y;lt++){const V=(rt^z[lt])&255,ht=d[V];rt=rt>>>8^ht}return rt^-1}function b(z,T,Y,rt){let lt=rt;const V=T.length;Y[lt]=V>>24&255,Y[lt+1]=V>>16&255,Y[lt+2]=V>>8&255,Y[lt+3]=V&255,lt+=4,Y[lt]=z.charCodeAt(0)&255,Y[lt+1]=z.charCodeAt(1)&255,Y[lt+2]=z.charCodeAt(2)&255,Y[lt+3]=z.charCodeAt(3)&255,lt+=4,Y.set(T,lt),lt+=T.length;const ht=F(Y,rt+4,lt);Y[lt]=ht>>24&255,Y[lt+1]=ht>>16&255,Y[lt+2]=ht>>8&255,Y[lt+3]=ht&255}function c(z,T,Y){let rt=1,lt=0;for(let V=T;V<Y;++V)rt=(rt+(z[V]&255))%65521,lt=(lt+rt)%65521;return lt<<16|rt}function k(z){if(!p.isNodeJS)return m(z);try{const T=parseInt(process.versions.node)>=8?z:Buffer.from(z),Y=require$$5.deflateSync(T,{level:9});return Y instanceof Uint8Array?Y:new Uint8Array(Y)}catch(T){(0,p.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+T)}return m(z)}function m(z){let T=z.length;const Y=65535,rt=Math.ceil(T/Y),lt=new Uint8Array(2+T+rt*5+4);let V=0;lt[V++]=120,lt[V++]=156;let ht=0;for(;T>Y;)lt[V++]=0,lt[V++]=255,lt[V++]=255,lt[V++]=0,lt[V++]=0,lt.set(z.subarray(ht,ht+Y),V),V+=Y,ht+=Y,T-=Y;lt[V++]=1,lt[V++]=T&255,lt[V++]=T>>8&255,lt[V++]=~T&65535&255,lt[V++]=(~T&65535)>>8&255,lt.set(z.subarray(ht),V),V+=z.length-ht;const mt=c(z,0,z.length);return lt[V++]=mt>>24&255,lt[V++]=mt>>16&255,lt[V++]=mt>>8&255,lt[V++]=mt&255,lt}function $(z,T,Y,rt){const lt=z.width,V=z.height;let ht,mt,Et;const Pt=z.data;switch(T){case p.ImageKind.GRAYSCALE_1BPP:mt=0,ht=1,Et=lt+7>>3;break;case p.ImageKind.RGB_24BPP:mt=2,ht=8,Et=lt*3;break;case p.ImageKind.RGBA_32BPP:mt=6,ht=8,Et=lt*4;break;default:throw new Error("invalid format")}const C=new Uint8Array((1+Et)*V);let n=0,o=0;for(let U=0;U<V;++U)C[n++]=0,C.set(Pt.subarray(o,o+Et),n),o+=Et,n+=Et;if(T===p.ImageKind.GRAYSCALE_1BPP&&rt){n=0;for(let U=0;U<V;U++){n++;for(let it=0;it<Et;it++)C[n++]^=255}}const i=new Uint8Array([lt>>24&255,lt>>16&255,lt>>8&255,lt&255,V>>24&255,V>>16&255,V>>8&255,V&255,ht,mt,0,0,0]),h=k(C),u=v.length+l*3+i.length+h.length,S=new Uint8Array(u);let L=0;return S.set(v,L),L+=v.length,b("IHDR",i,S,L),L+=l+i.length,b("IDATA",h,S,L),L+=l+h.length,b("IEND",new Uint8Array(0),S,L),g(S,"image/png",Y)}return function(T,Y,rt){const lt=T.kind===void 0?p.ImageKind.GRAYSCALE_1BPP:T.kind;return $(T,lt,Y,rt)}}();class N{constructor(){this.fontSizeScale=1,this.fontWeight=G.fontWeight,this.fontSize=0,this.textMatrix=p.IDENTITY_MATRIX,this.fontMatrix=p.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=p.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=G.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(l,d){this.x=l,this.y=d}}function R(v){let l=[];const d=[];for(const F of v){if(F.fn==="save"){l.push({fnId:92,fn:"group",items:[]}),d.push(l),l=l.at(-1).items;continue}F.fn==="restore"?l=d.pop():l.push(F)}return l}function E(v){if(Number.isInteger(v))return v.toString();const l=v.toFixed(10);let d=l.length-1;if(l[d]!=="0")return l;do d--;while(l[d]==="0");return l.substring(0,l[d]==="."?d:d+1)}function A(v){if(v[4]===0&&v[5]===0){if(v[1]===0&&v[2]===0)return v[0]===1&&v[3]===1?"":`scale(${E(v[0])} ${E(v[3])})`;if(v[0]===v[3]&&v[1]===-v[2]){const l=Math.acos(v[0])*180/Math.PI;return`rotate(${E(l)})`}}else if(v[0]===1&&v[1]===0&&v[2]===0&&v[3]===1)return`translate(${E(v[4])} ${E(v[5])})`;return`matrix(${E(v[0])} ${E(v[1])} ${E(v[2])} ${E(v[3])} ${E(v[4])} ${E(v[5])})`}let f=0,y=0,w=0;class P{constructor(l,d,F=!1){(0,a.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new a.DOMSVGFactory,this.current=new N,this.transformMatrix=p.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=l,this.objs=d,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!F,this._operatorIdMapping=[];for(const b in p.OPS)this._operatorIdMapping[p.OPS[b]]=b}getObject(l,d=null){return typeof l=="string"?l.startsWith("g_")?this.commonObjs.get(l):this.objs.get(l):d}save(){this.transformStack.push(this.transformMatrix);const l=this.current;this.extraStack.push(l),this.current=l.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(l){this.save(),this.executeOpTree(l),this.restore()}loadDependencies(l){const d=l.fnArray,F=l.argsArray;for(let b=0,c=d.length;b<c;b++)if(d[b]===p.OPS.dependency)for(const k of F[b]){const m=k.startsWith("g_")?this.commonObjs:this.objs,$=new Promise(z=>{m.get(k,z)});this.current.dependencies.push($)}return Promise.all(this.current.dependencies)}transform(l,d,F,b,c,k){const m=[l,d,F,b,c,k];this.transformMatrix=p.Util.transform(this.transformMatrix,m),this.tgrp=null}getSVG(l,d){this.viewport=d;const F=this._initialize(d);return this.loadDependencies(l).then(()=>(this.transformMatrix=p.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(l)),F))}convertOpList(l){const d=this._operatorIdMapping,F=l.argsArray,b=l.fnArray,c=[];for(let k=0,m=b.length;k<m;k++){const $=b[k];c.push({fnId:$,fn:d[$],args:F[k]})}return R(c)}executeOpTree(l){for(const d of l){const F=d.fn,b=d.fnId,c=d.args;switch(b|0){case p.OPS.beginText:this.beginText();break;case p.OPS.dependency:break;case p.OPS.setLeading:this.setLeading(c);break;case p.OPS.setLeadingMoveText:this.setLeadingMoveText(c[0],c[1]);break;case p.OPS.setFont:this.setFont(c);break;case p.OPS.showText:this.showText(c[0]);break;case p.OPS.showSpacedText:this.showText(c[0]);break;case p.OPS.endText:this.endText();break;case p.OPS.moveText:this.moveText(c[0],c[1]);break;case p.OPS.setCharSpacing:this.setCharSpacing(c[0]);break;case p.OPS.setWordSpacing:this.setWordSpacing(c[0]);break;case p.OPS.setHScale:this.setHScale(c[0]);break;case p.OPS.setTextMatrix:this.setTextMatrix(c[0],c[1],c[2],c[3],c[4],c[5]);break;case p.OPS.setTextRise:this.setTextRise(c[0]);break;case p.OPS.setTextRenderingMode:this.setTextRenderingMode(c[0]);break;case p.OPS.setLineWidth:this.setLineWidth(c[0]);break;case p.OPS.setLineJoin:this.setLineJoin(c[0]);break;case p.OPS.setLineCap:this.setLineCap(c[0]);break;case p.OPS.setMiterLimit:this.setMiterLimit(c[0]);break;case p.OPS.setFillRGBColor:this.setFillRGBColor(c[0],c[1],c[2]);break;case p.OPS.setStrokeRGBColor:this.setStrokeRGBColor(c[0],c[1],c[2]);break;case p.OPS.setStrokeColorN:this.setStrokeColorN(c);break;case p.OPS.setFillColorN:this.setFillColorN(c);break;case p.OPS.shadingFill:this.shadingFill(c[0]);break;case p.OPS.setDash:this.setDash(c[0],c[1]);break;case p.OPS.setRenderingIntent:this.setRenderingIntent(c[0]);break;case p.OPS.setFlatness:this.setFlatness(c[0]);break;case p.OPS.setGState:this.setGState(c[0]);break;case p.OPS.fill:this.fill();break;case p.OPS.eoFill:this.eoFill();break;case p.OPS.stroke:this.stroke();break;case p.OPS.fillStroke:this.fillStroke();break;case p.OPS.eoFillStroke:this.eoFillStroke();break;case p.OPS.clip:this.clip("nonzero");break;case p.OPS.eoClip:this.clip("evenodd");break;case p.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case p.OPS.paintImageXObject:this.paintImageXObject(c[0]);break;case p.OPS.paintInlineImageXObject:this.paintInlineImageXObject(c[0]);break;case p.OPS.paintImageMaskXObject:this.paintImageMaskXObject(c[0]);break;case p.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(c[0],c[1]);break;case p.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case p.OPS.closePath:this.closePath();break;case p.OPS.closeStroke:this.closeStroke();break;case p.OPS.closeFillStroke:this.closeFillStroke();break;case p.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case p.OPS.nextLine:this.nextLine();break;case p.OPS.transform:this.transform(c[0],c[1],c[2],c[3],c[4],c[5]);break;case p.OPS.constructPath:this.constructPath(c[0],c[1]);break;case p.OPS.endPath:this.endPath();break;case 92:this.group(d.items);break;default:(0,p.warn)(`Unimplemented operator ${F}`);break}}}setWordSpacing(l){this.current.wordSpacing=l}setCharSpacing(l){this.current.charSpacing=l}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(l,d,F,b,c,k){const m=this.current;m.textMatrix=m.lineMatrix=[l,d,F,b,c,k],m.textMatrixScale=Math.hypot(l,d),m.x=m.lineX=0,m.y=m.lineY=0,m.xcoords=[],m.ycoords=[],m.tspan=this.svgFactory.createElement("svg:tspan"),m.tspan.setAttributeNS(null,"font-family",m.fontFamily),m.tspan.setAttributeNS(null,"font-size",`${E(m.fontSize)}px`),m.tspan.setAttributeNS(null,"y",E(-m.y)),m.txtElement=this.svgFactory.createElement("svg:text"),m.txtElement.append(m.tspan)}beginText(){const l=this.current;l.x=l.lineX=0,l.y=l.lineY=0,l.textMatrix=p.IDENTITY_MATRIX,l.lineMatrix=p.IDENTITY_MATRIX,l.textMatrixScale=1,l.tspan=this.svgFactory.createElement("svg:tspan"),l.txtElement=this.svgFactory.createElement("svg:text"),l.txtgrp=this.svgFactory.createElement("svg:g"),l.xcoords=[],l.ycoords=[]}moveText(l,d){const F=this.current;F.x=F.lineX+=l,F.y=F.lineY+=d,F.xcoords=[],F.ycoords=[],F.tspan=this.svgFactory.createElement("svg:tspan"),F.tspan.setAttributeNS(null,"font-family",F.fontFamily),F.tspan.setAttributeNS(null,"font-size",`${E(F.fontSize)}px`),F.tspan.setAttributeNS(null,"y",E(-F.y))}showText(l){const d=this.current,F=d.font,b=d.fontSize;if(b===0)return;const c=d.fontSizeScale,k=d.charSpacing,m=d.wordSpacing,$=d.fontDirection,z=d.textHScale*$,T=F.vertical,Y=T?1:-1,rt=F.defaultVMetrics,lt=b*d.fontMatrix[0];let V=0;for(const Et of l){if(Et===null){V+=$*m;continue}else if(typeof Et=="number"){V+=Y*Et*b/1e3;continue}const Pt=(Et.isSpace?m:0)+k,C=Et.fontChar;let n,o,i=Et.width;if(T){let u;const S=Et.vmetric||rt;u=Et.vmetric?S[1]:i*.5,u=-u*lt;const L=S[2]*lt;i=S?-S[0]:i,n=u/c,o=(V+L)/c}else n=V/c,o=0;(Et.isInFont||F.missingFile)&&(d.xcoords.push(d.x+n),T&&d.ycoords.push(-d.y+o),d.tspan.textContent+=C);const h=T?i*lt-Pt*$:i*lt+Pt*$;V+=h}d.tspan.setAttributeNS(null,"x",d.xcoords.map(E).join(" ")),T?d.tspan.setAttributeNS(null,"y",d.ycoords.map(E).join(" ")):d.tspan.setAttributeNS(null,"y",E(-d.y)),T?d.y-=V:d.x+=V*z,d.tspan.setAttributeNS(null,"font-family",d.fontFamily),d.tspan.setAttributeNS(null,"font-size",`${E(d.fontSize)}px`),d.fontStyle!==G.fontStyle&&d.tspan.setAttributeNS(null,"font-style",d.fontStyle),d.fontWeight!==G.fontWeight&&d.tspan.setAttributeNS(null,"font-weight",d.fontWeight);const ht=d.textRenderingMode&p.TextRenderingMode.FILL_STROKE_MASK;if(ht===p.TextRenderingMode.FILL||ht===p.TextRenderingMode.FILL_STROKE?(d.fillColor!==G.fillColor&&d.tspan.setAttributeNS(null,"fill",d.fillColor),d.fillAlpha<1&&d.tspan.setAttributeNS(null,"fill-opacity",d.fillAlpha)):d.textRenderingMode===p.TextRenderingMode.ADD_TO_PATH?d.tspan.setAttributeNS(null,"fill","transparent"):d.tspan.setAttributeNS(null,"fill","none"),ht===p.TextRenderingMode.STROKE||ht===p.TextRenderingMode.FILL_STROKE){const Et=1/(d.textMatrixScale||1);this._setStrokeAttributes(d.tspan,Et)}let mt=d.textMatrix;d.textRise!==0&&(mt=mt.slice(),mt[5]+=d.textRise),d.txtElement.setAttributeNS(null,"transform",`${A(mt)} scale(${E(z)}, -1)`),d.txtElement.setAttributeNS(H,"xml:space","preserve"),d.txtElement.append(d.tspan),d.txtgrp.append(d.txtElement),this._ensureTransformGroup().append(d.txtElement)}setLeadingMoveText(l,d){this.setLeading(-d),this.moveText(l,d)}addFontStyle(l){if(!l.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const d=g(l.data,l.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${l.loadedName}"; src: url(${d}); }
`}setFont(l){const d=this.current,F=this.commonObjs.get(l[0]);let b=l[1];d.font=F,this.embedFonts&&!F.missingFile&&!this.embeddedFonts[F.loadedName]&&(this.addFontStyle(F),this.embeddedFonts[F.loadedName]=F),d.fontMatrix=F.fontMatrix||p.FONT_IDENTITY_MATRIX;let c="normal";F.black?c="900":F.bold&&(c="bold");const k=F.italic?"italic":"normal";b<0?(b=-b,d.fontDirection=-1):d.fontDirection=1,d.fontSize=b,d.fontFamily=F.loadedName,d.fontWeight=c,d.fontStyle=k,d.tspan=this.svgFactory.createElement("svg:tspan"),d.tspan.setAttributeNS(null,"y",E(-d.y)),d.xcoords=[],d.ycoords=[]}endText(){var d;const l=this.current;l.textRenderingMode&p.TextRenderingMode.ADD_TO_PATH_FLAG&&((d=l.txtElement)!=null&&d.hasChildNodes())&&(l.element=l.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(l){l>0&&(this.current.lineWidth=l)}setLineCap(l){this.current.lineCap=M[l]}setLineJoin(l){this.current.lineJoin=x[l]}setMiterLimit(l){this.current.miterLimit=l}setStrokeAlpha(l){this.current.strokeAlpha=l}setStrokeRGBColor(l,d,F){this.current.strokeColor=p.Util.makeHexColor(l,d,F)}setFillAlpha(l){this.current.fillAlpha=l}setFillRGBColor(l,d,F){this.current.fillColor=p.Util.makeHexColor(l,d,F),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(l){this.current.strokeColor=this._makeColorN_Pattern(l)}setFillColorN(l){this.current.fillColor=this._makeColorN_Pattern(l)}shadingFill(l){const{width:d,height:F}=this.viewport,b=p.Util.inverseTransform(this.transformMatrix),[c,k,m,$]=p.Util.getAxialAlignedBoundingBox([0,0,d,F],b),z=this.svgFactory.createElement("svg:rect");z.setAttributeNS(null,"x",c),z.setAttributeNS(null,"y",k),z.setAttributeNS(null,"width",m-c),z.setAttributeNS(null,"height",$-k),z.setAttributeNS(null,"fill",this._makeShadingPattern(l)),this.current.fillAlpha<1&&z.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(z)}_makeColorN_Pattern(l){return l[0]==="TilingPattern"?this._makeTilingPattern(l):this._makeShadingPattern(l)}_makeTilingPattern(l){const d=l[1],F=l[2],b=l[3]||p.IDENTITY_MATRIX,[c,k,m,$]=l[4],z=l[5],T=l[6],Y=l[7],rt=`shading${w++}`,[lt,V,ht,mt]=p.Util.normalizeRect([...p.Util.applyTransform([c,k],b),...p.Util.applyTransform([m,$],b)]),[Et,Pt]=p.Util.singularValueDecompose2dScale(b),C=z*Et,n=T*Pt,o=this.svgFactory.createElement("svg:pattern");o.setAttributeNS(null,"id",rt),o.setAttributeNS(null,"patternUnits","userSpaceOnUse"),o.setAttributeNS(null,"width",C),o.setAttributeNS(null,"height",n),o.setAttributeNS(null,"x",`${lt}`),o.setAttributeNS(null,"y",`${V}`);const i=this.svg,h=this.transformMatrix,u=this.current.fillColor,S=this.current.strokeColor,L=this.svgFactory.create(ht-lt,mt-V);if(this.svg=L,this.transformMatrix=b,Y===2){const U=p.Util.makeHexColor(...d);this.current.fillColor=U,this.current.strokeColor=U}return this.executeOpTree(this.convertOpList(F)),this.svg=i,this.transformMatrix=h,this.current.fillColor=u,this.current.strokeColor=S,o.append(L.childNodes[0]),this.defs.append(o),`url(#${rt})`}_makeShadingPattern(l){switch(typeof l=="string"&&(l=this.objs.get(l)),l[0]){case"RadialAxial":const d=`shading${w++}`,F=l[3];let b;switch(l[1]){case"axial":const c=l[4],k=l[5];b=this.svgFactory.createElement("svg:linearGradient"),b.setAttributeNS(null,"id",d),b.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),b.setAttributeNS(null,"x1",c[0]),b.setAttributeNS(null,"y1",c[1]),b.setAttributeNS(null,"x2",k[0]),b.setAttributeNS(null,"y2",k[1]);break;case"radial":const m=l[4],$=l[5],z=l[6],T=l[7];b=this.svgFactory.createElement("svg:radialGradient"),b.setAttributeNS(null,"id",d),b.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),b.setAttributeNS(null,"cx",$[0]),b.setAttributeNS(null,"cy",$[1]),b.setAttributeNS(null,"r",T),b.setAttributeNS(null,"fx",m[0]),b.setAttributeNS(null,"fy",m[1]),b.setAttributeNS(null,"fr",z);break;default:throw new Error(`Unknown RadialAxial type: ${l[1]}`)}for(const c of F){const k=this.svgFactory.createElement("svg:stop");k.setAttributeNS(null,"offset",c[0]),k.setAttributeNS(null,"stop-color",c[1]),b.append(k)}return this.defs.append(b),`url(#${d})`;case"Mesh":return(0,p.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${l[0]}`)}}setDash(l,d){this.current.dashArray=l,this.current.dashPhase=d}constructPath(l,d){const F=this.current;let b=F.x,c=F.y,k=[],m=0;for(const $ of l)switch($|0){case p.OPS.rectangle:b=d[m++],c=d[m++];const z=d[m++],T=d[m++],Y=b+z,rt=c+T;k.push("M",E(b),E(c),"L",E(Y),E(c),"L",E(Y),E(rt),"L",E(b),E(rt),"Z");break;case p.OPS.moveTo:b=d[m++],c=d[m++],k.push("M",E(b),E(c));break;case p.OPS.lineTo:b=d[m++],c=d[m++],k.push("L",E(b),E(c));break;case p.OPS.curveTo:b=d[m+4],c=d[m+5],k.push("C",E(d[m]),E(d[m+1]),E(d[m+2]),E(d[m+3]),E(b),E(c)),m+=6;break;case p.OPS.curveTo2:k.push("C",E(b),E(c),E(d[m]),E(d[m+1]),E(d[m+2]),E(d[m+3])),b=d[m+2],c=d[m+3],m+=4;break;case p.OPS.curveTo3:b=d[m+2],c=d[m+3],k.push("C",E(d[m]),E(d[m+1]),E(b),E(c),E(b),E(c)),m+=4;break;case p.OPS.closePath:k.push("Z");break}k=k.join(" "),F.path&&l.length>0&&l[0]!==p.OPS.rectangle&&l[0]!==p.OPS.moveTo?k=F.path.getAttributeNS(null,"d")+k:(F.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(F.path)),F.path.setAttributeNS(null,"d",k),F.path.setAttributeNS(null,"fill","none"),F.element=F.path,F.setCurrentPoint(b,c)}endPath(){const l=this.current;if(l.path=null,!this.pendingClip)return;if(!l.element){this.pendingClip=null;return}const d=`clippath${f++}`,F=this.svgFactory.createElement("svg:clipPath");F.setAttributeNS(null,"id",d),F.setAttributeNS(null,"transform",A(this.transformMatrix));const b=l.element.cloneNode(!0);if(this.pendingClip==="evenodd"?b.setAttributeNS(null,"clip-rule","evenodd"):b.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,F.append(b),this.defs.append(F),l.activeClipUrl){l.clipGroup=null;for(const c of this.extraStack)c.clipGroup=null;F.setAttributeNS(null,"clip-path",l.activeClipUrl)}l.activeClipUrl=`url(#${d})`,this.tgrp=null}clip(l){this.pendingClip=l}closePath(){const l=this.current;if(l.path){const d=`${l.path.getAttributeNS(null,"d")}Z`;l.path.setAttributeNS(null,"d",d)}}setLeading(l){this.current.leading=-l}setTextRise(l){this.current.textRise=l}setTextRenderingMode(l){this.current.textRenderingMode=l}setHScale(l){this.current.textHScale=l/100}setRenderingIntent(l){}setFlatness(l){}setGState(l){for(const[d,F]of l)switch(d){case"LW":this.setLineWidth(F);break;case"LC":this.setLineCap(F);break;case"LJ":this.setLineJoin(F);break;case"ML":this.setMiterLimit(F);break;case"D":this.setDash(F[0],F[1]);break;case"RI":this.setRenderingIntent(F);break;case"FL":this.setFlatness(F);break;case"Font":this.setFont(F);break;case"CA":this.setStrokeAlpha(F);break;case"ca":this.setFillAlpha(F);break;default:(0,p.warn)(`Unimplemented graphic state operator ${d}`);break}}fill(){const l=this.current;l.element&&(l.element.setAttributeNS(null,"fill",l.fillColor),l.element.setAttributeNS(null,"fill-opacity",l.fillAlpha),this.endPath())}stroke(){const l=this.current;l.element&&(this._setStrokeAttributes(l.element),l.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(l,d=1){const F=this.current;let b=F.dashArray;d!==1&&b.length>0&&(b=b.map(function(c){return d*c})),l.setAttributeNS(null,"stroke",F.strokeColor),l.setAttributeNS(null,"stroke-opacity",F.strokeAlpha),l.setAttributeNS(null,"stroke-miterlimit",E(F.miterLimit)),l.setAttributeNS(null,"stroke-linecap",F.lineCap),l.setAttributeNS(null,"stroke-linejoin",F.lineJoin),l.setAttributeNS(null,"stroke-width",E(d*F.lineWidth)+"px"),l.setAttributeNS(null,"stroke-dasharray",b.map(E).join(" ")),l.setAttributeNS(null,"stroke-dashoffset",E(d*F.dashPhase)+"px")}eoFill(){var l;(l=this.current.element)==null||l.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var l;(l=this.current.element)==null||l.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const l=this.svgFactory.createElement("svg:rect");l.setAttributeNS(null,"x","0"),l.setAttributeNS(null,"y","0"),l.setAttributeNS(null,"width","1px"),l.setAttributeNS(null,"height","1px"),l.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(l)}paintImageXObject(l){const d=this.getObject(l);if(!d){(0,p.warn)(`Dependent image with object ID ${l} is not ready yet`);return}this.paintInlineImageXObject(d)}paintInlineImageXObject(l,d){const F=l.width,b=l.height,c=I(l,this.forceDataSchema,!!d),k=this.svgFactory.createElement("svg:rect");k.setAttributeNS(null,"x","0"),k.setAttributeNS(null,"y","0"),k.setAttributeNS(null,"width",E(F)),k.setAttributeNS(null,"height",E(b)),this.current.element=k,this.clip("nonzero");const m=this.svgFactory.createElement("svg:image");m.setAttributeNS(ut,"xlink:href",c),m.setAttributeNS(null,"x","0"),m.setAttributeNS(null,"y",E(-b)),m.setAttributeNS(null,"width",E(F)+"px"),m.setAttributeNS(null,"height",E(b)+"px"),m.setAttributeNS(null,"transform",`scale(${E(1/F)} ${E(-1/b)})`),d?d.append(m):this._ensureTransformGroup().append(m)}paintImageMaskXObject(l){const d=this.getObject(l.data,l);if(d.bitmap){(0,p.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const F=this.current,b=d.width,c=d.height,k=F.fillColor;F.maskId=`mask${y++}`;const m=this.svgFactory.createElement("svg:mask");m.setAttributeNS(null,"id",F.maskId);const $=this.svgFactory.createElement("svg:rect");$.setAttributeNS(null,"x","0"),$.setAttributeNS(null,"y","0"),$.setAttributeNS(null,"width",E(b)),$.setAttributeNS(null,"height",E(c)),$.setAttributeNS(null,"fill",k),$.setAttributeNS(null,"mask",`url(#${F.maskId})`),this.defs.append(m),this._ensureTransformGroup().append($),this.paintInlineImageXObject(d,m)}paintFormXObjectBegin(l,d){if(Array.isArray(l)&&l.length===6&&this.transform(l[0],l[1],l[2],l[3],l[4],l[5]),d){const F=d[2]-d[0],b=d[3]-d[1],c=this.svgFactory.createElement("svg:rect");c.setAttributeNS(null,"x",d[0]),c.setAttributeNS(null,"y",d[1]),c.setAttributeNS(null,"width",E(F)),c.setAttributeNS(null,"height",E(b)),this.current.element=c,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(l){const d=this.svgFactory.create(l.width,l.height),F=this.svgFactory.createElement("svg:defs");d.append(F),this.defs=F;const b=this.svgFactory.createElement("svg:g");return b.setAttributeNS(null,"transform",A(l.transform)),d.append(b),this.svg=b,d}_ensureClipGroup(){if(!this.current.clipGroup){const l=this.svgFactory.createElement("svg:g");l.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(l),this.current.clipGroup=l}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",A(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}s.SVGGraphics=P},(D,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.XfaText=void 0;class O{static textContent(p){const G=[],H={items:G,styles:Object.create(null)};function ut(M){var I;if(!M)return;let x=null;const g=M.name;if(g==="#text")x=M.value;else if(O.shouldBuildText(g))(I=M==null?void 0:M.attributes)!=null&&I.textContent?x=M.attributes.textContent:M.value&&(x=M.value);else return;if(x!==null&&G.push({str:x}),!!M.children)for(const N of M.children)ut(N)}return ut(p),H}static shouldBuildText(p){return!(p==="textarea"||p==="input"||p==="option"||p==="select")}}s.XfaText=O},(D,s,O)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.TextLayerRenderTask=void 0,s.renderTextLayer=A,s.updateTextLayer=f;var a=O(1),p=O(6);const G=1e5,H=30,ut=.8,M=new Map;function x(y,w){let P;if(w&&a.FeatureTest.isOffscreenCanvasSupported)P=new OffscreenCanvas(y,y).getContext("2d",{alpha:!1});else{const v=document.createElement("canvas");v.width=v.height=y,P=v.getContext("2d",{alpha:!1})}return P}function g(y,w){const P=M.get(y);if(P)return P;const v=x(H,w);v.font=`${H}px ${y}`;const l=v.measureText("");let d=l.fontBoundingBoxAscent,F=Math.abs(l.fontBoundingBoxDescent);if(d){const c=d/(d+F);return M.set(y,c),v.canvas.width=v.canvas.height=0,c}v.strokeStyle="red",v.clearRect(0,0,H,H),v.strokeText("g",0,0);let b=v.getImageData(0,0,H,H).data;F=0;for(let c=b.length-1-3;c>=0;c-=4)if(b[c]>0){F=Math.ceil(c/4/H);break}v.clearRect(0,0,H,H),v.strokeText("A",0,H),b=v.getImageData(0,0,H,H).data,d=0;for(let c=0,k=b.length;c<k;c+=4)if(b[c]>0){d=H-Math.floor(c/4/H);break}if(v.canvas.width=v.canvas.height=0,d){const c=d/(d+F);return M.set(y,c),c}return M.set(y,ut),ut}function I(y,w,P){const v=document.createElement("span"),l={angle:0,canvasWidth:0,hasText:w.str!=="",hasEOL:w.hasEOL,fontSize:0};y._textDivs.push(v);const d=a.Util.transform(y._transform,w.transform);let F=Math.atan2(d[1],d[0]);const b=P[w.fontName];b.vertical&&(F+=Math.PI/2);const c=Math.hypot(d[2],d[3]),k=c*g(b.fontFamily,y._isOffscreenCanvasSupported);let m,$;F===0?(m=d[4],$=d[5]-k):(m=d[4]+k*Math.sin(F),$=d[5]-k*Math.cos(F));const z="calc(var(--scale-factor)*",T=v.style;y._container===y._rootContainer?(T.left=`${(100*m/y._pageWidth).toFixed(2)}%`,T.top=`${(100*$/y._pageHeight).toFixed(2)}%`):(T.left=`${z}${m.toFixed(2)}px)`,T.top=`${z}${$.toFixed(2)}px)`),T.fontSize=`${z}${c.toFixed(2)}px)`,T.fontFamily=b.fontFamily,l.fontSize=c,v.setAttribute("role","presentation"),v.textContent=w.str,v.dir=w.dir,y._fontInspectorEnabled&&(v.dataset.fontName=w.fontName),F!==0&&(l.angle=F*(180/Math.PI));let Y=!1;if(w.str.length>1)Y=!0;else if(w.str!==" "&&w.transform[0]!==w.transform[3]){const rt=Math.abs(w.transform[0]),lt=Math.abs(w.transform[3]);rt!==lt&&Math.max(rt,lt)/Math.min(rt,lt)>1.5&&(Y=!0)}Y&&(l.canvasWidth=b.vertical?w.height:w.width),y._textDivProperties.set(v,l),y._isReadableStream&&y._layoutText(v)}function N(y){const{div:w,scale:P,properties:v,ctx:l,prevFontSize:d,prevFontFamily:F}=y,{style:b}=w;let c="";if(v.canvasWidth!==0&&v.hasText){const{fontFamily:k}=b,{canvasWidth:m,fontSize:$}=v;(d!==$||F!==k)&&(l.font=`${$*P}px ${k}`,y.prevFontSize=$,y.prevFontFamily=k);const{width:z}=l.measureText(w.textContent);z>0&&(c=`scaleX(${m*P/z})`)}v.angle!==0&&(c=`rotate(${v.angle}deg) ${c}`),c.length>0&&(b.transform=c)}function R(y){if(y._canceled)return;const w=y._textDivs,P=y._capability;if(w.length>G){P.resolve();return}if(!y._isReadableStream)for(const l of w)y._layoutText(l);P.resolve()}class E{constructor({textContentSource:w,container:P,viewport:v,textDivs:l,textDivProperties:d,textContentItemsStr:F,isOffscreenCanvasSupported:b}){var z;this._textContentSource=w,this._isReadableStream=w instanceof ReadableStream,this._container=this._rootContainer=P,this._textDivs=l||[],this._textContentItemsStr=F||[],this._isOffscreenCanvasSupported=b,this._fontInspectorEnabled=!!((z=globalThis.FontInspector)!=null&&z.enabled),this._reader=null,this._textDivProperties=d||new WeakMap,this._canceled=!1,this._capability=new a.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:v.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:x(0,b)};const{pageWidth:c,pageHeight:k,pageX:m,pageY:$}=v.rawDims;this._transform=[1,0,0,-1,-m,$+k],this._pageWidth=c,this._pageHeight=k,(0,p.setLayerDimensions)(P,v),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new a.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new a.AbortException("TextLayer task cancelled."))}_processItems(w,P){for(const v of w){if(v.str===void 0){if(v.type==="beginMarkedContentProps"||v.type==="beginMarkedContent"){const l=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),v.id!==null&&this._container.setAttribute("id",`${v.id}`),l.append(this._container)}else v.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(v.str),I(this,v,P)}}_layoutText(w){const P=this._layoutTextParams.properties=this._textDivProperties.get(w);if(this._layoutTextParams.div=w,N(this._layoutTextParams),P.hasText&&this._container.append(w),P.hasEOL){const v=document.createElement("br");v.setAttribute("role","presentation"),this._container.append(v)}}_render(){const w=new a.PromiseCapability;let P=Object.create(null);if(this._isReadableStream){const v=()=>{this._reader.read().then(({value:l,done:d})=>{if(d){w.resolve();return}Object.assign(P,l.styles),this._processItems(l.items,P),v()},w.reject)};this._reader=this._textContentSource.getReader(),v()}else if(this._textContentSource){const{items:v,styles:l}=this._textContentSource;this._processItems(v,l),w.resolve()}else throw new Error('No "textContentSource" parameter specified.');w.promise.then(()=>{P=null,R(this)},this._capability.reject)}}s.TextLayerRenderTask=E;function A(y){!y.textContentSource&&(y.textContent||y.textContentStream)&&((0,p.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),y.textContentSource=y.textContent||y.textContentStream);const{container:w,viewport:P}=y,v=getComputedStyle(w),l=v.getPropertyValue("visibility"),d=parseFloat(v.getPropertyValue("--scale-factor"));l==="visible"&&(!d||Math.abs(d-P.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const F=new E(y);return F._render(),F}function f({container:y,viewport:w,textDivs:P,textDivProperties:v,isOffscreenCanvasSupported:l,mustRotate:d=!0,mustRescale:F=!0}){if(d&&(0,p.setLayerDimensions)(y,{rotation:w.rotation}),F){const b=x(0,l),k={prevFontSize:null,prevFontFamily:null,div:null,scale:w.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:b};for(const m of P)k.properties=v.get(m),k.div=m,N(k)}}},(D,s,O)=>{var g,I,N,R,E,A,f,y,w,P,v,nn,d,ke,b,sn,k,rn;Object.defineProperty(s,"__esModule",{value:!0}),s.AnnotationEditorLayer=void 0;var a=O(1),p=O(4),G=O(28),H=O(33),ut=O(6),M=O(34);const $=class ${constructor({uiManager:T,pageIndex:Y,div:rt,accessibilityManager:lt,annotationLayer:V,viewport:ht,l10n:mt}){W(this,v);W(this,d);W(this,b);W(this,k);W(this,g,void 0);W(this,I,!1);W(this,N,null);W(this,R,this.pointerup.bind(this));W(this,E,this.pointerdown.bind(this));W(this,A,new Map);W(this,f,!1);W(this,y,!1);W(this,w,!1);W(this,P,void 0);const Et=[G.FreeTextEditor,H.InkEditor,M.StampEditor];if(!$._initialized){$._initialized=!0;for(const Pt of Et)Pt.initialize(mt)}T.registerEditorTypes(Et),at(this,P,T),this.pageIndex=Y,this.div=rt,at(this,g,lt),at(this,N,V),this.viewport=ht,t(this,P).addLayer(this)}get isEmpty(){return t(this,A).size===0}updateToolbar(T){t(this,P).updateToolbar(T)}updateMode(T=t(this,P).getMode()){q(this,k,rn).call(this),T===a.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),T!==a.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",T===a.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",T===a.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",T===a.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(T){if(!T&&t(this,P).getMode()!==a.AnnotationEditorType.INK)return;if(!T){for(const rt of t(this,A).values())if(rt.isEmpty()){rt.setInBackground();return}}q(this,d,ke).call(this,{offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(T){t(this,P).setEditingState(T)}addCommands(T){t(this,P).addCommands(T)}enable(){this.div.style.pointerEvents="auto";const T=new Set;for(const rt of t(this,A).values())rt.enableEditing(),rt.annotationElementId&&T.add(rt.annotationElementId);if(!t(this,N))return;const Y=t(this,N).getEditableAnnotations();for(const rt of Y){if(rt.hide(),t(this,P).isDeletedAnnotationElement(rt.data.id)||T.has(rt.data.id))continue;const lt=this.deserialize(rt);lt&&(this.addOrRebuild(lt),lt.enableEditing())}}disable(){var Y;at(this,w,!0),this.div.style.pointerEvents="none";const T=new Set;for(const rt of t(this,A).values()){if(rt.disableEditing(),!rt.annotationElementId||rt.serialize()!==null){T.add(rt.annotationElementId);continue}(Y=this.getEditableAnnotation(rt.annotationElementId))==null||Y.show(),rt.remove()}if(t(this,N)){const rt=t(this,N).getEditableAnnotations();for(const lt of rt){const{id:V}=lt.data;T.has(V)||t(this,P).isDeletedAnnotationElement(V)||lt.show()}}q(this,k,rn).call(this),this.isEmpty&&(this.div.hidden=!0),at(this,w,!1)}getEditableAnnotation(T){var Y;return((Y=t(this,N))==null?void 0:Y.getEditableAnnotation(T))||null}setActiveEditor(T){t(this,P).getActive()!==T&&t(this,P).setActiveEditor(T)}enableClick(){this.div.addEventListener("pointerdown",t(this,E)),this.div.addEventListener("pointerup",t(this,R))}disableClick(){this.div.removeEventListener("pointerdown",t(this,E)),this.div.removeEventListener("pointerup",t(this,R))}attach(T){t(this,A).set(T.id,T);const{annotationElementId:Y}=T;Y&&t(this,P).isDeletedAnnotationElement(Y)&&t(this,P).removeDeletedAnnotationElement(T)}detach(T){var Y;t(this,A).delete(T.id),(Y=t(this,g))==null||Y.removePointerInTextLayer(T.contentDiv),!t(this,w)&&T.annotationElementId&&t(this,P).addDeletedAnnotationElement(T)}remove(T){this.detach(T),t(this,P).removeEditor(T),T.div.contains(document.activeElement)&&setTimeout(()=>{t(this,P).focusMainContainer()},0),T.div.remove(),T.isAttachedToDOM=!1,t(this,y)||this.addInkEditorIfNeeded(!1)}changeParent(T){var Y;T.parent!==this&&(T.annotationElementId&&(t(this,P).addDeletedAnnotationElement(T.annotationElementId),p.AnnotationEditor.deleteAnnotationElement(T),T.annotationElementId=null),this.attach(T),(Y=T.parent)==null||Y.detach(T),T.setParent(this),T.div&&T.isAttachedToDOM&&(T.div.remove(),this.div.append(T.div)))}add(T){if(this.changeParent(T),t(this,P).addEditor(T),this.attach(T),!T.isAttachedToDOM){const Y=T.render();this.div.append(Y),T.isAttachedToDOM=!0}T.fixAndSetPosition(),T.onceAdded(),t(this,P).addToAnnotationStorage(T)}moveEditorInDOM(T){var rt;if(!T.isAttachedToDOM)return;const{activeElement:Y}=document;T.div.contains(Y)&&(T._focusEventsAllowed=!1,setTimeout(()=>{T.div.contains(document.activeElement)?T._focusEventsAllowed=!0:(T.div.addEventListener("focusin",()=>{T._focusEventsAllowed=!0},{once:!0}),Y.focus())},0)),T._structTreeParentId=(rt=t(this,g))==null?void 0:rt.moveElementInDOM(this.div,T.div,T.contentDiv,!0)}addOrRebuild(T){T.needsToBeRebuilt()?T.rebuild():this.add(T)}addUndoableEditor(T){const Y=()=>T._uiManager.rebuild(T),rt=()=>{T.remove()};this.addCommands({cmd:Y,undo:rt,mustExec:!1})}getNextId(){return t(this,P).getId()}pasteEditor(T,Y){t(this,P).updateToolbar(T),t(this,P).updateMode(T);const{offsetX:rt,offsetY:lt}=q(this,b,sn).call(this),V=this.getNextId(),ht=q(this,v,nn).call(this,{parent:this,id:V,x:rt,y:lt,uiManager:t(this,P),isCentered:!0,...Y});ht&&this.add(ht)}deserialize(T){switch(T.annotationType??T.annotationEditorType){case a.AnnotationEditorType.FREETEXT:return G.FreeTextEditor.deserialize(T,this,t(this,P));case a.AnnotationEditorType.INK:return H.InkEditor.deserialize(T,this,t(this,P));case a.AnnotationEditorType.STAMP:return M.StampEditor.deserialize(T,this,t(this,P))}return null}addNewEditor(){q(this,d,ke).call(this,q(this,b,sn).call(this),!0)}setSelected(T){t(this,P).setSelected(T)}toggleSelected(T){t(this,P).toggleSelected(T)}isSelected(T){return t(this,P).isSelected(T)}unselect(T){t(this,P).unselect(T)}pointerup(T){const{isMac:Y}=a.FeatureTest.platform;if(!(T.button!==0||T.ctrlKey&&Y)&&T.target===this.div&&t(this,f)){if(at(this,f,!1),!t(this,I)){at(this,I,!0);return}if(t(this,P).getMode()===a.AnnotationEditorType.STAMP){t(this,P).unselectAll();return}q(this,d,ke).call(this,T,!1)}}pointerdown(T){if(t(this,f)){at(this,f,!1);return}const{isMac:Y}=a.FeatureTest.platform;if(T.button!==0||T.ctrlKey&&Y||T.target!==this.div)return;at(this,f,!0);const rt=t(this,P).getActive();at(this,I,!rt||rt.isEmpty())}findNewParent(T,Y,rt){const lt=t(this,P).findParent(Y,rt);return lt===null||lt===this?!1:(lt.changeParent(T),!0)}destroy(){var T,Y;((T=t(this,P).getActive())==null?void 0:T.parent)===this&&(t(this,P).commitOrRemove(),t(this,P).setActiveEditor(null));for(const rt of t(this,A).values())(Y=t(this,g))==null||Y.removePointerInTextLayer(rt.contentDiv),rt.setParent(null),rt.isAttachedToDOM=!1,rt.div.remove();this.div=null,t(this,A).clear(),t(this,P).removeLayer(this)}render({viewport:T}){this.viewport=T,(0,ut.setLayerDimensions)(this.div,T);for(const Y of t(this,P).getEditors(this.pageIndex))this.add(Y);this.updateMode()}update({viewport:T}){t(this,P).commitOrRemove(),this.viewport=T,(0,ut.setLayerDimensions)(this.div,{rotation:T.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:T,pageHeight:Y}=this.viewport.rawDims;return[T,Y]}};g=new WeakMap,I=new WeakMap,N=new WeakMap,R=new WeakMap,E=new WeakMap,A=new WeakMap,f=new WeakMap,y=new WeakMap,w=new WeakMap,P=new WeakMap,v=new WeakSet,nn=function(T){switch(t(this,P).getMode()){case a.AnnotationEditorType.FREETEXT:return new G.FreeTextEditor(T);case a.AnnotationEditorType.INK:return new H.InkEditor(T);case a.AnnotationEditorType.STAMP:return new M.StampEditor(T)}return null},d=new WeakSet,ke=function(T,Y){const rt=this.getNextId(),lt=q(this,v,nn).call(this,{parent:this,id:rt,x:T.offsetX,y:T.offsetY,uiManager:t(this,P),isCentered:Y});return lt&&this.add(lt),lt},b=new WeakSet,sn=function(){const{x:T,y:Y,width:rt,height:lt}=this.div.getBoundingClientRect(),V=Math.max(0,T),ht=Math.max(0,Y),mt=Math.min(window.innerWidth,T+rt),Et=Math.min(window.innerHeight,Y+lt),Pt=(V+mt)/2-T,C=(ht+Et)/2-Y,[n,o]=this.viewport.rotation%180===0?[Pt,C]:[C,Pt];return{offsetX:n,offsetY:o}},k=new WeakSet,rn=function(){at(this,y,!0);for(const T of t(this,A).values())T.isEmpty()&&T.remove();at(this,y,!1)},ne($,"_initialized",!1);let x=$;s.AnnotationEditorLayer=x},(D,s,O)=>{var M,x,g,I,N,R,E,A,f,y,Mn,P,Dn,l,Ln,F,ve,c,an,m,In,z,on;Object.defineProperty(s,"__esModule",{value:!0}),s.FreeTextEditor=void 0;var a=O(1),p=O(5),G=O(4),H=O(29);const Y=class Y extends G.AnnotationEditor{constructor(V){super({...V,name:"freeTextEditor"});W(this,y);W(this,P);W(this,l);W(this,F);W(this,c);W(this,m);W(this,z);W(this,M,this.editorDivBlur.bind(this));W(this,x,this.editorDivFocus.bind(this));W(this,g,this.editorDivInput.bind(this));W(this,I,this.editorDivKeydown.bind(this));W(this,N,void 0);W(this,R,"");W(this,E,`${this.id}-editor`);W(this,A,void 0);W(this,f,null);at(this,N,V.color||Y._defaultColor||G.AnnotationEditor._defaultLineColor),at(this,A,V.fontSize||Y._defaultFontSize)}static get _keyboardManager(){const V=Y.prototype,ht=Pt=>Pt.isEmpty(),mt=p.AnnotationEditorUIManager.TRANSLATE_SMALL,Et=p.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,a.shadow)(this,"_keyboardManager",new p.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],V.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],V.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],V._translateEmpty,{args:[-mt,0],checker:ht}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],V._translateEmpty,{args:[-Et,0],checker:ht}],[["ArrowRight","mac+ArrowRight"],V._translateEmpty,{args:[mt,0],checker:ht}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],V._translateEmpty,{args:[Et,0],checker:ht}],[["ArrowUp","mac+ArrowUp"],V._translateEmpty,{args:[0,-mt],checker:ht}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],V._translateEmpty,{args:[0,-Et],checker:ht}],[["ArrowDown","mac+ArrowDown"],V._translateEmpty,{args:[0,mt],checker:ht}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],V._translateEmpty,{args:[0,Et],checker:ht}]]))}static initialize(V){G.AnnotationEditor.initialize(V,{strings:["free_text2_default_content","editor_free_text2_aria_label"]});const ht=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(ht.getPropertyValue("--freetext-padding"))}static updateDefaultParams(V,ht){switch(V){case a.AnnotationEditorParamsType.FREETEXT_SIZE:Y._defaultFontSize=ht;break;case a.AnnotationEditorParamsType.FREETEXT_COLOR:Y._defaultColor=ht;break}}updateParams(V,ht){switch(V){case a.AnnotationEditorParamsType.FREETEXT_SIZE:q(this,y,Mn).call(this,ht);break;case a.AnnotationEditorParamsType.FREETEXT_COLOR:q(this,P,Dn).call(this,ht);break}}static get defaultPropertiesToUpdate(){return[[a.AnnotationEditorParamsType.FREETEXT_SIZE,Y._defaultFontSize],[a.AnnotationEditorParamsType.FREETEXT_COLOR,Y._defaultColor||G.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[a.AnnotationEditorParamsType.FREETEXT_SIZE,t(this,A)],[a.AnnotationEditorParamsType.FREETEXT_COLOR,t(this,N)]]}_translateEmpty(V,ht){this._uiManager.translateSelectedEditors(V,ht,!0)}getInitialTranslation(){const V=this.parentScale;return[-Y._internalPadding*V,-(Y._internalPadding+t(this,A))*V]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(a.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",t(this,I)),this.editorDiv.addEventListener("focus",t(this,x)),this.editorDiv.addEventListener("blur",t(this,M)),this.editorDiv.addEventListener("input",t(this,g)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",t(this,E)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",t(this,I)),this.editorDiv.removeEventListener("focus",t(this,x)),this.editorDiv.removeEventListener("blur",t(this,M)),this.editorDiv.removeEventListener("input",t(this,g)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(V){this._focusEventsAllowed&&(super.focusin(V),V.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var V;if(this.width){q(this,z,on).call(this);return}this.enableEditMode(),this.editorDiv.focus(),(V=this._initialOptions)!=null&&V.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const V=t(this,R),ht=at(this,R,q(this,l,Ln).call(this).trimEnd());if(V===ht)return;const mt=Et=>{if(at(this,R,Et),!Et){this.remove();return}q(this,c,an).call(this),this._uiManager.rebuild(this),q(this,F,ve).call(this)};this.addCommands({cmd:()=>{mt(ht)},undo:()=>{mt(V)},mustExec:!1}),q(this,F,ve).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(V){this.enterInEditMode()}keydown(V){V.target===this.div&&V.key==="Enter"&&(this.enterInEditMode(),V.preventDefault())}editorDivKeydown(V){Y._keyboardManager.exec(this,V)}editorDivFocus(V){this.isEditing=!0}editorDivBlur(V){this.isEditing=!1}editorDivInput(V){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let V,ht;this.width&&(V=this.x,ht=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",t(this,E)),this.enableEditing(),G.AnnotationEditor._l10nPromise.get("editor_free_text2_aria_label").then(Et=>{var Pt;return(Pt=this.editorDiv)==null?void 0:Pt.setAttribute("aria-label",Et)}),G.AnnotationEditor._l10nPromise.get("free_text2_default_content").then(Et=>{var Pt;return(Pt=this.editorDiv)==null?void 0:Pt.setAttribute("default-content",Et)}),this.editorDiv.contentEditable=!0;const{style:mt}=this.editorDiv;if(mt.fontSize=`calc(${t(this,A)}px * var(--scale-factor))`,mt.color=t(this,N),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,p.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[Et,Pt]=this.parentDimensions;if(this.annotationElementId){const{position:C}=t(this,f);let[n,o]=this.getInitialTranslation();[n,o]=this.pageTranslationToScreen(n,o);const[i,h]=this.pageDimensions,[u,S]=this.pageTranslation;let L,U;switch(this.rotation){case 0:L=V+(C[0]-u)/i,U=ht+this.height-(C[1]-S)/h;break;case 90:L=V+(C[0]-u)/i,U=ht-(C[1]-S)/h,[n,o]=[o,-n];break;case 180:L=V-this.width+(C[0]-u)/i,U=ht-(C[1]-S)/h,[n,o]=[-n,-o];break;case 270:L=V+(C[0]-u-this.height*h)/i,U=ht+(C[1]-S-this.width*i)/h,[n,o]=[-o,n];break}this.setAt(L*Et,U*Pt,n,o)}else this.setAt(V*Et,ht*Pt,this.width*Et,this.height*Pt);q(this,c,an).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(V,ht,mt){let Et=null;if(V instanceof H.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:C,fontColor:n},rect:o,rotation:i,id:h},textContent:u,textPosition:S,parent:{page:{pageNumber:L}}}=V;if(!u||u.length===0)return null;Et=V={annotationType:a.AnnotationEditorType.FREETEXT,color:Array.from(n),fontSize:C,value:u.join(`
`),position:S,pageIndex:L-1,rect:o,rotation:i,id:h,deleted:!1}}const Pt=super.deserialize(V,ht,mt);return at(Pt,A,V.fontSize),at(Pt,N,a.Util.makeHexColor(...V.color)),at(Pt,R,V.value),Pt.annotationElementId=V.id||null,at(Pt,f,Et),Pt}serialize(V=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const ht=Y._internalPadding*this.parentScale,mt=this.getRect(ht,ht),Et=G.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:t(this,N)),Pt={annotationType:a.AnnotationEditorType.FREETEXT,color:Et,fontSize:t(this,A),value:t(this,R),pageIndex:this.pageIndex,rect:mt,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return V?Pt:this.annotationElementId&&!q(this,m,In).call(this,Pt)?null:(Pt.id=this.annotationElementId,Pt)}};M=new WeakMap,x=new WeakMap,g=new WeakMap,I=new WeakMap,N=new WeakMap,R=new WeakMap,E=new WeakMap,A=new WeakMap,f=new WeakMap,y=new WeakSet,Mn=function(V){const ht=Et=>{this.editorDiv.style.fontSize=`calc(${Et}px * var(--scale-factor))`,this.translate(0,-(Et-t(this,A))*this.parentScale),at(this,A,Et),q(this,F,ve).call(this)},mt=t(this,A);this.addCommands({cmd:()=>{ht(V)},undo:()=>{ht(mt)},mustExec:!0,type:a.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},P=new WeakSet,Dn=function(V){const ht=t(this,N);this.addCommands({cmd:()=>{at(this,N,this.editorDiv.style.color=V)},undo:()=>{at(this,N,this.editorDiv.style.color=ht)},mustExec:!0,type:a.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},l=new WeakSet,Ln=function(){const V=this.editorDiv.getElementsByTagName("div");if(V.length===0)return this.editorDiv.innerText;const ht=[];for(const mt of V)ht.push(mt.innerText.replace(/\r\n?|\n/,""));return ht.join(`
`)},F=new WeakSet,ve=function(){const[V,ht]=this.parentDimensions;let mt;if(this.isAttachedToDOM)mt=this.div.getBoundingClientRect();else{const{currentLayer:Et,div:Pt}=this,C=Pt.style.display;Pt.style.display="hidden",Et.div.append(this.div),mt=Pt.getBoundingClientRect(),Pt.remove(),Pt.style.display=C}this.rotation%180===this.parentRotation%180?(this.width=mt.width/V,this.height=mt.height/ht):(this.width=mt.height/V,this.height=mt.width/ht),this.fixAndSetPosition()},c=new WeakSet,an=function(){if(this.editorDiv.replaceChildren(),!!t(this,R))for(const V of t(this,R).split(`
`)){const ht=document.createElement("div");ht.append(V?document.createTextNode(V):document.createElement("br")),this.editorDiv.append(ht)}},m=new WeakSet,In=function(V){const{value:ht,fontSize:mt,color:Et,rect:Pt,pageIndex:C}=t(this,f);return V.value!==ht||V.fontSize!==mt||V.rect.some((n,o)=>Math.abs(n-Pt[o])>=1)||V.color.some((n,o)=>n!==Et[o])||V.pageIndex!==C},z=new WeakSet,on=function(V=!1){if(!this.annotationElementId)return;if(q(this,F,ve).call(this),!V&&(this.width===0||this.height===0)){setTimeout(()=>q(this,z,on).call(this,!0),0);return}const ht=Y._internalPadding*this.parentScale;t(this,f).rect=this.getRect(ht,ht)},ne(Y,"_freeTextDefaultContent",""),ne(Y,"_internalPadding",0),ne(Y,"_defaultColor",null),ne(Y,"_defaultFontSize",10),ne(Y,"_type","freetext");let ut=Y;s.FreeTextEditor=ut},(D,s,O)=>{var o,h,he,S,On,U,it,tt,et,ct,bt,dt,Ft,jt,St,Lt,gt,nt,st,pt,wt,xt,Ut,Nn,Wt,Fe,Gt,ln,Xt,cn,Z,K,yt,vt,ee,te,Q,hn,Ot,Ct,Nt,Bt,Bn,At,dn;Object.defineProperty(s,"__esModule",{value:!0}),s.StampAnnotationElement=s.InkAnnotationElement=s.FreeTextAnnotationElement=s.AnnotationLayer=void 0;var a=O(1),p=O(6),G=O(3),H=O(30),ut=O(31),M=O(32);const x=1e3,g=9,I=new WeakSet;function N(It){return{width:It[2]-It[0],height:It[3]-It[1]}}class R{static create(B){switch(B.data.annotationType){case a.AnnotationType.LINK:return new A(B);case a.AnnotationType.TEXT:return new f(B);case a.AnnotationType.WIDGET:switch(B.data.fieldType){case"Tx":return new w(B);case"Btn":return B.data.radioButton?new l(B):B.data.checkBox?new v(B):new d(B);case"Ch":return new F(B);case"Sig":return new P(B)}return new y(B);case a.AnnotationType.POPUP:return new b(B);case a.AnnotationType.FREETEXT:return new k(B);case a.AnnotationType.LINE:return new m(B);case a.AnnotationType.SQUARE:return new $(B);case a.AnnotationType.CIRCLE:return new z(B);case a.AnnotationType.POLYLINE:return new T(B);case a.AnnotationType.CARET:return new rt(B);case a.AnnotationType.INK:return new lt(B);case a.AnnotationType.POLYGON:return new Y(B);case a.AnnotationType.HIGHLIGHT:return new V(B);case a.AnnotationType.UNDERLINE:return new ht(B);case a.AnnotationType.SQUIGGLY:return new mt(B);case a.AnnotationType.STRIKEOUT:return new Et(B);case a.AnnotationType.STAMP:return new Pt(B);case a.AnnotationType.FILEATTACHMENT:return new C(B);default:return new E(B)}}}const i=class i{constructor(B,{isRenderable:e=!1,ignoreBorder:_=!1,createQuadrilaterals:j=!1}={}){W(this,o,!1);this.isRenderable=e,this.data=B.data,this.layer=B.layer,this.linkService=B.linkService,this.downloadManager=B.downloadManager,this.imageResourcesPath=B.imageResourcesPath,this.renderForms=B.renderForms,this.svgFactory=B.svgFactory,this.annotationStorage=B.annotationStorage,this.enableScripting=B.enableScripting,this.hasJSActions=B.hasJSActions,this._fieldObjects=B.fieldObjects,this.parent=B.parent,e&&(this.container=this._createContainer(_)),j&&this._createQuadrilaterals()}static _hasPopupData({titleObj:B,contentsObj:e,richText:_}){return!!(B!=null&&B.str||e!=null&&e.str||_!=null&&_.str)}get hasPopupData(){return i._hasPopupData(this.data)}_createContainer(B){const{data:e,parent:{page:_,viewport:j}}=this,X=document.createElement("section");X.setAttribute("data-annotation-id",e.id),this instanceof y||(X.tabIndex=x),X.style.zIndex=this.parent.zIndex++,this.data.popupRef&&X.setAttribute("aria-haspopup","dialog"),e.noRotate&&X.classList.add("norotate");const{pageWidth:J,pageHeight:ot,pageX:_t,pageY:kt}=j.rawDims;if(!e.rect||this instanceof b){const{rotation:$t}=e;return!e.hasOwnCanvas&&$t!==0&&this.setRotation($t,X),X}const{width:Rt,height:qt}=N(e.rect),Mt=a.Util.normalizeRect([e.rect[0],_.view[3]-e.rect[1]+_.view[1],e.rect[2],_.view[3]-e.rect[3]+_.view[1]]);if(!B&&e.borderStyle.width>0){X.style.borderWidth=`${e.borderStyle.width}px`;const $t=e.borderStyle.horizontalCornerRadius,Yt=e.borderStyle.verticalCornerRadius;if($t>0||Yt>0){const Zt=`calc(${$t}px * var(--scale-factor)) / calc(${Yt}px * var(--scale-factor))`;X.style.borderRadius=Zt}else if(this instanceof l){const Zt=`calc(${Rt}px * var(--scale-factor)) / calc(${qt}px * var(--scale-factor))`;X.style.borderRadius=Zt}switch(e.borderStyle.style){case a.AnnotationBorderStyleType.SOLID:X.style.borderStyle="solid";break;case a.AnnotationBorderStyleType.DASHED:X.style.borderStyle="dashed";break;case a.AnnotationBorderStyleType.BEVELED:(0,a.warn)("Unimplemented border style: beveled");break;case a.AnnotationBorderStyleType.INSET:(0,a.warn)("Unimplemented border style: inset");break;case a.AnnotationBorderStyleType.UNDERLINE:X.style.borderBottomStyle="solid";break}const Jt=e.borderColor||null;Jt?(at(this,o,!0),X.style.borderColor=a.Util.makeHexColor(Jt[0]|0,Jt[1]|0,Jt[2]|0)):X.style.borderWidth=0}X.style.left=`${100*(Mt[0]-_t)/J}%`,X.style.top=`${100*(Mt[1]-kt)/ot}%`;const{rotation:Dt}=e;return e.hasOwnCanvas||Dt===0?(X.style.width=`${100*Rt/J}%`,X.style.height=`${100*qt/ot}%`):this.setRotation(Dt,X),X}setRotation(B,e=this.container){if(!this.data.rect)return;const{pageWidth:_,pageHeight:j}=this.parent.viewport.rawDims,{width:X,height:J}=N(this.data.rect);let ot,_t;B%180===0?(ot=100*X/_,_t=100*J/j):(ot=100*J/_,_t=100*X/j),e.style.width=`${ot}%`,e.style.height=`${_t}%`,e.setAttribute("data-main-rotation",(360-B)%360)}get _commonActions(){const B=(e,_,j)=>{const X=j.detail[e],J=X[0],ot=X.slice(1);j.target.style[_]=H.ColorConverters[`${J}_HTML`](ot),this.annotationStorage.setValue(this.data.id,{[_]:H.ColorConverters[`${J}_rgb`](ot)})};return(0,a.shadow)(this,"_commonActions",{display:e=>{const{display:_}=e.detail,j=_%2===1;this.container.style.visibility=j?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:j,noPrint:_===1||_===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:_}=e.detail;this.container.style.visibility=_?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:_,noView:_})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{B("bgColor","backgroundColor",e)},fillColor:e=>{B("fillColor","backgroundColor",e)},fgColor:e=>{B("fgColor","color",e)},textColor:e=>{B("textColor","color",e)},borderColor:e=>{B("borderColor","borderColor",e)},strokeColor:e=>{B("strokeColor","borderColor",e)},rotation:e=>{const _=e.detail.rotation;this.setRotation(_),this.annotationStorage.setValue(this.data.id,{rotation:_})}})}_dispatchEventFromSandbox(B,e){const _=this._commonActions;for(const j of Object.keys(e.detail)){const X=B[j]||_[j];X==null||X(e)}}_setDefaultPropertiesFromJS(B){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const _=this._commonActions;for(const[j,X]of Object.entries(e)){const J=_[j];if(J){const ot={detail:{[j]:X},target:B};J(ot),delete e[j]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:B}=this.data;if(!B)return;const[e,_,j,X]=this.data.rect;if(B.length===1){const[,{x:Yt,y:Jt},{x:Zt,y:ie}]=B[0];if(j===Yt&&X===Jt&&e===Zt&&_===ie)return}const{style:J}=this.container;let ot;if(t(this,o)){const{borderColor:Yt,borderWidth:Jt}=J;J.borderWidth=0,ot=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${Yt}" stroke-width="${Jt}">`],this.container.classList.add("hasBorder")}const _t=j-e,kt=X-_,{svgFactory:Rt}=this,qt=Rt.createElement("svg");qt.classList.add("quadrilateralsContainer"),qt.setAttribute("width",0),qt.setAttribute("height",0);const Mt=Rt.createElement("defs");qt.append(Mt);const Dt=Rt.createElement("clipPath"),$t=`clippath_${this.data.id}`;Dt.setAttribute("id",$t),Dt.setAttribute("clipPathUnits","objectBoundingBox"),Mt.append(Dt);for(const[,{x:Yt,y:Jt},{x:Zt,y:ie}]of B){const se=Rt.createElement("rect"),re=(Zt-e)/_t,le=(X-Jt)/kt,ce=(Yt-Zt)/_t,An=(Jt-ie)/kt;se.setAttribute("x",re),se.setAttribute("y",le),se.setAttribute("width",ce),se.setAttribute("height",An),Dt.append(se),ot==null||ot.push(`<rect vector-effect="non-scaling-stroke" x="${re}" y="${le}" width="${ce}" height="${An}"/>`)}t(this,o)&&(ot.push("</g></svg>')"),J.backgroundImage=ot.join("")),this.container.append(qt),this.container.style.clipPath=`url(#${$t})`}_createPopup(){const{container:B,data:e}=this;B.setAttribute("aria-haspopup","dialog");const _=new b({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation},parent:this.parent,elements:[this]});this.parent.div.append(_.render())}render(){(0,a.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(B,e=null){const _=[];if(this._fieldObjects){const j=this._fieldObjects[B];if(j)for(const{page:X,id:J,exportValues:ot}of j){if(X===-1||J===e)continue;const _t=typeof ot=="string"?ot:null,kt=document.querySelector(`[data-element-id="${J}"]`);if(kt&&!I.has(kt)){(0,a.warn)(`_getElementsByName - element not allowed: ${J}`);continue}_.push({id:J,exportValue:_t,domElement:kt})}return _}for(const j of document.getElementsByName(B)){const{exportValue:X}=j,J=j.getAttribute("data-element-id");J!==e&&I.has(j)&&_.push({id:J,exportValue:X,domElement:j})}return _}show(){var B;this.container&&(this.container.hidden=!1),(B=this.popup)==null||B.maybeShow()}hide(){var B;this.container&&(this.container.hidden=!0),(B=this.popup)==null||B.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const B=this.getElementsToTriggerPopup();if(Array.isArray(B))for(const e of B)e.classList.add("highlightArea");else B.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:B,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{var _;(_=this.linkService.eventBus)==null||_.dispatch("switchannotationeditormode",{source:this,mode:B,editId:e})})}};o=new WeakMap;let E=i;class A extends E{constructor(e,_=null){super(e,{isRenderable:!0,ignoreBorder:!!(_!=null&&_.ignoreBorder),createQuadrilaterals:!0});W(this,h);W(this,S);this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:_}=this,j=document.createElement("a");j.setAttribute("data-element-id",e.id);let X=!1;return e.url?(_.addLinkAttributes(j,e.url,e.newWindow),X=!0):e.action?(this._bindNamedAction(j,e.action),X=!0):e.attachment?(this._bindAttachment(j,e.attachment),X=!0):e.setOCGState?(q(this,S,On).call(this,j,e.setOCGState),X=!0):e.dest?(this._bindLink(j,e.dest),X=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(j,e),X=!0),e.resetForm?(this._bindResetFormAction(j,e.resetForm),X=!0):this.isTooltipOnly&&!X&&(this._bindLink(j,""),X=!0)),this.container.classList.add("linkAnnotation"),X&&this.container.append(j),this.container}_bindLink(e,_){e.href=this.linkService.getDestinationHash(_),e.onclick=()=>(_&&this.linkService.goToDestination(_),!1),(_||_==="")&&q(this,h,he).call(this)}_bindNamedAction(e,_){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(_),!1),q(this,h,he).call(this)}_bindAttachment(e,_){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>{var j;return(j=this.downloadManager)==null||j.openOrDownloadData(this.container,_.content,_.filename),!1},q(this,h,he).call(this)}_bindJSAction(e,_){e.href=this.linkService.getAnchorUrl("");const j=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const X of Object.keys(_.actions)){const J=j.get(X);J&&(e[J]=()=>{var ot;return(ot=this.linkService.eventBus)==null||ot.dispatch("dispatcheventinsandbox",{source:this,detail:{id:_.id,name:X}}),!1})}e.onclick||(e.onclick=()=>!1),q(this,h,he).call(this)}_bindResetFormAction(e,_){const j=e.onclick;if(j||(e.href=this.linkService.getAnchorUrl("")),q(this,h,he).call(this),!this._fieldObjects){(0,a.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),j||(e.onclick=()=>!1);return}e.onclick=()=>{var qt;j==null||j();const{fields:X,refs:J,include:ot}=_,_t=[];if(X.length!==0||J.length!==0){const Mt=new Set(J);for(const Dt of X){const $t=this._fieldObjects[Dt]||[];for(const{id:Yt}of $t)Mt.add(Yt)}for(const Dt of Object.values(this._fieldObjects))for(const $t of Dt)Mt.has($t.id)===ot&&_t.push($t)}else for(const Mt of Object.values(this._fieldObjects))_t.push(...Mt);const kt=this.annotationStorage,Rt=[];for(const Mt of _t){const{id:Dt}=Mt;switch(Rt.push(Dt),Mt.type){case"text":{const Yt=Mt.defaultValue||"";kt.setValue(Dt,{value:Yt});break}case"checkbox":case"radiobutton":{const Yt=Mt.defaultValue===Mt.exportValues;kt.setValue(Dt,{value:Yt});break}case"combobox":case"listbox":{const Yt=Mt.defaultValue||"";kt.setValue(Dt,{value:Yt});break}default:continue}const $t=document.querySelector(`[data-element-id="${Dt}"]`);if($t){if(!I.has($t)){(0,a.warn)(`_bindResetFormAction - element not allowed: ${Dt}`);continue}}else continue;$t.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((qt=this.linkService.eventBus)==null||qt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:Rt,name:"ResetForm"}})),!1}}}h=new WeakSet,he=function(){this.container.setAttribute("data-internal-link","")},S=new WeakSet,On=function(e,_){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(_),!1),q(this,h,he).call(this)};class f extends E{constructor(B){super(B,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const B=document.createElement("img");return B.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",B.alt="[{{type}} Annotation]",B.dataset.l10nId="text_annotation_type",B.dataset.l10nArgs=JSON.stringify({type:this.data.name}),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(B),this.container}}class y extends E{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(B){var e;this.data.hasOwnCanvas&&(((e=B.previousSibling)==null?void 0:e.nodeName)==="CANVAS"&&(B.previousSibling.hidden=!0),B.hidden=!1)}_getKeyModifier(B){const{isWin:e,isMac:_}=a.FeatureTest.platform;return e&&B.ctrlKey||_&&B.metaKey}_setEventListener(B,e,_,j,X){_.includes("mouse")?B.addEventListener(_,J=>{var ot;(ot=this.linkService.eventBus)==null||ot.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:j,value:X(J),shift:J.shiftKey,modifier:this._getKeyModifier(J)}})}):B.addEventListener(_,J=>{var ot;if(_==="blur"){if(!e.focused||!J.relatedTarget)return;e.focused=!1}else if(_==="focus"){if(e.focused)return;e.focused=!0}X&&((ot=this.linkService.eventBus)==null||ot.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:j,value:X(J)}}))})}_setEventListeners(B,e,_,j){var X,J,ot;for(const[_t,kt]of _)(kt==="Action"||(X=this.data.actions)!=null&&X[kt])&&((kt==="Focus"||kt==="Blur")&&(e||(e={focused:!1})),this._setEventListener(B,e,_t,kt,j),kt==="Focus"&&!((J=this.data.actions)!=null&&J.Blur)?this._setEventListener(B,e,"blur","Blur",null):kt==="Blur"&&!((ot=this.data.actions)!=null&&ot.Focus)&&this._setEventListener(B,e,"focus","Focus",null))}_setBackgroundColor(B){const e=this.data.backgroundColor||null;B.style.backgroundColor=e===null?"transparent":a.Util.makeHexColor(e[0],e[1],e[2])}_setTextStyle(B){const e=["left","center","right"],{fontColor:_}=this.data.defaultAppearanceData,j=this.data.defaultAppearanceData.fontSize||g,X=B.style;let J;const ot=2,_t=kt=>Math.round(10*kt)/10;if(this.data.multiLine){const kt=Math.abs(this.data.rect[3]-this.data.rect[1]-ot),Rt=Math.round(kt/(a.LINE_FACTOR*j))||1,qt=kt/Rt;J=Math.min(j,_t(qt/a.LINE_FACTOR))}else{const kt=Math.abs(this.data.rect[3]-this.data.rect[1]-ot);J=Math.min(j,_t(kt/a.LINE_FACTOR))}X.fontSize=`calc(${J}px * var(--scale-factor))`,X.color=a.Util.makeHexColor(_[0],_[1],_[2]),this.data.textAlignment!==null&&(X.textAlign=e[this.data.textAlignment])}_setRequired(B,e){e?B.setAttribute("required",!0):B.removeAttribute("required"),B.setAttribute("aria-required",e)}}class w extends y{constructor(B){const e=B.renderForms||!B.data.hasAppearance&&!!B.data.fieldValue;super(B,{isRenderable:e})}setPropertyOnSiblings(B,e,_,j){const X=this.annotationStorage;for(const J of this._getElementsByName(B.name,B.id))J.domElement&&(J.domElement[e]=_),X.setValue(J.id,{[j]:_})}render(){var j,X;const B=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let _=null;if(this.renderForms){const J=B.getValue(e,{value:this.data.fieldValue});let ot=J.value||"";const _t=B.getValue(e,{charLimit:this.data.maxLen}).charLimit;_t&&ot.length>_t&&(ot=ot.slice(0,_t));let kt=J.formattedValue||((j=this.data.textContent)==null?void 0:j.join(`
`))||null;kt&&this.data.comb&&(kt=kt.replaceAll(/\s+/g,""));const Rt={userValue:ot,formattedValue:kt,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(_=document.createElement("textarea"),_.textContent=kt??ot,this.data.doNotScroll&&(_.style.overflowY="hidden")):(_=document.createElement("input"),_.type="text",_.setAttribute("value",kt??ot),this.data.doNotScroll&&(_.style.overflowX="hidden")),this.data.hasOwnCanvas&&(_.hidden=!0),I.add(_),_.setAttribute("data-element-id",e),_.disabled=this.data.readOnly,_.name=this.data.fieldName,_.tabIndex=x,this._setRequired(_,this.data.required),_t&&(_.maxLength=_t),_.addEventListener("input",Mt=>{B.setValue(e,{value:Mt.target.value}),this.setPropertyOnSiblings(_,"value",Mt.target.value,"value"),Rt.formattedValue=null}),_.addEventListener("resetform",Mt=>{const Dt=this.data.defaultFieldValue??"";_.value=Rt.userValue=Dt,Rt.formattedValue=null});let qt=Mt=>{const{formattedValue:Dt}=Rt;Dt!=null&&(Mt.target.value=Dt),Mt.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){_.addEventListener("focus",Dt=>{if(Rt.focused)return;const{target:$t}=Dt;Rt.userValue&&($t.value=Rt.userValue),Rt.lastCommittedValue=$t.value,Rt.commitKey=1,Rt.focused=!0}),_.addEventListener("updatefromsandbox",Dt=>{this.showElementAndHideCanvas(Dt.target);const $t={value(Yt){Rt.userValue=Yt.detail.value??"",B.setValue(e,{value:Rt.userValue.toString()}),Yt.target.value=Rt.userValue},formattedValue(Yt){const{formattedValue:Jt}=Yt.detail;Rt.formattedValue=Jt,Jt!=null&&Yt.target!==document.activeElement&&(Yt.target.value=Jt),B.setValue(e,{formattedValue:Jt})},selRange(Yt){Yt.target.setSelectionRange(...Yt.detail.selRange)},charLimit:Yt=>{var se;const{charLimit:Jt}=Yt.detail,{target:Zt}=Yt;if(Jt===0){Zt.removeAttribute("maxLength");return}Zt.setAttribute("maxLength",Jt);let ie=Rt.userValue;!ie||ie.length<=Jt||(ie=ie.slice(0,Jt),Zt.value=Rt.userValue=ie,B.setValue(e,{value:ie}),(se=this.linkService.eventBus)==null||se.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:ie,willCommit:!0,commitKey:1,selStart:Zt.selectionStart,selEnd:Zt.selectionEnd}}))}};this._dispatchEventFromSandbox($t,Dt)}),_.addEventListener("keydown",Dt=>{var Jt;Rt.commitKey=1;let $t=-1;if(Dt.key==="Escape"?$t=0:Dt.key==="Enter"&&!this.data.multiLine?$t=2:Dt.key==="Tab"&&(Rt.commitKey=3),$t===-1)return;const{value:Yt}=Dt.target;Rt.lastCommittedValue!==Yt&&(Rt.lastCommittedValue=Yt,Rt.userValue=Yt,(Jt=this.linkService.eventBus)==null||Jt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:Yt,willCommit:!0,commitKey:$t,selStart:Dt.target.selectionStart,selEnd:Dt.target.selectionEnd}}))});const Mt=qt;qt=null,_.addEventListener("blur",Dt=>{var Yt;if(!Rt.focused||!Dt.relatedTarget)return;Rt.focused=!1;const{value:$t}=Dt.target;Rt.userValue=$t,Rt.lastCommittedValue!==$t&&((Yt=this.linkService.eventBus)==null||Yt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:$t,willCommit:!0,commitKey:Rt.commitKey,selStart:Dt.target.selectionStart,selEnd:Dt.target.selectionEnd}})),Mt(Dt)}),(X=this.data.actions)!=null&&X.Keystroke&&_.addEventListener("beforeinput",Dt=>{var le;Rt.lastCommittedValue=null;const{data:$t,target:Yt}=Dt,{value:Jt,selectionStart:Zt,selectionEnd:ie}=Yt;let se=Zt,re=ie;switch(Dt.inputType){case"deleteWordBackward":{const ce=Jt.substring(0,Zt).match(/\w*[^\w]*$/);ce&&(se-=ce[0].length);break}case"deleteWordForward":{const ce=Jt.substring(Zt).match(/^[^\w]*\w*/);ce&&(re+=ce[0].length);break}case"deleteContentBackward":Zt===ie&&(se-=1);break;case"deleteContentForward":Zt===ie&&(re+=1);break}Dt.preventDefault(),(le=this.linkService.eventBus)==null||le.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:Jt,change:$t||"",willCommit:!1,selStart:se,selEnd:re}})}),this._setEventListeners(_,Rt,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Dt=>Dt.target.value)}if(qt&&_.addEventListener("blur",qt),this.data.comb){const Dt=(this.data.rect[2]-this.data.rect[0])/_t;_.classList.add("comb"),_.style.letterSpacing=`calc(${Dt}px * var(--scale-factor) - 1ch)`}}else _=document.createElement("div"),_.textContent=this.data.fieldValue,_.style.verticalAlign="middle",_.style.display="table-cell";return this._setTextStyle(_),this._setBackgroundColor(_),this._setDefaultPropertiesFromJS(_),this.container.append(_),this.container}}class P extends y{constructor(B){super(B,{isRenderable:!!B.data.hasOwnCanvas})}}class v extends y{constructor(B){super(B,{isRenderable:B.renderForms})}render(){const B=this.annotationStorage,e=this.data,_=e.id;let j=B.getValue(_,{value:e.exportValue===e.fieldValue}).value;typeof j=="string"&&(j=j!=="Off",B.setValue(_,{value:j})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const X=document.createElement("input");return I.add(X),X.setAttribute("data-element-id",_),X.disabled=e.readOnly,this._setRequired(X,this.data.required),X.type="checkbox",X.name=e.fieldName,j&&X.setAttribute("checked",!0),X.setAttribute("exportValue",e.exportValue),X.tabIndex=x,X.addEventListener("change",J=>{const{name:ot,checked:_t}=J.target;for(const kt of this._getElementsByName(ot,_)){const Rt=_t&&kt.exportValue===e.exportValue;kt.domElement&&(kt.domElement.checked=Rt),B.setValue(kt.id,{value:Rt})}B.setValue(_,{value:_t})}),X.addEventListener("resetform",J=>{const ot=e.defaultFieldValue||"Off";J.target.checked=ot===e.exportValue}),this.enableScripting&&this.hasJSActions&&(X.addEventListener("updatefromsandbox",J=>{const ot={value(_t){_t.target.checked=_t.detail.value!=="Off",B.setValue(_,{value:_t.target.checked})}};this._dispatchEventFromSandbox(ot,J)}),this._setEventListeners(X,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],J=>J.target.checked)),this._setBackgroundColor(X),this._setDefaultPropertiesFromJS(X),this.container.append(X),this.container}}class l extends y{constructor(B){super(B,{isRenderable:B.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const B=this.annotationStorage,e=this.data,_=e.id;let j=B.getValue(_,{value:e.fieldValue===e.buttonValue}).value;typeof j=="string"&&(j=j!==e.buttonValue,B.setValue(_,{value:j}));const X=document.createElement("input");if(I.add(X),X.setAttribute("data-element-id",_),X.disabled=e.readOnly,this._setRequired(X,this.data.required),X.type="radio",X.name=e.fieldName,j&&X.setAttribute("checked",!0),X.tabIndex=x,X.addEventListener("change",J=>{const{name:ot,checked:_t}=J.target;for(const kt of this._getElementsByName(ot,_))B.setValue(kt.id,{value:!1});B.setValue(_,{value:_t})}),X.addEventListener("resetform",J=>{const ot=e.defaultFieldValue;J.target.checked=ot!=null&&ot===e.buttonValue}),this.enableScripting&&this.hasJSActions){const J=e.buttonValue;X.addEventListener("updatefromsandbox",ot=>{const _t={value:kt=>{const Rt=J===kt.detail.value;for(const qt of this._getElementsByName(kt.target.name)){const Mt=Rt&&qt.id===_;qt.domElement&&(qt.domElement.checked=Mt),B.setValue(qt.id,{value:Mt})}}};this._dispatchEventFromSandbox(_t,ot)}),this._setEventListeners(X,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],ot=>ot.target.checked)}return this._setBackgroundColor(X),this._setDefaultPropertiesFromJS(X),this.container.append(X),this.container}}class d extends A{constructor(B){super(B,{ignoreBorder:B.data.hasAppearance})}render(){const B=super.render();B.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(B.title=this.data.alternativeText);const e=B.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",_=>{this._dispatchEventFromSandbox({},_)})),B}}class F extends y{constructor(B){super(B,{isRenderable:B.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const B=this.annotationStorage,e=this.data.id,_=B.getValue(e,{value:this.data.fieldValue}),j=document.createElement("select");I.add(j),j.setAttribute("data-element-id",e),j.disabled=this.data.readOnly,this._setRequired(j,this.data.required),j.name=this.data.fieldName,j.tabIndex=x;let X=this.data.combo&&this.data.options.length>0;this.data.combo||(j.size=this.data.options.length,this.data.multiSelect&&(j.multiple=!0)),j.addEventListener("resetform",Rt=>{const qt=this.data.defaultFieldValue;for(const Mt of j.options)Mt.selected=Mt.value===qt});for(const Rt of this.data.options){const qt=document.createElement("option");qt.textContent=Rt.displayValue,qt.value=Rt.exportValue,_.value.includes(Rt.exportValue)&&(qt.setAttribute("selected",!0),X=!1),j.append(qt)}let J=null;if(X){const Rt=document.createElement("option");Rt.value=" ",Rt.setAttribute("hidden",!0),Rt.setAttribute("selected",!0),j.prepend(Rt),J=()=>{Rt.remove(),j.removeEventListener("input",J),J=null},j.addEventListener("input",J)}const ot=Rt=>{const qt=Rt?"value":"textContent",{options:Mt,multiple:Dt}=j;return Dt?Array.prototype.filter.call(Mt,$t=>$t.selected).map($t=>$t[qt]):Mt.selectedIndex===-1?null:Mt[Mt.selectedIndex][qt]};let _t=ot(!1);const kt=Rt=>{const qt=Rt.target.options;return Array.prototype.map.call(qt,Mt=>({displayValue:Mt.textContent,exportValue:Mt.value}))};return this.enableScripting&&this.hasJSActions?(j.addEventListener("updatefromsandbox",Rt=>{const qt={value(Mt){J==null||J();const Dt=Mt.detail.value,$t=new Set(Array.isArray(Dt)?Dt:[Dt]);for(const Yt of j.options)Yt.selected=$t.has(Yt.value);B.setValue(e,{value:ot(!0)}),_t=ot(!1)},multipleSelection(Mt){j.multiple=!0},remove(Mt){const Dt=j.options,$t=Mt.detail.remove;Dt[$t].selected=!1,j.remove($t),Dt.length>0&&Array.prototype.findIndex.call(Dt,Jt=>Jt.selected)===-1&&(Dt[0].selected=!0),B.setValue(e,{value:ot(!0),items:kt(Mt)}),_t=ot(!1)},clear(Mt){for(;j.length!==0;)j.remove(0);B.setValue(e,{value:null,items:[]}),_t=ot(!1)},insert(Mt){const{index:Dt,displayValue:$t,exportValue:Yt}=Mt.detail.insert,Jt=j.children[Dt],Zt=document.createElement("option");Zt.textContent=$t,Zt.value=Yt,Jt?Jt.before(Zt):j.append(Zt),B.setValue(e,{value:ot(!0),items:kt(Mt)}),_t=ot(!1)},items(Mt){const{items:Dt}=Mt.detail;for(;j.length!==0;)j.remove(0);for(const $t of Dt){const{displayValue:Yt,exportValue:Jt}=$t,Zt=document.createElement("option");Zt.textContent=Yt,Zt.value=Jt,j.append(Zt)}j.options.length>0&&(j.options[0].selected=!0),B.setValue(e,{value:ot(!0),items:kt(Mt)}),_t=ot(!1)},indices(Mt){const Dt=new Set(Mt.detail.indices);for(const $t of Mt.target.options)$t.selected=Dt.has($t.index);B.setValue(e,{value:ot(!0)}),_t=ot(!1)},editable(Mt){Mt.target.disabled=!Mt.detail.editable}};this._dispatchEventFromSandbox(qt,Rt)}),j.addEventListener("input",Rt=>{var Mt;const qt=ot(!0);B.setValue(e,{value:qt}),Rt.preventDefault(),(Mt=this.linkService.eventBus)==null||Mt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:_t,changeEx:qt,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(j,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],Rt=>Rt.target.value)):j.addEventListener("input",function(Rt){B.setValue(e,{value:ot(!0)})}),this.data.combo&&this._setTextStyle(j),this._setBackgroundColor(j),this._setDefaultPropertiesFromJS(j),this.container.append(j),this.container}}class b extends E{constructor(B){const{data:e,elements:_}=B;super(B,{isRenderable:E._hasPopupData(e)}),this.elements=_}render(){this.container.classList.add("popupAnnotation");const B=new c({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),e=[];for(const _ of this.elements)_.popup=B,e.push(_.data.id),_.addHighlightArea();return this.container.setAttribute("aria-controls",e.map(_=>`${a.AnnotationPrefix}${_}`).join(",")),this.container}}class c{constructor({container:B,color:e,elements:_,titleObj:j,modificationDate:X,contentsObj:J,richText:ot,parent:_t,rect:kt,parentRect:Rt,open:qt}){W(this,Ut);W(this,Wt);W(this,Gt);W(this,Xt);W(this,U,null);W(this,it,q(this,Ut,Nn).bind(this));W(this,tt,q(this,Xt,cn).bind(this));W(this,et,q(this,Gt,ln).bind(this));W(this,ct,q(this,Wt,Fe).bind(this));W(this,bt,null);W(this,dt,null);W(this,Ft,null);W(this,jt,null);W(this,St,null);W(this,Lt,null);W(this,gt,!1);W(this,nt,null);W(this,st,null);W(this,pt,null);W(this,wt,null);W(this,xt,!1);var Dt;at(this,dt,B),at(this,wt,j),at(this,Ft,J),at(this,pt,ot),at(this,St,_t),at(this,bt,e),at(this,st,kt),at(this,Lt,Rt),at(this,jt,_);const Mt=p.PDFDateString.toDateObject(X);Mt&&at(this,U,_t.l10n.get("annotation_date_string",{date:Mt.toLocaleDateString(),time:Mt.toLocaleTimeString()})),this.trigger=_.flatMap($t=>$t.getElementsToTriggerPopup());for(const $t of this.trigger)$t.addEventListener("click",t(this,ct)),$t.addEventListener("mouseenter",t(this,et)),$t.addEventListener("mouseleave",t(this,tt)),$t.classList.add("popupTriggerArea");for(const $t of _)(Dt=$t.container)==null||Dt.addEventListener("keydown",t(this,it));t(this,dt).hidden=!0,qt&&q(this,Wt,Fe).call(this)}render(){if(t(this,nt))return;const{page:{view:B},viewport:{rawDims:{pageWidth:e,pageHeight:_,pageX:j,pageY:X}}}=t(this,St),J=at(this,nt,document.createElement("div"));if(J.className="popup",t(this,bt)){const se=J.style.outlineColor=a.Util.makeHexColor(...t(this,bt));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?J.style.backgroundColor=`color-mix(in srgb, ${se} 30%, white)`:J.style.backgroundColor=a.Util.makeHexColor(...t(this,bt).map(le=>Math.floor(.7*(255-le)+le)))}const ot=document.createElement("span");ot.className="header";const _t=document.createElement("h1");if(ot.append(_t),{dir:_t.dir,str:_t.textContent}=t(this,wt),J.append(ot),t(this,U)){const se=document.createElement("span");se.classList.add("popupDate"),t(this,U).then(re=>{se.textContent=re}),ot.append(se)}const kt=t(this,Ft),Rt=t(this,pt);if(Rt!=null&&Rt.str&&(!(kt!=null&&kt.str)||kt.str===Rt.str))M.XfaLayer.render({xfaHtml:Rt.html,intent:"richText",div:J}),J.lastChild.classList.add("richText","popupContent");else{const se=this._formatContents(kt);J.append(se)}let qt=!!t(this,Lt),Mt=qt?t(this,Lt):t(this,st);for(const se of t(this,jt))if(!Mt||a.Util.intersect(se.data.rect,Mt)!==null){Mt=se.data.rect,qt=!0;break}const Dt=a.Util.normalizeRect([Mt[0],B[3]-Mt[1]+B[1],Mt[2],B[3]-Mt[3]+B[1]]),$t=5,Yt=qt?Mt[2]-Mt[0]+$t:0,Jt=Dt[0]+Yt,Zt=Dt[1],{style:ie}=t(this,dt);ie.left=`${100*(Jt-j)/e}%`,ie.top=`${100*(Zt-X)/_}%`,t(this,dt).append(J)}_formatContents({str:B,dir:e}){const _=document.createElement("p");_.classList.add("popupContent"),_.dir=e;const j=B.split(/(?:\r\n?|\n)/);for(let X=0,J=j.length;X<J;++X){const ot=j[X];_.append(document.createTextNode(ot)),X<J-1&&_.append(document.createElement("br"))}return _}forceHide(){at(this,xt,this.isVisible),t(this,xt)&&(t(this,dt).hidden=!0)}maybeShow(){t(this,xt)&&(at(this,xt,!1),t(this,dt).hidden=!1)}get isVisible(){return t(this,dt).hidden===!1}}U=new WeakMap,it=new WeakMap,tt=new WeakMap,et=new WeakMap,ct=new WeakMap,bt=new WeakMap,dt=new WeakMap,Ft=new WeakMap,jt=new WeakMap,St=new WeakMap,Lt=new WeakMap,gt=new WeakMap,nt=new WeakMap,st=new WeakMap,pt=new WeakMap,wt=new WeakMap,xt=new WeakMap,Ut=new WeakSet,Nn=function(B){B.altKey||B.shiftKey||B.ctrlKey||B.metaKey||(B.key==="Enter"||B.key==="Escape"&&t(this,gt))&&q(this,Wt,Fe).call(this)},Wt=new WeakSet,Fe=function(){at(this,gt,!t(this,gt)),t(this,gt)?(q(this,Gt,ln).call(this),t(this,dt).addEventListener("click",t(this,ct)),t(this,dt).addEventListener("keydown",t(this,it))):(q(this,Xt,cn).call(this),t(this,dt).removeEventListener("click",t(this,ct)),t(this,dt).removeEventListener("keydown",t(this,it)))},Gt=new WeakSet,ln=function(){t(this,nt)||this.render(),this.isVisible?t(this,gt)&&t(this,dt).classList.add("focused"):(t(this,dt).hidden=!1,t(this,dt).style.zIndex=parseInt(t(this,dt).style.zIndex)+1e3)},Xt=new WeakSet,cn=function(){t(this,dt).classList.remove("focused"),!(t(this,gt)||!this.isVisible)&&(t(this,dt).hidden=!0,t(this,dt).style.zIndex=parseInt(t(this,dt).style.zIndex)-1e3)};class k extends E{constructor(B){super(B,{isRenderable:!0,ignoreBorder:!0}),this.textContent=B.data.textContent,this.textPosition=B.data.textPosition,this.annotationEditorType=a.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const B=document.createElement("div");B.classList.add("annotationTextContent"),B.setAttribute("role","comment");for(const e of this.textContent){const _=document.createElement("span");_.textContent=e,B.append(_)}this.container.append(B)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}s.FreeTextAnnotationElement=k;class m extends E{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});W(this,Z,null)}render(){this.container.classList.add("lineAnnotation");const e=this.data,{width:_,height:j}=N(e.rect),X=this.svgFactory.create(_,j,!0),J=at(this,Z,this.svgFactory.createElement("svg:line"));return J.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),J.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),J.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),J.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),J.setAttribute("stroke-width",e.borderStyle.width||1),J.setAttribute("stroke","transparent"),J.setAttribute("fill","transparent"),X.append(J),this.container.append(X),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return t(this,Z)}addHighlightArea(){this.container.classList.add("highlightArea")}}Z=new WeakMap;class $ extends E{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});W(this,K,null)}render(){this.container.classList.add("squareAnnotation");const e=this.data,{width:_,height:j}=N(e.rect),X=this.svgFactory.create(_,j,!0),J=e.borderStyle.width,ot=at(this,K,this.svgFactory.createElement("svg:rect"));return ot.setAttribute("x",J/2),ot.setAttribute("y",J/2),ot.setAttribute("width",_-J),ot.setAttribute("height",j-J),ot.setAttribute("stroke-width",J||1),ot.setAttribute("stroke","transparent"),ot.setAttribute("fill","transparent"),X.append(ot),this.container.append(X),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return t(this,K)}addHighlightArea(){this.container.classList.add("highlightArea")}}K=new WeakMap;class z extends E{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});W(this,yt,null)}render(){this.container.classList.add("circleAnnotation");const e=this.data,{width:_,height:j}=N(e.rect),X=this.svgFactory.create(_,j,!0),J=e.borderStyle.width,ot=at(this,yt,this.svgFactory.createElement("svg:ellipse"));return ot.setAttribute("cx",_/2),ot.setAttribute("cy",j/2),ot.setAttribute("rx",_/2-J/2),ot.setAttribute("ry",j/2-J/2),ot.setAttribute("stroke-width",J||1),ot.setAttribute("stroke","transparent"),ot.setAttribute("fill","transparent"),X.append(ot),this.container.append(X),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return t(this,yt)}addHighlightArea(){this.container.classList.add("highlightArea")}}yt=new WeakMap;class T extends E{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});W(this,vt,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const e=this.data,{width:_,height:j}=N(e.rect),X=this.svgFactory.create(_,j,!0);let J=[];for(const _t of e.vertices){const kt=_t.x-e.rect[0],Rt=e.rect[3]-_t.y;J.push(kt+","+Rt)}J=J.join(" ");const ot=at(this,vt,this.svgFactory.createElement(this.svgElementName));return ot.setAttribute("points",J),ot.setAttribute("stroke-width",e.borderStyle.width||1),ot.setAttribute("stroke","transparent"),ot.setAttribute("fill","transparent"),X.append(ot),this.container.append(X),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return t(this,vt)}addHighlightArea(){this.container.classList.add("highlightArea")}}vt=new WeakMap;class Y extends T{constructor(B){super(B),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class rt extends E{constructor(B){super(B,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class lt extends E{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});W(this,ee,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=a.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const e=this.data,{width:_,height:j}=N(e.rect),X=this.svgFactory.create(_,j,!0);for(const J of e.inkLists){let ot=[];for(const kt of J){const Rt=kt.x-e.rect[0],qt=e.rect[3]-kt.y;ot.push(`${Rt},${qt}`)}ot=ot.join(" ");const _t=this.svgFactory.createElement(this.svgElementName);t(this,ee).push(_t),_t.setAttribute("points",ot),_t.setAttribute("stroke-width",e.borderStyle.width||1),_t.setAttribute("stroke","transparent"),_t.setAttribute("fill","transparent"),!e.popupRef&&this.hasPopupData&&this._createPopup(),X.append(_t)}return this.container.append(X),this.container}getElementsToTriggerPopup(){return t(this,ee)}addHighlightArea(){this.container.classList.add("highlightArea")}}ee=new WeakMap,s.InkAnnotationElement=lt;class V extends E{constructor(B){super(B,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class ht extends E{constructor(B){super(B,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class mt extends E{constructor(B){super(B,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class Et extends E{constructor(B){super(B,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class Pt extends E{constructor(B){super(B,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}s.StampAnnotationElement=Pt;class C extends E{constructor(e){var X;super(e,{isRenderable:!0});W(this,Q);W(this,te,null);const{filename:_,content:j}=this.data.file;this.filename=(0,p.getFilenameFromUrl)(_,!0),this.content=j,(X=this.linkService.eventBus)==null||X.dispatch("fileattachmentannotation",{source:this,filename:_,content:j})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:_}=this;let j;_.hasAppearance||_.fillAlpha===0?j=document.createElement("div"):(j=document.createElement("img"),j.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(_.name)?"paperclip":"pushpin"}.svg`,_.fillAlpha&&_.fillAlpha<1&&(j.style=`filter: opacity(${Math.round(_.fillAlpha*100)}%);`)),j.addEventListener("dblclick",q(this,Q,hn).bind(this)),at(this,te,j);const{isMac:X}=a.FeatureTest.platform;return e.addEventListener("keydown",J=>{J.key==="Enter"&&(X?J.metaKey:J.ctrlKey)&&q(this,Q,hn).call(this)}),!_.popupRef&&this.hasPopupData?this._createPopup():j.classList.add("popupTriggerArea"),e.append(j),e}getElementsToTriggerPopup(){return t(this,te)}addHighlightArea(){this.container.classList.add("highlightArea")}}te=new WeakMap,Q=new WeakSet,hn=function(){var e;(e=this.downloadManager)==null||e.openOrDownloadData(this.container,this.content,this.filename)};class n{constructor({div:B,accessibilityManager:e,annotationCanvasMap:_,l10n:j,page:X,viewport:J}){W(this,Bt);W(this,At);W(this,Ot,null);W(this,Ct,null);W(this,Nt,new Map);this.div=B,at(this,Ot,e),at(this,Ct,_),this.l10n=j,this.page=X,this.viewport=J,this.zIndex=0,this.l10n||(this.l10n=ut.NullL10n)}async render(B){const{annotations:e}=B,_=this.div;(0,p.setLayerDimensions)(_,this.viewport);const j=new Map,X={data:null,layer:_,linkService:B.linkService,downloadManager:B.downloadManager,imageResourcesPath:B.imageResourcesPath||"",renderForms:B.renderForms!==!1,svgFactory:new p.DOMSVGFactory,annotationStorage:B.annotationStorage||new G.AnnotationStorage,enableScripting:B.enableScripting===!0,hasJSActions:B.hasJSActions,fieldObjects:B.fieldObjects,parent:this,elements:null};for(const J of e){if(J.noHTML)continue;const ot=J.annotationType===a.AnnotationType.POPUP;if(ot){const Rt=j.get(J.id);if(!Rt)continue;X.elements=Rt}else{const{width:Rt,height:qt}=N(J.rect);if(Rt<=0||qt<=0)continue}X.data=J;const _t=R.create(X);if(!_t.isRenderable)continue;if(!ot&&J.popupRef){const Rt=j.get(J.popupRef);Rt?Rt.push(_t):j.set(J.popupRef,[_t])}_t.annotationEditorType>0&&t(this,Nt).set(_t.data.id,_t);const kt=_t.render();J.hidden&&(kt.style.visibility="hidden"),q(this,Bt,Bn).call(this,kt,J.id)}q(this,At,dn).call(this),await this.l10n.translate(_)}update({viewport:B}){const e=this.div;this.viewport=B,(0,p.setLayerDimensions)(e,{rotation:B.rotation}),q(this,At,dn).call(this),e.hidden=!1}getEditableAnnotations(){return Array.from(t(this,Nt).values())}getEditableAnnotation(B){return t(this,Nt).get(B)}}Ot=new WeakMap,Ct=new WeakMap,Nt=new WeakMap,Bt=new WeakSet,Bn=function(B,e){var j;const _=B.firstChild||B;_.id=`${a.AnnotationPrefix}${e}`,this.div.append(B),(j=t(this,Ot))==null||j.moveElementInDOM(this.div,B,_,!1)},At=new WeakSet,dn=function(){if(!t(this,Ct))return;const B=this.div;for(const[e,_]of t(this,Ct)){const j=B.querySelector(`[data-annotation-id="${e}"]`);if(!j)continue;const{firstChild:X}=j;X?X.nodeName==="CANVAS"?X.replaceWith(_):X.before(_):j.append(_)}t(this,Ct).clear()},s.AnnotationLayer=n},(D,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ColorConverters=void 0;function O(G){return Math.floor(Math.max(0,Math.min(1,G))*255).toString(16).padStart(2,"0")}function a(G){return Math.max(0,Math.min(255,255*G))}class p{static CMYK_G([H,ut,M,x]){return["G",1-Math.min(1,.3*H+.59*M+.11*ut+x)]}static G_CMYK([H]){return["CMYK",0,0,0,1-H]}static G_RGB([H]){return["RGB",H,H,H]}static G_rgb([H]){return H=a(H),[H,H,H]}static G_HTML([H]){const ut=O(H);return`#${ut}${ut}${ut}`}static RGB_G([H,ut,M]){return["G",.3*H+.59*ut+.11*M]}static RGB_rgb(H){return H.map(a)}static RGB_HTML(H){return`#${H.map(O).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([H,ut,M,x]){return["RGB",1-Math.min(1,H+x),1-Math.min(1,M+x),1-Math.min(1,ut+x)]}static CMYK_rgb([H,ut,M,x]){return[a(1-Math.min(1,H+x)),a(1-Math.min(1,M+x)),a(1-Math.min(1,ut+x))]}static CMYK_HTML(H){const ut=this.CMYK_RGB(H).slice(1);return this.RGB_HTML(ut)}static RGB_CMYK([H,ut,M]){const x=1-H,g=1-ut,I=1-M,N=Math.min(x,g,I);return["CMYK",x,g,I,N]}}s.ColorConverters=p},(D,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.NullL10n=void 0,s.getL10nFallback=a;const O={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} × {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} × {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing…",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};O.print_progress_percent="{{progress}}%";function a(H,ut){switch(H){case"find_match_count":H=`find_match_count[${ut.total===1?"one":"other"}]`;break;case"find_match_count_limit":H=`find_match_count_limit[${ut.limit===1?"one":"other"}]`;break}return O[H]||""}function p(H,ut){return ut?H.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(M,x)=>x in ut?ut[x]:"{{"+x+"}}"):H}const G={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(H,ut=null,M=a(H,ut)){return p(M,ut)},async translate(H){}};s.NullL10n=G},(D,s,O)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.XfaLayer=void 0;var a=O(25);class p{static setupStorage(H,ut,M,x,g){const I=x.getValue(ut,{value:null});switch(M.name){case"textarea":if(I.value!==null&&(H.textContent=I.value),g==="print")break;H.addEventListener("input",N=>{x.setValue(ut,{value:N.target.value})});break;case"input":if(M.attributes.type==="radio"||M.attributes.type==="checkbox"){if(I.value===M.attributes.xfaOn?H.setAttribute("checked",!0):I.value===M.attributes.xfaOff&&H.removeAttribute("checked"),g==="print")break;H.addEventListener("change",N=>{x.setValue(ut,{value:N.target.checked?N.target.getAttribute("xfaOn"):N.target.getAttribute("xfaOff")})})}else{if(I.value!==null&&H.setAttribute("value",I.value),g==="print")break;H.addEventListener("input",N=>{x.setValue(ut,{value:N.target.value})})}break;case"select":if(I.value!==null){H.setAttribute("value",I.value);for(const N of M.children)N.attributes.value===I.value?N.attributes.selected=!0:N.attributes.hasOwnProperty("selected")&&delete N.attributes.selected}H.addEventListener("input",N=>{const R=N.target.options,E=R.selectedIndex===-1?"":R[R.selectedIndex].value;x.setValue(ut,{value:E})});break}}static setAttributes({html:H,element:ut,storage:M=null,intent:x,linkService:g}){const{attributes:I}=ut,N=H instanceof HTMLAnchorElement;I.type==="radio"&&(I.name=`${I.name}-${x}`);for(const[R,E]of Object.entries(I))if(E!=null)switch(R){case"class":E.length&&H.setAttribute(R,E.join(" "));break;case"dataId":break;case"id":H.setAttribute("data-element-id",E);break;case"style":Object.assign(H.style,E);break;case"textContent":H.textContent=E;break;default:(!N||R!=="href"&&R!=="newWindow")&&H.setAttribute(R,E)}N&&g.addLinkAttributes(H,I.href,I.newWindow),M&&I.dataId&&this.setupStorage(H,I.dataId,ut,M)}static render(H){var A;const ut=H.annotationStorage,M=H.linkService,x=H.xfaHtml,g=H.intent||"display",I=document.createElement(x.name);x.attributes&&this.setAttributes({html:I,element:x,intent:g,linkService:M});const N=[[x,-1,I]],R=H.div;if(R.append(I),H.viewport){const f=`matrix(${H.viewport.transform.join(",")})`;R.style.transform=f}g!=="richText"&&R.setAttribute("class","xfaLayer xfaFont");const E=[];for(;N.length>0;){const[f,y,w]=N.at(-1);if(y+1===f.children.length){N.pop();continue}const P=f.children[++N.at(-1)[1]];if(P===null)continue;const{name:v}=P;if(v==="#text"){const d=document.createTextNode(P.value);E.push(d),w.append(d);continue}const l=(A=P==null?void 0:P.attributes)!=null&&A.xmlns?document.createElementNS(P.attributes.xmlns,v):document.createElement(v);if(w.append(l),P.attributes&&this.setAttributes({html:l,element:P,storage:ut,intent:g,linkService:M}),P.children&&P.children.length>0)N.push([P,-1,l]);else if(P.value){const d=document.createTextNode(P.value);a.XfaText.shouldBuildText(v)&&E.push(d),l.append(d)}}for(const f of R.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))f.setAttribute("readOnly",!0);return{textDivs:E}}static update(H){const ut=`matrix(${H.viewport.transform.join(",")})`;H.div.style.transform=ut,H.div.hidden=!1}}s.XfaLayer=p},(D,s,O)=>{var x,g,I,N,R,E,A,f,y,w,P,v,l,d,F,jn,c,Un,m,Wn,z,Hn,Y,un,lt,$n,ht,fn,Et,Gn,C,Vn,o,zn,h,Xn,S,qn,U,oe,tt,pn,ct,Me,dt,De,jt,pe,Lt,gn,nt,Le,pt,Yn,xt,mn,Vt,Kn,zt,Jn,Ht,bn,ft,Ie,K,ge;Object.defineProperty(s,"__esModule",{value:!0}),s.InkEditor=void 0;var a=O(1),p=O(4),G=O(29),H=O(6),ut=O(5);const vt=class vt extends p.AnnotationEditor{constructor(Q){super({...Q,name:"inkEditor"});W(this,F);W(this,c);W(this,m);W(this,z);W(this,Y);W(this,lt);W(this,ht);W(this,Et);W(this,C);W(this,o);W(this,h);W(this,S);W(this,U);W(this,tt);W(this,ct);W(this,dt);W(this,jt);W(this,Lt);W(this,nt);W(this,zt);W(this,Ht);W(this,ft);W(this,K);W(this,x,0);W(this,g,0);W(this,I,this.canvasPointermove.bind(this));W(this,N,this.canvasPointerleave.bind(this));W(this,R,this.canvasPointerup.bind(this));W(this,E,this.canvasPointerdown.bind(this));W(this,A,new Path2D);W(this,f,!1);W(this,y,!1);W(this,w,!1);W(this,P,null);W(this,v,0);W(this,l,0);W(this,d,null);this.color=Q.color||null,this.thickness=Q.thickness||null,this.opacity=Q.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(Q){p.AnnotationEditor.initialize(Q,{strings:["editor_ink_canvas_aria_label","editor_ink2_aria_label"]})}static updateDefaultParams(Q,Tt){switch(Q){case a.AnnotationEditorParamsType.INK_THICKNESS:vt._defaultThickness=Tt;break;case a.AnnotationEditorParamsType.INK_COLOR:vt._defaultColor=Tt;break;case a.AnnotationEditorParamsType.INK_OPACITY:vt._defaultOpacity=Tt/100;break}}updateParams(Q,Tt){switch(Q){case a.AnnotationEditorParamsType.INK_THICKNESS:q(this,F,jn).call(this,Tt);break;case a.AnnotationEditorParamsType.INK_COLOR:q(this,c,Un).call(this,Tt);break;case a.AnnotationEditorParamsType.INK_OPACITY:q(this,m,Wn).call(this,Tt);break}}static get defaultPropertiesToUpdate(){return[[a.AnnotationEditorParamsType.INK_THICKNESS,vt._defaultThickness],[a.AnnotationEditorParamsType.INK_COLOR,vt._defaultColor||p.AnnotationEditor._defaultLineColor],[a.AnnotationEditorParamsType.INK_OPACITY,Math.round(vt._defaultOpacity*100)]]}get propertiesToUpdate(){return[[a.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||vt._defaultThickness],[a.AnnotationEditorParamsType.INK_COLOR,this.color||vt._defaultColor||p.AnnotationEditor._defaultLineColor],[a.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??vt._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(q(this,ct,Me).call(this),q(this,dt,De).call(this)),this.isAttachedToDOM||(this.parent.add(this),q(this,jt,pe).call(this)),q(this,K,ge).call(this)))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,t(this,P).disconnect(),at(this,P,null),super.remove())}setParent(Q){!this.parent&&Q?this._uiManager.removeShouldRescale(this):this.parent&&Q===null&&this._uiManager.addShouldRescale(this),super.setParent(Q)}onScaleChanging(){const[Q,Tt]=this.parentDimensions,Ot=this.width*Q,Ct=this.height*Tt;this.setDimensions(Ot,Ct)}enableEditMode(){t(this,f)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",t(this,E)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",t(this,E)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){t(this,f)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),at(this,f,!0),this.div.classList.add("disabled"),q(this,K,ge).call(this,!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(Q){this._focusEventsAllowed&&(super.focusin(Q),this.enableEditMode())}canvasPointerdown(Q){Q.button!==0||!this.isInEditMode()||t(this,f)||(this.setInForeground(),Q.preventDefault(),Q.type!=="mouse"&&this.div.focus(),q(this,lt,$n).call(this,Q.offsetX,Q.offsetY))}canvasPointermove(Q){Q.preventDefault(),q(this,ht,fn).call(this,Q.offsetX,Q.offsetY)}canvasPointerup(Q){Q.preventDefault(),q(this,tt,pn).call(this,Q)}canvasPointerleave(Q){q(this,tt,pn).call(this,Q)}get isResizable(){return!this.isEmpty()&&t(this,f)}render(){if(this.div)return this.div;let Q,Tt;this.width&&(Q=this.x,Tt=this.y),super.render(),p.AnnotationEditor._l10nPromise.get("editor_ink2_aria_label").then(Qt=>{var At;return(At=this.div)==null?void 0:At.setAttribute("aria-label",Qt)});const[Ot,Ct,Nt,Bt]=q(this,z,Hn).call(this);if(this.setAt(Ot,Ct,0,0),this.setDims(Nt,Bt),q(this,ct,Me).call(this),this.width){const[Qt,At]=this.parentDimensions;this.setAspectRatio(this.width*Qt,this.height*At),this.setAt(Q*Qt,Tt*At,this.width*Qt,this.height*At),at(this,w,!0),q(this,jt,pe).call(this),this.setDims(this.width*Qt,this.height*At),q(this,U,oe).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return q(this,dt,De).call(this),this.div}setDimensions(Q,Tt){const Ot=Math.round(Q),Ct=Math.round(Tt);if(t(this,v)===Ot&&t(this,l)===Ct)return;at(this,v,Ot),at(this,l,Ct),this.canvas.style.visibility="hidden";const[Nt,Bt]=this.parentDimensions;this.width=Q/Nt,this.height=Tt/Bt,this.fixAndSetPosition(),t(this,f)&&q(this,Lt,gn).call(this,Q,Tt),q(this,jt,pe).call(this),q(this,U,oe).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(Q,Tt,Ot){var X,J,ot;if(Q instanceof G.InkAnnotationElement)return null;const Ct=super.deserialize(Q,Tt,Ot);Ct.thickness=Q.thickness,Ct.color=a.Util.makeHexColor(...Q.color),Ct.opacity=Q.opacity;const[Nt,Bt]=Ct.pageDimensions,Qt=Ct.width*Nt,At=Ct.height*Bt,Kt=Ct.parentScale,It=Q.thickness/2;at(Ct,f,!0),at(Ct,v,Math.round(Qt)),at(Ct,l,Math.round(At));const{paths:B,rect:e,rotation:_}=Q;for(let{bezier:_t}of B){_t=q(X=vt,Vt,Kn).call(X,_t,e,_);const kt=[];Ct.paths.push(kt);let Rt=Kt*(_t[0]-It),qt=Kt*(_t[1]-It);for(let Dt=2,$t=_t.length;Dt<$t;Dt+=6){const Yt=Kt*(_t[Dt]-It),Jt=Kt*(_t[Dt+1]-It),Zt=Kt*(_t[Dt+2]-It),ie=Kt*(_t[Dt+3]-It),se=Kt*(_t[Dt+4]-It),re=Kt*(_t[Dt+5]-It);kt.push([[Rt,qt],[Yt,Jt],[Zt,ie],[se,re]]),Rt=se,qt=re}const Mt=q(this,pt,Yn).call(this,kt);Ct.bezierPath2D.push(Mt)}const j=q(J=Ct,Ht,bn).call(J);return at(Ct,g,Math.max(p.AnnotationEditor.MIN_SIZE,j[2]-j[0])),at(Ct,x,Math.max(p.AnnotationEditor.MIN_SIZE,j[3]-j[1])),q(ot=Ct,Lt,gn).call(ot,Qt,At),Ct}serialize(){if(this.isEmpty())return null;const Q=this.getRect(0,0),Tt=p.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:a.AnnotationEditorType.INK,color:Tt,thickness:this.thickness,opacity:this.opacity,paths:q(this,zt,Jn).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,Q),pageIndex:this.pageIndex,rect:Q,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};x=new WeakMap,g=new WeakMap,I=new WeakMap,N=new WeakMap,R=new WeakMap,E=new WeakMap,A=new WeakMap,f=new WeakMap,y=new WeakMap,w=new WeakMap,P=new WeakMap,v=new WeakMap,l=new WeakMap,d=new WeakMap,F=new WeakSet,jn=function(Q){const Tt=this.thickness;this.addCommands({cmd:()=>{this.thickness=Q,q(this,K,ge).call(this)},undo:()=>{this.thickness=Tt,q(this,K,ge).call(this)},mustExec:!0,type:a.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},c=new WeakSet,Un=function(Q){const Tt=this.color;this.addCommands({cmd:()=>{this.color=Q,q(this,U,oe).call(this)},undo:()=>{this.color=Tt,q(this,U,oe).call(this)},mustExec:!0,type:a.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},m=new WeakSet,Wn=function(Q){Q/=100;const Tt=this.opacity;this.addCommands({cmd:()=>{this.opacity=Q,q(this,U,oe).call(this)},undo:()=>{this.opacity=Tt,q(this,U,oe).call(this)},mustExec:!0,type:a.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},z=new WeakSet,Hn=function(){const{parentRotation:Q,parentDimensions:[Tt,Ot]}=this;switch(Q){case 90:return[0,Ot,Ot,Tt];case 180:return[Tt,Ot,Tt,Ot];case 270:return[Tt,0,Ot,Tt];default:return[0,0,Tt,Ot]}},Y=new WeakSet,un=function(){const{ctx:Q,color:Tt,opacity:Ot,thickness:Ct,parentScale:Nt,scaleFactor:Bt}=this;Q.lineWidth=Ct*Nt/Bt,Q.lineCap="round",Q.lineJoin="round",Q.miterLimit=10,Q.strokeStyle=`${Tt}${(0,ut.opacityToHex)(Ot)}`},lt=new WeakSet,$n=function(Q,Tt){this.canvas.addEventListener("contextmenu",H.noContextMenu),this.canvas.addEventListener("pointerleave",t(this,N)),this.canvas.addEventListener("pointermove",t(this,I)),this.canvas.addEventListener("pointerup",t(this,R)),this.canvas.removeEventListener("pointerdown",t(this,E)),this.isEditing=!0,t(this,w)||(at(this,w,!0),q(this,jt,pe).call(this),this.thickness||(this.thickness=vt._defaultThickness),this.color||(this.color=vt._defaultColor||p.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=vt._defaultOpacity)),this.currentPath.push([Q,Tt]),at(this,y,!1),q(this,Y,un).call(this),at(this,d,()=>{q(this,o,zn).call(this),t(this,d)&&window.requestAnimationFrame(t(this,d))}),window.requestAnimationFrame(t(this,d))},ht=new WeakSet,fn=function(Q,Tt){const[Ot,Ct]=this.currentPath.at(-1);if(this.currentPath.length>1&&Q===Ot&&Tt===Ct)return;const Nt=this.currentPath;let Bt=t(this,A);if(Nt.push([Q,Tt]),at(this,y,!0),Nt.length<=2){Bt.moveTo(...Nt[0]),Bt.lineTo(Q,Tt);return}Nt.length===3&&(at(this,A,Bt=new Path2D),Bt.moveTo(...Nt[0])),q(this,h,Xn).call(this,Bt,...Nt.at(-3),...Nt.at(-2),Q,Tt)},Et=new WeakSet,Gn=function(){if(this.currentPath.length===0)return;const Q=this.currentPath.at(-1);t(this,A).lineTo(...Q)},C=new WeakSet,Vn=function(Q,Tt){at(this,d,null),Q=Math.min(Math.max(Q,0),this.canvas.width),Tt=Math.min(Math.max(Tt,0),this.canvas.height),q(this,ht,fn).call(this,Q,Tt),q(this,Et,Gn).call(this);let Ot;if(this.currentPath.length!==1)Ot=q(this,S,qn).call(this);else{const At=[Q,Tt];Ot=[[At,At.slice(),At.slice(),At]]}const Ct=t(this,A),Nt=this.currentPath;this.currentPath=[],at(this,A,new Path2D);const Bt=()=>{this.allRawPaths.push(Nt),this.paths.push(Ot),this.bezierPath2D.push(Ct),this.rebuild()},Qt=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(q(this,ct,Me).call(this),q(this,dt,De).call(this)),q(this,K,ge).call(this))};this.addCommands({cmd:Bt,undo:Qt,mustExec:!0})},o=new WeakSet,zn=function(){if(!t(this,y))return;at(this,y,!1);const Q=Math.ceil(this.thickness*this.parentScale),Tt=this.currentPath.slice(-3),Ot=Tt.map(Bt=>Bt[0]),Ct=Tt.map(Bt=>Bt[1]);Math.min(...Ot)-Q,Math.max(...Ot)+Q,Math.min(...Ct)-Q,Math.max(...Ct)+Q;const{ctx:Nt}=this;Nt.save(),Nt.clearRect(0,0,this.canvas.width,this.canvas.height);for(const Bt of this.bezierPath2D)Nt.stroke(Bt);Nt.stroke(t(this,A)),Nt.restore()},h=new WeakSet,Xn=function(Q,Tt,Ot,Ct,Nt,Bt,Qt){const At=(Tt+Ct)/2,Kt=(Ot+Nt)/2,It=(Ct+Bt)/2,B=(Nt+Qt)/2;Q.bezierCurveTo(At+2*(Ct-At)/3,Kt+2*(Nt-Kt)/3,It+2*(Ct-It)/3,B+2*(Nt-B)/3,It,B)},S=new WeakSet,qn=function(){const Q=this.currentPath;if(Q.length<=2)return[[Q[0],Q[0],Q.at(-1),Q.at(-1)]];const Tt=[];let Ot,[Ct,Nt]=Q[0];for(Ot=1;Ot<Q.length-2;Ot++){const[e,_]=Q[Ot],[j,X]=Q[Ot+1],J=(e+j)/2,ot=(_+X)/2,_t=[Ct+2*(e-Ct)/3,Nt+2*(_-Nt)/3],kt=[J+2*(e-J)/3,ot+2*(_-ot)/3];Tt.push([[Ct,Nt],_t,kt,[J,ot]]),[Ct,Nt]=[J,ot]}const[Bt,Qt]=Q[Ot],[At,Kt]=Q[Ot+1],It=[Ct+2*(Bt-Ct)/3,Nt+2*(Qt-Nt)/3],B=[At+2*(Bt-At)/3,Kt+2*(Qt-Kt)/3];return Tt.push([[Ct,Nt],It,B,[At,Kt]]),Tt},U=new WeakSet,oe=function(){if(this.isEmpty()){q(this,nt,Le).call(this);return}q(this,Y,un).call(this);const{canvas:Q,ctx:Tt}=this;Tt.setTransform(1,0,0,1,0,0),Tt.clearRect(0,0,Q.width,Q.height),q(this,nt,Le).call(this);for(const Ot of this.bezierPath2D)Tt.stroke(Ot)},tt=new WeakSet,pn=function(Q){this.canvas.removeEventListener("pointerleave",t(this,N)),this.canvas.removeEventListener("pointermove",t(this,I)),this.canvas.removeEventListener("pointerup",t(this,R)),this.canvas.addEventListener("pointerdown",t(this,E)),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",H.noContextMenu)},10),q(this,C,Vn).call(this,Q.offsetX,Q.offsetY),this.addToAnnotationStorage(),this.setInBackground()},ct=new WeakSet,Me=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",p.AnnotationEditor._l10nPromise.get("editor_ink_canvas_aria_label").then(Q=>{var Tt;return(Tt=this.canvas)==null?void 0:Tt.setAttribute("aria-label",Q)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},dt=new WeakSet,De=function(){at(this,P,new ResizeObserver(Q=>{const Tt=Q[0].contentRect;Tt.width&&Tt.height&&this.setDimensions(Tt.width,Tt.height)})),t(this,P).observe(this.div)},jt=new WeakSet,pe=function(){if(!t(this,w))return;const[Q,Tt]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*Q),this.canvas.height=Math.ceil(this.height*Tt),q(this,nt,Le).call(this)},Lt=new WeakSet,gn=function(Q,Tt){const Ot=q(this,ft,Ie).call(this),Ct=(Q-Ot)/t(this,g),Nt=(Tt-Ot)/t(this,x);this.scaleFactor=Math.min(Ct,Nt)},nt=new WeakSet,Le=function(){const Q=q(this,ft,Ie).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+Q,this.translationY*this.scaleFactor+Q)},pt=new WeakSet,Yn=function(Q){const Tt=new Path2D;for(let Ot=0,Ct=Q.length;Ot<Ct;Ot++){const[Nt,Bt,Qt,At]=Q[Ot];Ot===0&&Tt.moveTo(...Nt),Tt.bezierCurveTo(Bt[0],Bt[1],Qt[0],Qt[1],At[0],At[1])}return Tt},xt=new WeakSet,mn=function(Q,Tt,Ot){const[Ct,Nt,Bt,Qt]=Tt;switch(Ot){case 0:for(let At=0,Kt=Q.length;At<Kt;At+=2)Q[At]+=Ct,Q[At+1]=Qt-Q[At+1];break;case 90:for(let At=0,Kt=Q.length;At<Kt;At+=2){const It=Q[At];Q[At]=Q[At+1]+Ct,Q[At+1]=It+Nt}break;case 180:for(let At=0,Kt=Q.length;At<Kt;At+=2)Q[At]=Bt-Q[At],Q[At+1]+=Nt;break;case 270:for(let At=0,Kt=Q.length;At<Kt;At+=2){const It=Q[At];Q[At]=Bt-Q[At+1],Q[At+1]=Qt-It}break;default:throw new Error("Invalid rotation")}return Q},Vt=new WeakSet,Kn=function(Q,Tt,Ot){const[Ct,Nt,Bt,Qt]=Tt;switch(Ot){case 0:for(let At=0,Kt=Q.length;At<Kt;At+=2)Q[At]-=Ct,Q[At+1]=Qt-Q[At+1];break;case 90:for(let At=0,Kt=Q.length;At<Kt;At+=2){const It=Q[At];Q[At]=Q[At+1]-Nt,Q[At+1]=It-Ct}break;case 180:for(let At=0,Kt=Q.length;At<Kt;At+=2)Q[At]=Bt-Q[At],Q[At+1]-=Nt;break;case 270:for(let At=0,Kt=Q.length;At<Kt;At+=2){const It=Q[At];Q[At]=Qt-Q[At+1],Q[At+1]=Bt-It}break;default:throw new Error("Invalid rotation")}return Q},zt=new WeakSet,Jn=function(Q,Tt,Ot,Ct){var Kt,It;const Nt=[],Bt=this.thickness/2,Qt=Q*Tt+Bt,At=Q*Ot+Bt;for(const B of this.paths){const e=[],_=[];for(let j=0,X=B.length;j<X;j++){const[J,ot,_t,kt]=B[j],Rt=Q*J[0]+Qt,qt=Q*J[1]+At,Mt=Q*ot[0]+Qt,Dt=Q*ot[1]+At,$t=Q*_t[0]+Qt,Yt=Q*_t[1]+At,Jt=Q*kt[0]+Qt,Zt=Q*kt[1]+At;j===0&&(e.push(Rt,qt),_.push(Rt,qt)),e.push(Mt,Dt,$t,Yt,Jt,Zt),_.push(Mt,Dt),j===X-1&&_.push(Jt,Zt)}Nt.push({bezier:q(Kt=vt,xt,mn).call(Kt,e,Ct,this.rotation),points:q(It=vt,xt,mn).call(It,_,Ct,this.rotation)})}return Nt},Ht=new WeakSet,bn=function(){let Q=1/0,Tt=-1/0,Ot=1/0,Ct=-1/0;for(const Nt of this.paths)for(const[Bt,Qt,At,Kt]of Nt){const It=a.Util.bezierBoundingBox(...Bt,...Qt,...At,...Kt);Q=Math.min(Q,It[0]),Ot=Math.min(Ot,It[1]),Tt=Math.max(Tt,It[2]),Ct=Math.max(Ct,It[3])}return[Q,Ot,Tt,Ct]},ft=new WeakSet,Ie=function(){return t(this,f)?Math.ceil(this.thickness*this.parentScale):0},K=new WeakSet,ge=function(Q=!1){if(this.isEmpty())return;if(!t(this,f)){q(this,U,oe).call(this);return}const Tt=q(this,Ht,bn).call(this),Ot=q(this,ft,Ie).call(this);at(this,g,Math.max(p.AnnotationEditor.MIN_SIZE,Tt[2]-Tt[0])),at(this,x,Math.max(p.AnnotationEditor.MIN_SIZE,Tt[3]-Tt[1]));const Ct=Math.ceil(Ot+t(this,g)*this.scaleFactor),Nt=Math.ceil(Ot+t(this,x)*this.scaleFactor),[Bt,Qt]=this.parentDimensions;this.width=Ct/Bt,this.height=Nt/Qt,this.setAspectRatio(Ct,Nt);const At=this.translationX,Kt=this.translationY;this.translationX=-Tt[0],this.translationY=-Tt[1],q(this,jt,pe).call(this),q(this,U,oe).call(this),at(this,v,Ct),at(this,l,Nt),this.setDims(Ct,Nt);const It=Q?Ot/this.scaleFactor/2:0;this.translate(At-this.translationX-It,Kt-this.translationY-It)},W(vt,pt),W(vt,xt),W(vt,Vt),ne(vt,"_defaultColor",null),ne(vt,"_defaultOpacity",1),ne(vt,"_defaultThickness",1),ne(vt,"_type","ink");let M=vt;s.InkEditor=M},(D,s,O)=>{var M,x,g,I,N,R,E,A,f,y,w,Ee,v,Se,d,Oe,b,_n,k,Qn,$,Zn,T,yn,rt,Ne,V,ts;Object.defineProperty(s,"__esModule",{value:!0}),s.StampEditor=void 0;var a=O(1),p=O(4),G=O(6),H=O(29);const mt=class mt extends p.AnnotationEditor{constructor(C){super({...C,name:"stampEditor"});W(this,w);W(this,v);W(this,d);W(this,b);W(this,k);W(this,$);W(this,T);W(this,rt);W(this,V);W(this,M,null);W(this,x,null);W(this,g,null);W(this,I,null);W(this,N,null);W(this,R,null);W(this,E,null);W(this,A,null);W(this,f,!1);W(this,y,!1);at(this,I,C.bitmapUrl),at(this,N,C.bitmapFile)}static initialize(C){p.AnnotationEditor.initialize(C)}static get supportedTypes(){const C=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,a.shadow)(this,"supportedTypes",C.map(n=>`image/${n}`))}static get supportedTypesStr(){return(0,a.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(C){return this.supportedTypes.includes(C)}static paste(C,n){n.pasteEditor(a.AnnotationEditorType.STAMP,{bitmapFile:C.getAsFile()})}remove(){var C,n;t(this,x)&&(at(this,M,null),this._uiManager.imageManager.deleteId(t(this,x)),(C=t(this,R))==null||C.remove(),at(this,R,null),(n=t(this,E))==null||n.disconnect(),at(this,E,null)),super.remove()}rebuild(){if(!this.parent){t(this,x)&&q(this,d,Oe).call(this);return}super.rebuild(),this.div!==null&&(t(this,x)&&q(this,d,Oe).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(t(this,g)||t(this,M)||t(this,I)||t(this,N))}get isResizable(){return!0}render(){if(this.div)return this.div;let C,n;if(this.width&&(C=this.x,n=this.y),super.render(),this.div.hidden=!0,t(this,M)?q(this,b,_n).call(this):q(this,d,Oe).call(this),this.width){const[o,i]=this.parentDimensions;this.setAt(C*o,n*i,this.width*o,this.height*i)}return this.div}static deserialize(C,n,o){if(C instanceof H.StampAnnotationElement)return null;const i=super.deserialize(C,n,o),{rect:h,bitmapUrl:u,bitmapId:S,isSvg:L,accessibilityData:U}=C;S&&o.imageManager.isValidId(S)?at(i,x,S):at(i,I,u),at(i,f,L);const[it,tt]=i.pageDimensions;return i.width=(h[2]-h[0])/it,i.height=(h[3]-h[1])/tt,U&&(i.altTextData=U),i}serialize(C=!1,n=null){if(this.isEmpty())return null;const o={annotationType:a.AnnotationEditorType.STAMP,bitmapId:t(this,x),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:t(this,f),structTreeParentId:this._structTreeParentId};if(C)return o.bitmapUrl=q(this,rt,Ne).call(this,!0),o.accessibilityData=this.altTextData,o;const{decorative:i,altText:h}=this.altTextData;if(!i&&h&&(o.accessibilityData={type:"Figure",alt:h}),n===null)return o;n.stamps||(n.stamps=new Map);const u=t(this,f)?(o.rect[2]-o.rect[0])*(o.rect[3]-o.rect[1]):null;if(!n.stamps.has(t(this,x)))n.stamps.set(t(this,x),{area:u,serialized:o}),o.bitmap=q(this,rt,Ne).call(this,!1);else if(t(this,f)){const S=n.stamps.get(t(this,x));u>S.area&&(S.area=u,S.serialized.bitmap.close(),S.serialized.bitmap=q(this,rt,Ne).call(this,!1))}return o}};M=new WeakMap,x=new WeakMap,g=new WeakMap,I=new WeakMap,N=new WeakMap,R=new WeakMap,E=new WeakMap,A=new WeakMap,f=new WeakMap,y=new WeakMap,w=new WeakSet,Ee=function(C,n=!1){if(!C){this.remove();return}at(this,M,C.bitmap),n||(at(this,x,C.id),at(this,f,C.isSvg)),q(this,b,_n).call(this)},v=new WeakSet,Se=function(){at(this,g,null),this._uiManager.enableWaiting(!1),t(this,R)&&this.div.focus()},d=new WeakSet,Oe=function(){if(t(this,x)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(t(this,x)).then(n=>q(this,w,Ee).call(this,n,!0)).finally(()=>q(this,v,Se).call(this));return}if(t(this,I)){const n=t(this,I);at(this,I,null),this._uiManager.enableWaiting(!0),at(this,g,this._uiManager.imageManager.getFromUrl(n).then(o=>q(this,w,Ee).call(this,o)).finally(()=>q(this,v,Se).call(this)));return}if(t(this,N)){const n=t(this,N);at(this,N,null),this._uiManager.enableWaiting(!0),at(this,g,this._uiManager.imageManager.getFromFile(n).then(o=>q(this,w,Ee).call(this,o)).finally(()=>q(this,v,Se).call(this)));return}const C=document.createElement("input");C.type="file",C.accept=mt.supportedTypesStr,at(this,g,new Promise(n=>{C.addEventListener("change",async()=>{if(!C.files||C.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const o=await this._uiManager.imageManager.getFromFile(C.files[0]);q(this,w,Ee).call(this,o)}n()}),C.addEventListener("cancel",()=>{this.remove(),n()})}).finally(()=>q(this,v,Se).call(this))),C.click()},b=new WeakSet,_n=function(){const{div:C}=this;let{width:n,height:o}=t(this,M);const[i,h]=this.pageDimensions,u=.75;if(this.width)n=this.width*i,o=this.height*h;else if(n>u*i||o>u*h){const it=Math.min(u*i/n,u*h/o);n*=it,o*=it}const[S,L]=this.parentDimensions;this.setDims(n*S/i,o*L/h),this._uiManager.enableWaiting(!1);const U=at(this,R,document.createElement("canvas"));C.append(U),C.hidden=!1,q(this,T,yn).call(this,n,o),q(this,V,ts).call(this),t(this,y)||(this.parent.addUndoableEditor(this),at(this,y,!0)),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton()},k=new WeakSet,Qn=function(C,n){var u;const[o,i]=this.parentDimensions;this.width=C/o,this.height=n/i,this.setDims(C,n),(u=this._initialOptions)!=null&&u.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,t(this,A)!==null&&clearTimeout(t(this,A)),at(this,A,setTimeout(()=>{at(this,A,null),q(this,T,yn).call(this,C,n)},200))},$=new WeakSet,Zn=function(C,n){const{width:o,height:i}=t(this,M);let h=o,u=i,S=t(this,M);for(;h>2*C||u>2*n;){const L=h,U=u;h>2*C&&(h=h>=16384?Math.floor(h/2)-1:Math.ceil(h/2)),u>2*n&&(u=u>=16384?Math.floor(u/2)-1:Math.ceil(u/2));const it=new OffscreenCanvas(h,u);it.getContext("2d").drawImage(S,0,0,L,U,0,0,h,u),S=it.transferToImageBitmap()}return S},T=new WeakSet,yn=function(C,n){C=Math.ceil(C),n=Math.ceil(n);const o=t(this,R);if(!o||o.width===C&&o.height===n)return;o.width=C,o.height=n;const i=t(this,f)?t(this,M):q(this,$,Zn).call(this,C,n),h=o.getContext("2d");h.filter=this._uiManager.hcmFilter,h.drawImage(i,0,0,i.width,i.height,0,0,C,n)},rt=new WeakSet,Ne=function(C){if(C){if(t(this,f)){const i=this._uiManager.imageManager.getSvgUrl(t(this,x));if(i)return i}const n=document.createElement("canvas");return{width:n.width,height:n.height}=t(this,M),n.getContext("2d").drawImage(t(this,M),0,0),n.toDataURL()}if(t(this,f)){const[n,o]=this.pageDimensions,i=Math.round(this.width*n*G.PixelsPerInch.PDF_TO_CSS_UNITS),h=Math.round(this.height*o*G.PixelsPerInch.PDF_TO_CSS_UNITS),u=new OffscreenCanvas(i,h);return u.getContext("2d").drawImage(t(this,M),0,0,t(this,M).width,t(this,M).height,0,0,i,h),u.transferToImageBitmap()}return structuredClone(t(this,M))},V=new WeakSet,ts=function(){at(this,E,new ResizeObserver(C=>{const n=C[0].contentRect;n.width&&n.height&&q(this,k,Qn).call(this,n.width,n.height)})),t(this,E).observe(this.div)},ne(mt,"_type","stamp");let ut=mt;s.StampEditor=ut}],__webpack_module_cache__={};function __w_pdfjs_require__(D){var s=__webpack_module_cache__[D];if(s!==void 0)return s.exports;var O=__webpack_module_cache__[D]={exports:{}};return __webpack_modules__[D](O,O.exports,__w_pdfjs_require__),O.exports}var __webpack_exports__={};return(()=>{var D=__webpack_exports__;Object.defineProperty(D,"__esModule",{value:!0}),Object.defineProperty(D,"AbortException",{enumerable:!0,get:function(){return s.AbortException}}),Object.defineProperty(D,"AnnotationEditorLayer",{enumerable:!0,get:function(){return G.AnnotationEditorLayer}}),Object.defineProperty(D,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return s.AnnotationEditorParamsType}}),Object.defineProperty(D,"AnnotationEditorType",{enumerable:!0,get:function(){return s.AnnotationEditorType}}),Object.defineProperty(D,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return H.AnnotationEditorUIManager}}),Object.defineProperty(D,"AnnotationLayer",{enumerable:!0,get:function(){return ut.AnnotationLayer}}),Object.defineProperty(D,"AnnotationMode",{enumerable:!0,get:function(){return s.AnnotationMode}}),Object.defineProperty(D,"CMapCompressionType",{enumerable:!0,get:function(){return s.CMapCompressionType}}),Object.defineProperty(D,"DOMSVGFactory",{enumerable:!0,get:function(){return a.DOMSVGFactory}}),Object.defineProperty(D,"FeatureTest",{enumerable:!0,get:function(){return s.FeatureTest}}),Object.defineProperty(D,"GlobalWorkerOptions",{enumerable:!0,get:function(){return M.GlobalWorkerOptions}}),Object.defineProperty(D,"ImageKind",{enumerable:!0,get:function(){return s.ImageKind}}),Object.defineProperty(D,"InvalidPDFException",{enumerable:!0,get:function(){return s.InvalidPDFException}}),Object.defineProperty(D,"MissingPDFException",{enumerable:!0,get:function(){return s.MissingPDFException}}),Object.defineProperty(D,"OPS",{enumerable:!0,get:function(){return s.OPS}}),Object.defineProperty(D,"PDFDataRangeTransport",{enumerable:!0,get:function(){return O.PDFDataRangeTransport}}),Object.defineProperty(D,"PDFDateString",{enumerable:!0,get:function(){return a.PDFDateString}}),Object.defineProperty(D,"PDFWorker",{enumerable:!0,get:function(){return O.PDFWorker}}),Object.defineProperty(D,"PasswordResponses",{enumerable:!0,get:function(){return s.PasswordResponses}}),Object.defineProperty(D,"PermissionFlag",{enumerable:!0,get:function(){return s.PermissionFlag}}),Object.defineProperty(D,"PixelsPerInch",{enumerable:!0,get:function(){return a.PixelsPerInch}}),Object.defineProperty(D,"PromiseCapability",{enumerable:!0,get:function(){return s.PromiseCapability}}),Object.defineProperty(D,"RenderingCancelledException",{enumerable:!0,get:function(){return a.RenderingCancelledException}}),Object.defineProperty(D,"SVGGraphics",{enumerable:!0,get:function(){return O.SVGGraphics}}),Object.defineProperty(D,"UnexpectedResponseException",{enumerable:!0,get:function(){return s.UnexpectedResponseException}}),Object.defineProperty(D,"Util",{enumerable:!0,get:function(){return s.Util}}),Object.defineProperty(D,"VerbosityLevel",{enumerable:!0,get:function(){return s.VerbosityLevel}}),Object.defineProperty(D,"XfaLayer",{enumerable:!0,get:function(){return x.XfaLayer}}),Object.defineProperty(D,"build",{enumerable:!0,get:function(){return O.build}}),Object.defineProperty(D,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return s.createValidAbsoluteUrl}}),Object.defineProperty(D,"getDocument",{enumerable:!0,get:function(){return O.getDocument}}),Object.defineProperty(D,"getFilenameFromUrl",{enumerable:!0,get:function(){return a.getFilenameFromUrl}}),Object.defineProperty(D,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return a.getPdfFilenameFromUrl}}),Object.defineProperty(D,"getXfaPageViewport",{enumerable:!0,get:function(){return a.getXfaPageViewport}}),Object.defineProperty(D,"isDataScheme",{enumerable:!0,get:function(){return a.isDataScheme}}),Object.defineProperty(D,"isPdfFile",{enumerable:!0,get:function(){return a.isPdfFile}}),Object.defineProperty(D,"loadScript",{enumerable:!0,get:function(){return a.loadScript}}),Object.defineProperty(D,"noContextMenu",{enumerable:!0,get:function(){return a.noContextMenu}}),Object.defineProperty(D,"normalizeUnicode",{enumerable:!0,get:function(){return s.normalizeUnicode}}),Object.defineProperty(D,"renderTextLayer",{enumerable:!0,get:function(){return p.renderTextLayer}}),Object.defineProperty(D,"setLayerDimensions",{enumerable:!0,get:function(){return a.setLayerDimensions}}),Object.defineProperty(D,"shadow",{enumerable:!0,get:function(){return s.shadow}}),Object.defineProperty(D,"updateTextLayer",{enumerable:!0,get:function(){return p.updateTextLayer}}),Object.defineProperty(D,"version",{enumerable:!0,get:function(){return O.version}});var s=__w_pdfjs_require__(1),O=__w_pdfjs_require__(2),a=__w_pdfjs_require__(6),p=__w_pdfjs_require__(26),G=__w_pdfjs_require__(27),H=__w_pdfjs_require__(5),ut=__w_pdfjs_require__(29),M=__w_pdfjs_require__(14),x=__w_pdfjs_require__(32)})(),__webpack_exports__})())})(pdf$1);var pdfExports=pdf$1.exports;const pdf=getDefaultExportFromCjs(pdfExports),pdfjsModule=_mergeNamespaces({__proto__:null,default:pdf},[pdfExports]),pdfjs="default"in pdfjsModule?pdf:pdfjsModule,pdfjs$1=pdfjs;var propTypes={exports:{}},ReactPropTypesSecret$1="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ReactPropTypesSecret_1=ReactPropTypesSecret$1,ReactPropTypesSecret=ReactPropTypesSecret_1;function emptyFunction(){}function emptyFunctionWithReset(){}emptyFunctionWithReset.resetWarningCache=emptyFunction;var factoryWithThrowingShims=function(){function D(a,p,G,H,ut,M){if(M!==ReactPropTypesSecret){var x=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw x.name="Invariant Violation",x}}D.isRequired=D;function s(){return D}var O={array:D,bigint:D,bool:D,func:D,number:D,object:D,string:D,symbol:D,any:D,arrayOf:s,element:D,elementType:D,instanceOf:s,node:D,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:emptyFunctionWithReset,resetWarningCache:emptyFunction};return O.PropTypes=O,O};propTypes.exports=factoryWithThrowingShims();var propTypesExports=propTypes.exports;const PropTypes=getDefaultExportFromCjs(propTypesExports);var __spreadArray=globalThis&&globalThis.__spreadArray||function(D,s,O){if(O||arguments.length===2)for(var a=0,p=s.length,G;a<p;a++)(G||!(a in s))&&(G||(G=Array.prototype.slice.call(s,0,a)),G[a]=s[a]);return D.concat(G||Array.prototype.slice.call(s))},clipboardEvents=["onCopy","onCut","onPaste"],compositionEvents=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],focusEvents=["onFocus","onBlur"],formEvents=["onInput","onInvalid","onReset","onSubmit"],imageEvents=["onLoad","onError"],keyboardEvents=["onKeyDown","onKeyPress","onKeyUp"],mediaEvents=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],mouseEvents=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],dragEvents=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],selectionEvents=["onSelect"],touchEvents=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],pointerEvents=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],uiEvents=["onScroll"],wheelEvents=["onWheel"],animationEvents=["onAnimationStart","onAnimationEnd","onAnimationIteration"],transitionEvents=["onTransitionEnd"],otherEvents=["onToggle"],changeEvents=["onChange"],allEvents=__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray([],clipboardEvents,!0),compositionEvents,!0),focusEvents,!0),formEvents,!0),imageEvents,!0),keyboardEvents,!0),mediaEvents,!0),mouseEvents,!0),dragEvents,!0),selectionEvents,!0),touchEvents,!0),pointerEvents,!0),uiEvents,!0),wheelEvents,!0),animationEvents,!0),transitionEvents,!0),changeEvents,!0),otherEvents,!0);function makeEventProps(D,s){var O={};return allEvents.forEach(function(a){var p=D[a];p&&(s?O[a]=function(G){return p(G,s(a))}:O[a]=p)}),O}function makeCancellablePromise(D){var s=!1,O=new Promise(function(a,p){D.then(function(G){return!s&&a(G)}).catch(function(G){return!s&&p(G)})});return{promise:O,cancel:function(){s=!0}}}function r(D){var s,O,a="";if(typeof D=="string"||typeof D=="number")a+=D;else if(typeof D=="object")if(Array.isArray(D))for(s=0;s<D.length;s++)D[s]&&(O=r(D[s]))&&(a&&(a+=" "),a+=O);else for(s in D)D[s]&&(a&&(a+=" "),a+=s);return a}function clsx(){for(var D,s,O=0,a="";O<arguments.length;)(D=arguments[O++])&&(s=r(D))&&(a&&(a+=" "),a+=s);return a}var isProduction=!0,prefix="Invariant failed";function invariant(D,s){if(!D){if(isProduction)throw new Error(prefix);var O=typeof s=="function"?s():s,a=O?"".concat(prefix,": ").concat(O):prefix;throw new Error(a)}}function warning(D,s){}const DocumentContext=reactExports.createContext(null);function Message({children:D,type:s}){return React.createElement("div",{className:`react-pdf__message react-pdf__message--${s}`},D)}const DEFAULT_LINK_REL="noopener noreferrer nofollow";class LinkService{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(s){this.pdfDocument=s}setViewer(s){this.pdfViewer=s}setExternalLinkRel(s){this.externalLinkRel=s}setExternalLinkTarget(s){this.externalLinkTarget=s}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return invariant(this.pdfViewer,"PDF viewer is not initialized."),this.pdfViewer.currentPageNumber||0}set page(s){invariant(this.pdfViewer,"PDF viewer is not initialized."),this.pdfViewer.currentPageNumber=s}get rotation(){return 0}set rotation(s){}goToDestination(s){return new Promise(O=>{invariant(this.pdfDocument,"PDF document not loaded."),invariant(s,"Destination is not specified."),typeof s=="string"?this.pdfDocument.getDestination(s).then(O):Array.isArray(s)?O(s):s.then(O)}).then(O=>{invariant(Array.isArray(O),`"${O}" is not a valid destination array.`);const a=O[0];new Promise(p=>{invariant(this.pdfDocument,"PDF document not loaded."),a instanceof Object?this.pdfDocument.getPageIndex(a).then(G=>{p(G)}).catch(()=>{invariant(!1,`"${a}" is not a valid page reference.`)}):typeof a=="number"?p(a):invariant(!1,`"${a}" is not a valid destination reference.`)}).then(p=>{const G=p+1;invariant(this.pdfViewer,"PDF viewer is not initialized."),invariant(G>=1&&G<=this.pagesCount,`"${G}" is not a valid page number.`),this.pdfViewer.scrollPageIntoView({dest:O,pageIndex:p,pageNumber:G})})})}navigateTo(s){this.goToDestination(s)}goToPage(s){const O=s-1;invariant(this.pdfViewer,"PDF viewer is not initialized."),invariant(s>=1&&s<=this.pagesCount,`"${s}" is not a valid page number.`),this.pdfViewer.scrollPageIntoView({pageIndex:O,pageNumber:s})}addLinkAttributes(s,O,a){s.href=O,s.rel=this.externalLinkRel||DEFAULT_LINK_REL,s.target=a?"_blank":this.externalLinkTarget||""}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}setHash(){}executeNamedAction(){}cachePageRef(){}isPageVisible(){return!0}isPageCached(){return!0}executeSetOCGState(){}}const PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},PasswordResponses$1=PasswordResponses,isBrowser=typeof document<"u",isLocalFileSystem=isBrowser&&window.location.protocol==="file:";function isDefined(D){return typeof D<"u"}function isProvided(D){return isDefined(D)&&D!==null}function isString(D){return typeof D=="string"}function isArrayBuffer(D){return D instanceof ArrayBuffer}function isBlob(D){return invariant(isBrowser,"isBlob can only be used in a browser environment"),D instanceof Blob}function isDataURI(D){return isString(D)&&/^data:/.test(D)}function dataURItoByteString(D){invariant(isDataURI(D),"Invalid data URI.");const[s="",O=""]=D.split(",");return s.split(";").indexOf("base64")!==-1?atob(O):unescape(O)}function getDevicePixelRatio(){return isBrowser&&window.devicePixelRatio||1}function displayWorkerWarning(){}function cancelRunningTask(D){D&&D.cancel&&D.cancel()}function makePageCallback(D,s){return Object.defineProperty(D,"width",{get(){return this.view[2]*s},configurable:!0}),Object.defineProperty(D,"height",{get(){return this.view[3]*s},configurable:!0}),Object.defineProperty(D,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(D,"originalHeight",{get(){return this.view[3]},configurable:!0}),D}function isCancelException(D){return D.name==="RenderingCancelledException"}function loadFromFile(D){return new Promise((s,O)=>{const a=new FileReader;a.onload=()=>{if(!a.result)return O(new Error("Error while reading a file."));s(a.result)},a.onerror=p=>{if(!p.target)return O(new Error("Error while reading a file."));const{error:G}=p.target;if(!G)return O(new Error("Error while reading a file."));switch(G.code){case G.NOT_FOUND_ERR:return O(new Error("Error while reading a file: File not found."));case G.SECURITY_ERR:return O(new Error("Error while reading a file: Security error."));case G.ABORT_ERR:return O(new Error("Error while reading a file: Aborted."));default:return O(new Error("Error while reading a file."))}},a.readAsArrayBuffer(D)})}function reducer(D,s){switch(s.type){case"RESOLVE":return{value:s.value,error:void 0};case"REJECT":return{value:!1,error:s.error};case"RESET":return{value:void 0,error:void 0};default:return D}}function useResolver(){return reactExports.useReducer(reducer,{value:void 0,error:void 0})}const{PDFDataRangeTransport:PDFDataRangeTransport$1}=pdfjs$1,eventProps=(()=>{const D={};return allEvents.forEach(s=>{D[s]=PropTypes.func}),D})(),isTypedArray=PropTypes.oneOfType([PropTypes.instanceOf(Int8Array),PropTypes.instanceOf(Uint8Array),PropTypes.instanceOf(Uint8ClampedArray),PropTypes.instanceOf(Int16Array),PropTypes.instanceOf(Uint16Array),PropTypes.instanceOf(Int32Array),PropTypes.instanceOf(Uint32Array),PropTypes.instanceOf(Float32Array),PropTypes.instanceOf(Float64Array)]),fileTypes=[PropTypes.string,PropTypes.instanceOf(ArrayBuffer),PropTypes.shape({data:PropTypes.oneOfType([PropTypes.string,PropTypes.instanceOf(ArrayBuffer),PropTypes.arrayOf(PropTypes.number.isRequired),isTypedArray]).isRequired}),PropTypes.shape({range:PropTypes.instanceOf(PDFDataRangeTransport$1).isRequired}),PropTypes.shape({url:PropTypes.string.isRequired})];typeof Blob<"u"&&fileTypes.push(PropTypes.instanceOf(Blob));const isClassName=PropTypes.oneOfType([PropTypes.string,PropTypes.arrayOf(PropTypes.string)]),isFile=PropTypes.oneOfType(fileTypes);PropTypes.instanceOf(LinkService);PropTypes.oneOf(["_self","_blank","_parent","_top"]);PropTypes.shape({commonObjs:PropTypes.shape({}).isRequired,getAnnotations:PropTypes.func.isRequired,getTextContent:PropTypes.func.isRequired,getViewport:PropTypes.func.isRequired,render:PropTypes.func.isRequired});const isPageIndex=function D(s,O,a){const{[O]:p,pageNumber:G,pdf:H}=s;if(!isDefined(H))return null;if(isDefined(p)){if(typeof p!="number")return new Error(`\`${O}\` of type \`${typeof p}\` supplied to \`${a}\`, expected \`number\`.`);if(p<0)return new Error(`Expected \`${O}\` to be greater or equal to 0.`);const{numPages:ut}=H;if(p+1>ut)return new Error(`Expected \`${O}\` to be less or equal to ${ut-1}.`)}else if(!isDefined(G))return new Error(`\`${O}\` not supplied. Either pageIndex or pageNumber must be supplied to \`${a}\`.`);return null},isPageNumber=function D(s,O,a){const{[O]:p,pageIndex:G,pdf:H}=s;if(!isDefined(H))return null;if(isDefined(p)){if(typeof p!="number")return new Error(`\`${O}\` of type \`${typeof p}\` supplied to \`${a}\`, expected \`number\`.`);if(p<1)return new Error(`Expected \`${O}\` to be greater or equal to 1.`);const{numPages:ut}=H;if(p>ut)return new Error(`Expected \`${O}\` to be less or equal to ${ut}.`)}else if(!isDefined(G))return new Error(`\`${O}\` not supplied. Either pageIndex or pageNumber must be supplied to \`${a}\`.`);return null},isPdf=PropTypes.oneOfType([PropTypes.any,PropTypes.oneOf([!1])]),isRef=PropTypes.oneOfType([PropTypes.func,PropTypes.exact({current:PropTypes.any})]),isRenderMode=PropTypes.oneOf(["canvas","custom","none","svg"]),isRotate=PropTypes.oneOf([0,90,180,270]);var __awaiter=globalThis&&globalThis.__awaiter||function(D,s,O,a){function p(G){return G instanceof O?G:new O(function(H){H(G)})}return new(O||(O=Promise))(function(G,H){function ut(g){try{x(a.next(g))}catch(I){H(I)}}function M(g){try{x(a.throw(g))}catch(I){H(I)}}function x(g){g.done?G(g.value):p(g.value).then(ut,M)}x((a=a.apply(D,s||[])).next())})},__rest$1=globalThis&&globalThis.__rest||function(D,s){var O={};for(var a in D)Object.prototype.hasOwnProperty.call(D,a)&&s.indexOf(a)<0&&(O[a]=D[a]);if(D!=null&&typeof Object.getOwnPropertySymbols=="function")for(var p=0,a=Object.getOwnPropertySymbols(D);p<a.length;p++)s.indexOf(a[p])<0&&Object.prototype.propertyIsEnumerable.call(D,a[p])&&(O[a[p]]=D[a[p]]);return O};const{PDFDataRangeTransport}=pdfjs$1,defaultOnPassword=(D,s)=>{switch(s){case PasswordResponses$1.NEED_PASSWORD:{const O=prompt("Enter the password to open this PDF file.");D(O);break}case PasswordResponses$1.INCORRECT_PASSWORD:{const O=prompt("Invalid password. Please try again.");D(O);break}}},Document=reactExports.forwardRef(function D(s,O){var{children:a,className:p,error:G="Failed to load PDF file.",externalLinkRel:H,externalLinkTarget:ut,file:M,inputRef:x,imageResourcesPath:g,loading:I="Loading PDF…",noData:N="No PDF file specified.",onItemClick:R,onLoadError:E,onLoadProgress:A,onLoadSuccess:f,onPassword:y=defaultOnPassword,onSourceError:w,onSourceSuccess:P,options:v,renderMode:l,rotate:d}=s,F=__rest$1(s,["children","className","error","externalLinkRel","externalLinkTarget","file","inputRef","imageResourcesPath","loading","noData","onItemClick","onLoadError","onLoadProgress","onLoadSuccess","onPassword","onSourceError","onSourceSuccess","options","renderMode","rotate"]);const[b,c]=useResolver(),{value:k,error:m}=b,[$,z]=useResolver(),{value:T,error:Y}=$,rt=reactExports.useRef(new LinkService),lt=reactExports.useRef([]),V=reactExports.useRef({scrollPageIntoView:et=>{const{dest:ct,pageNumber:bt,pageIndex:dt=bt-1}=et;if(R){R({dest:ct,pageIndex:dt,pageNumber:bt});return}const Ft=lt.current[dt];if(Ft){Ft.scrollIntoView();return}}});reactExports.useImperativeHandle(O,()=>({linkService:rt,pages:lt,viewer:V}),[]);function ht(){P&&P()}function mt(){m&&(m.toString(),w&&w(m))}function Et(){c({type:"RESET"})}reactExports.useEffect(Et,[M,c]);const Pt=reactExports.useCallback(()=>__awaiter(this,void 0,void 0,function*(){if(!M)return null;if(typeof M=="string")return isDataURI(M)?{data:dataURItoByteString(M)}:{url:M};if(M instanceof PDFDataRangeTransport)return{range:M};if(isArrayBuffer(M))return{data:M};if(isBrowser&&isBlob(M))return{data:yield loadFromFile(M)};if(invariant(typeof M=="object","Invalid parameter in file, need either Uint8Array, string or a parameter object"),invariant("data"in M||"range"in M||"url"in M,"Invalid parameter object: need either .data, .range or .url"),"url"in M&&typeof M.url=="string"&&isDataURI(M.url)){const{url:et}=M,ct=__rest$1(M,["url"]),bt=dataURItoByteString(et);return Object.assign({data:bt},ct)}return M}),[M]);reactExports.useEffect(()=>{const et=makeCancellablePromise(Pt());return et.promise.then(ct=>{c({type:"RESOLVE",value:ct})}).catch(ct=>{c({type:"REJECT",error:ct})}),()=>{cancelRunningTask(et)}},[Pt,c]),reactExports.useEffect(()=>{if(!(typeof k>"u")){if(k===!1){mt();return}ht()}},[k]);function C(){T&&(f&&f(T),lt.current=new Array(T.numPages),rt.current.setDocument(T))}function n(){Y&&(Y.toString(),E&&E(Y))}function o(){z({type:"RESET"})}reactExports.useEffect(o,[z,k]);function i(){if(!k)return;const et=v?Object.assign(Object.assign({},k),v):k,ct=pdfjs$1.getDocument(et);A&&(ct.onProgress=A),y&&(ct.onPassword=y);const bt=ct;return bt.promise.then(dt=>{z({type:"RESOLVE",value:dt})}).catch(dt=>{bt.destroyed||z({type:"REJECT",error:dt})}),()=>{bt.destroy()}}reactExports.useEffect(i,[v,z,k]),reactExports.useEffect(()=>{if(!(typeof T>"u")){if(T===!1){n();return}C()}},[T]);function h(){rt.current.setViewer(V.current),rt.current.setExternalLinkRel(H),rt.current.setExternalLinkTarget(ut)}reactExports.useEffect(h,[H,ut]);function u(et,ct){lt.current[et]=ct}function S(et){delete lt.current[et]}const L=reactExports.useMemo(()=>({imageResourcesPath:g,linkService:rt.current,onItemClick:R,pdf:T,registerPage:u,renderMode:l,rotate:d,unregisterPage:S}),[g,R,T,l,d]),U=reactExports.useMemo(()=>makeEventProps(F,()=>T),[F,T]);function it(){return React.createElement(DocumentContext.Provider,{value:L},a)}function tt(){return M?T==null?React.createElement(Message,{type:"loading"},typeof I=="function"?I():I):T===!1?React.createElement(Message,{type:"error"},typeof G=="function"?G():G):it():React.createElement(Message,{type:"no-data"},typeof N=="function"?N():N)}return React.createElement("div",Object.assign({className:clsx("react-pdf__Document",p),ref:x,style:{"--scale-factor":"1"}},U),tt())}),isFunctionOrNode$1=PropTypes.oneOfType([PropTypes.func,PropTypes.node]);Document.propTypes=Object.assign(Object.assign({},eventProps),{children:PropTypes.node,className:isClassName,error:isFunctionOrNode$1,externalLinkRel:PropTypes.string,externalLinkTarget:PropTypes.oneOf(["_self","_blank","_parent","_top"]),file:isFile,imageResourcesPath:PropTypes.string,inputRef:isRef,loading:isFunctionOrNode$1,noData:isFunctionOrNode$1,onItemClick:PropTypes.func,onLoadError:PropTypes.func,onLoadProgress:PropTypes.func,onLoadSuccess:PropTypes.func,onPassword:PropTypes.func,onSourceError:PropTypes.func,onSourceSuccess:PropTypes.func,options:PropTypes.shape({canvasFactory:PropTypes.any,canvasMaxAreaInBytes:PropTypes.number,cMapPacked:PropTypes.bool,CMapReaderFactory:PropTypes.any,cMapUrl:PropTypes.string,disableAutoFetch:PropTypes.bool,disableFontFace:PropTypes.bool,disableRange:PropTypes.bool,disableStream:PropTypes.bool,docBaseUrl:PropTypes.string,enableXfa:PropTypes.bool,filterFactory:PropTypes.any,fontExtraProperties:PropTypes.bool,httpHeaders:PropTypes.object,isEvalSupported:PropTypes.bool,isOffscreenCanvasSupported:PropTypes.bool,length:PropTypes.number,maxImageSize:PropTypes.number,ownerDocument:PropTypes.any,password:PropTypes.string,pdfBug:PropTypes.bool,rangeChunkSize:PropTypes.number,StandardFontDataFactory:PropTypes.any,standardFontDataUrl:PropTypes.string,stopAtErrors:PropTypes.bool,useSystemFonts:PropTypes.bool,useWorkerFetch:PropTypes.bool,verbosity:PropTypes.number,withCredentials:PropTypes.bool,worker:PropTypes.any}),rotate:PropTypes.number});const Document$1=Document;function useDocumentContext(){return reactExports.useContext(DocumentContext)}function mergeRefs(){for(var D=[],s=0;s<arguments.length;s++)D[s]=arguments[s];var O=D.filter(Boolean);if(O.length<=1){var a=O[0];return a||null}return function(G){O.forEach(function(H){typeof H=="function"?H(G):H&&(H.current=G)})}}const PageContext=reactExports.createContext(null),PDF_ROLE_TO_HTML_ROLE={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},HEADING_PATTERN=/^H(\d+)$/;function isPdfRole(D){return D in PDF_ROLE_TO_HTML_ROLE}function isStructTreeNode(D){return"children"in D}function isStructTreeNodeWithOnlyContentChild(D){return isStructTreeNode(D)?D.children.length===1&&0 in D.children&&"id"in D.children[0]:!1}function getRoleAttributes(D){const s={};if(isStructTreeNode(D)){const{role:O}=D,a=O.match(HEADING_PATTERN);if(a)s.role="heading",s["aria-level"]=Number(a[1]);else if(isPdfRole(O)){const p=PDF_ROLE_TO_HTML_ROLE[O];p&&(s.role=p)}}return s}function getBaseAttributes(D){const s={};if(isStructTreeNode(D)){if(D.alt!==void 0&&(s["aria-label"]=D.alt),D.lang!==void 0&&(s.lang=D.lang),isStructTreeNodeWithOnlyContentChild(D)){const[O]=D.children;if(O){const a=getBaseAttributes(O);return Object.assign(Object.assign({},s),a)}}}else"id"in D&&(s["aria-owns"]=D.id);return s}function getAttributes(D){return D?Object.assign(Object.assign({},getRoleAttributes(D)),getBaseAttributes(D)):null}function StructTreeItem({className:D,node:s}){const O=reactExports.useMemo(()=>getAttributes(s),[s]),a=reactExports.useMemo(()=>!isStructTreeNode(s)||isStructTreeNodeWithOnlyContentChild(s)?null:s.children.map((p,G)=>React.createElement(StructTreeItem,{key:G,node:p})),[s]);return React.createElement("span",Object.assign({className:D},O),a)}function usePageContext(){return reactExports.useContext(PageContext)}function StructTree(){const D=usePageContext();invariant(D,"Unable to find Page context.");const{onGetStructTreeError:s,onGetStructTreeSuccess:O}=D,[a,p]=useResolver(),{value:G,error:H}=a,{customTextRenderer:ut,page:M}=D;function x(){G&&O&&O(G)}function g(){H&&(H.toString(),s&&s(H))}function I(){p({type:"RESET"})}reactExports.useEffect(I,[p,M]);function N(){if(ut||!M)return;const R=makeCancellablePromise(M.getStructTree()),E=R;return R.promise.then(A=>{p({type:"RESOLVE",value:A})}).catch(A=>{p({type:"REJECT",error:A})}),()=>cancelRunningTask(E)}return reactExports.useEffect(N,[ut,M,p]),reactExports.useEffect(()=>{if(G!==void 0){if(G===!1){g();return}x()}},[G]),G?React.createElement(StructTreeItem,{className:"react-pdf__Page__structTree structTree",node:G}):null}const ANNOTATION_MODE=pdfjs$1.AnnotationMode;function PageCanvas(D){const s=usePageContext();invariant(s,"Unable to find Page context.");const O=Object.assign(Object.assign({},s),D),{_className:a,canvasBackground:p,devicePixelRatio:G=getDevicePixelRatio(),onRenderError:H,onRenderSuccess:ut,page:M,renderForms:x,renderTextLayer:g,rotate:I,scale:N}=O,{canvasRef:R}=D;invariant(M,"Attempted to render page canvas, but no page was specified.");const E=reactExports.useRef(null);function A(){M&&ut&&ut(makePageCallback(M,N))}function f(l){isCancelException(l)||(l.toString(),H&&H(l))}const y=reactExports.useMemo(()=>M.getViewport({scale:N*G,rotation:I}),[G,M,I,N]),w=reactExports.useMemo(()=>M.getViewport({scale:N,rotation:I}),[M,I,N]);function P(){if(!M)return;M.cleanup();const{current:l}=E;if(!l)return;l.width=y.width,l.height=y.height,l.style.width=`${Math.floor(w.width)}px`,l.style.height=`${Math.floor(w.height)}px`,l.style.visibility="hidden";const d={annotationMode:x?ANNOTATION_MODE.ENABLE_FORMS:ANNOTATION_MODE.ENABLE,canvasContext:l.getContext("2d",{alpha:!1}),viewport:y};p&&(d.background=p);const F=M.render(d),b=F;return F.promise.then(()=>{l.style.visibility="",A()}).catch(f),()=>cancelRunningTask(b)}reactExports.useEffect(P,[p,E,G,M,x,y,w]);const v=reactExports.useCallback(()=>{const{current:l}=E;l&&(l.width=0,l.height=0)},[E]);return reactExports.useEffect(()=>v,[v]),React.createElement("canvas",{className:`${a}__canvas`,dir:"ltr",ref:mergeRefs(R,E),style:{display:"block",userSelect:"none"}},g?React.createElement(StructTree,null):null)}function PageSVG(){const D=usePageContext();invariant(D,"Unable to find Page context.");const{_className:s,onRenderSuccess:O,onRenderError:a,page:p,rotate:G,scale:H}=D;invariant(p,"Attempted to render page SVG, but no page was specified.");const[ut,M]=useResolver(),{value:x,error:g}=ut;function I(){p&&O&&O(makePageCallback(p,H))}function N(){g&&(isCancelException(g)||(g.toString(),a&&a(g)))}const R=reactExports.useMemo(()=>p.getViewport({scale:H,rotation:G}),[p,G,H]);function E(){M({type:"RESET"})}reactExports.useEffect(E,[p,M,R]);function A(){if(!p)return;const P=makeCancellablePromise(p.getOperatorList());return P.promise.then(v=>{new pdfjs$1.SVGGraphics(p.commonObjs,p.objs).getSVG(v,R).then(d=>{if(!(d instanceof SVGElement))throw new Error("getSVG returned unexpected result.");M({type:"RESOLVE",value:d})}).catch(d=>{M({type:"REJECT",error:d})})}).catch(v=>{M({type:"REJECT",error:v})}),()=>cancelRunningTask(P)}reactExports.useEffect(A,[p,M,R]),reactExports.useEffect(()=>{if(x!==void 0){if(x===!1){N();return}I()}},[x]);function f(P){if(!P||!x)return;P.firstElementChild||P.appendChild(x);const{width:v,height:l}=R;x.setAttribute("width",`${v}`),x.setAttribute("height",`${l}`)}const{width:y,height:w}=R;return React.createElement("div",{className:`${s}__svg`,ref:P=>f(P),style:{display:"block",backgroundColor:"white",overflow:"hidden",width:y,height:w,userSelect:"none"}})}function isTextItem(D){return"str"in D}function TextLayer$1(){const D=usePageContext();invariant(D,"Unable to find Page context.");const{customTextRenderer:s,onGetTextError:O,onGetTextSuccess:a,onRenderTextLayerError:p,onRenderTextLayerSuccess:G,page:H,pageIndex:ut,pageNumber:M,rotate:x,scale:g}=D;invariant(H,"Attempted to load page text content, but no page was specified.");const[I,N]=useResolver(),{value:R,error:E}=I,A=reactExports.useRef(null),f=reactExports.useRef();parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10);function y(){R&&a&&a(R)}function w(){E&&(E.toString(),O&&O(E))}function P(){N({type:"RESET"})}reactExports.useEffect(P,[H,N]);function v(){if(!H)return;const m=makeCancellablePromise(H.getTextContent()),$=m;return m.promise.then(z=>{N({type:"RESOLVE",value:z})}).catch(z=>{N({type:"REJECT",error:z})}),()=>cancelRunningTask($)}reactExports.useEffect(v,[H,N]),reactExports.useEffect(()=>{if(R!==void 0){if(R===!1){w();return}y()}},[R]);const l=reactExports.useCallback(()=>{G&&G()},[G]),d=reactExports.useCallback(m=>{m.toString(),p&&p(m)},[p]);function F(){const m=f.current;m&&m.classList.add("active")}function b(){const m=f.current;m&&m.classList.remove("active")}const c=reactExports.useMemo(()=>H.getViewport({scale:g,rotation:x}),[H,x,g]);function k(){if(!H||!R)return;const{current:m}=A;if(!m)return;m.innerHTML="";const $=H.streamTextContent({includeMarkedContent:!0}),z={container:m,textContentSource:$,viewport:c},T=pdfjs$1.renderTextLayer(z),Y=T;return T.promise.then(()=>{const rt=document.createElement("div");rt.className="endOfContent",m.append(rt),f.current=rt;const lt=m.querySelectorAll('[role="presentation"]');if(s){let V=0;R.items.forEach((ht,mt)=>{if(!isTextItem(ht))return;const Et=lt[V];if(!Et)return;const Pt=s(Object.assign({pageIndex:ut,pageNumber:M,itemIndex:mt},ht));Et.innerHTML=Pt,V+=ht.str&&ht.hasEOL?2:1})}l()}).catch(d),()=>cancelRunningTask(Y)}return reactExports.useLayoutEffect(k,[s,d,l,H,ut,M,R,c]),React.createElement("div",{className:clsx("react-pdf__Page__textContent","textLayer"),onMouseUp:b,onMouseDown:F,ref:A})}function AnnotationLayer$1(){const D=useDocumentContext();invariant(D,"Unable to find Document context. Did you wrap <Page /> in <Document />?");const s=usePageContext();invariant(s,"Unable to find Page context.");const O=Object.assign(Object.assign({},D),s),{imageResourcesPath:a,linkService:p,onGetAnnotationsError:G,onGetAnnotationsSuccess:H,onRenderAnnotationLayerError:ut,onRenderAnnotationLayerSuccess:M,page:x,pdf:g,renderForms:I,rotate:N,scale:R=1}=O;invariant(x,"Attempted to load page annotations, but no page was specified.");const[E,A]=useResolver(),{value:f,error:y}=E,w=reactExports.useRef(null);parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10);function P(){f&&H&&H(f)}function v(){y&&(y.toString(),G&&G(y))}function l(){A({type:"RESET"})}reactExports.useEffect(l,[A,x]);function d(){if(!x)return;const m=makeCancellablePromise(x.getAnnotations()),$=m;return m.promise.then(z=>{A({type:"RESOLVE",value:z})}).catch(z=>{A({type:"REJECT",error:z})}),()=>{cancelRunningTask($)}}reactExports.useEffect(d,[A,x,I]),reactExports.useEffect(()=>{if(f!==void 0){if(f===!1){v();return}P()}},[f]);function F(){M&&M()}function b(m){ut&&ut(m)}const c=reactExports.useMemo(()=>x.getViewport({scale:R,rotation:N}),[x,N,R]);function k(){if(!g||!x||!f)return;const{current:m}=w;if(!m)return;const $=c.clone({dontFlip:!0}),z={accessibilityManager:null,annotationCanvasMap:null,div:m,l10n:null,page:x,viewport:$},T={annotations:f,annotationStorage:g.annotationStorage,div:m,downloadManager:null,imageResourcesPath:a,linkService:p,page:x,renderForms:I,viewport:$};m.innerHTML="";try{new pdfjs$1.AnnotationLayer(z).render(T),F()}catch(Y){b(Y)}return()=>{}}return reactExports.useEffect(k,[f,a,p,x,I,c]),React.createElement("div",{className:clsx("react-pdf__Page__annotations","annotationLayer"),ref:w})}var __rest=globalThis&&globalThis.__rest||function(D,s){var O={};for(var a in D)Object.prototype.hasOwnProperty.call(D,a)&&s.indexOf(a)<0&&(O[a]=D[a]);if(D!=null&&typeof Object.getOwnPropertySymbols=="function")for(var p=0,a=Object.getOwnPropertySymbols(D);p<a.length;p++)s.indexOf(a[p])<0&&Object.prototype.propertyIsEnumerable.call(D,a[p])&&(O[a[p]]=D[a[p]]);return O};const defaultScale=1,Page=function D(s){const O=useDocumentContext();invariant(O,"Unable to find Document context. Did you wrap <Page /> in <Document />?");const a=Object.assign(Object.assign({},O),s),{_className:p="react-pdf__Page",_enableRegisterUnregisterPage:G=!0,canvasBackground:H,canvasRef:ut,children:M,className:x,customRenderer:g,customTextRenderer:I,devicePixelRatio:N,error:R="Failed to load the page.",height:E,inputRef:A,loading:f="Loading page…",noData:y="No page specified.",onGetAnnotationsError:w,onGetAnnotationsSuccess:P,onGetStructTreeError:v,onGetStructTreeSuccess:l,onGetTextError:d,onGetTextSuccess:F,onLoadError:b,onLoadSuccess:c,onRenderAnnotationLayerError:k,onRenderAnnotationLayerSuccess:m,onRenderError:$,onRenderSuccess:z,onRenderTextLayerError:T,onRenderTextLayerSuccess:Y,pageIndex:rt,pageNumber:lt,pdf:V,registerPage:ht,renderAnnotationLayer:mt=!0,renderForms:Et=!1,renderMode:Pt="canvas",renderTextLayer:C=!0,rotate:n,scale:o=defaultScale,unregisterPage:i,width:h}=a,u=__rest(a,["_className","_enableRegisterUnregisterPage","canvasBackground","canvasRef","children","className","customRenderer","customTextRenderer","devicePixelRatio","error","height","inputRef","loading","noData","onGetAnnotationsError","onGetAnnotationsSuccess","onGetStructTreeError","onGetStructTreeSuccess","onGetTextError","onGetTextSuccess","onLoadError","onLoadSuccess","onRenderAnnotationLayerError","onRenderAnnotationLayerSuccess","onRenderError","onRenderSuccess","onRenderTextLayerError","onRenderTextLayerSuccess","pageIndex","pageNumber","pdf","registerPage","renderAnnotationLayer","renderForms","renderMode","renderTextLayer","rotate","scale","unregisterPage","width"]),[S,L]=useResolver(),{value:U,error:it}=S,tt=reactExports.useRef(null);invariant(V,"Attempted to load a page, but no document was specified.");const et=isProvided(lt)?lt-1:rt??null,ct=lt??(isProvided(rt)?rt+1:null),bt=n??(U?U.rotate:null),dt=reactExports.useMemo(()=>{if(!U)return null;let Gt=1;const Ht=o??defaultScale;if(h||E){const Xt=U.getViewport({scale:1,rotation:bt});h?Gt=h/Xt.width:E&&(Gt=E/Xt.height)}return Ht*Gt},[E,U,bt,o,h]);function Ft(){return()=>{isProvided(et)&&G&&i&&i(et)}}reactExports.useEffect(Ft,[G,V,et,i]);function jt(){if(c){if(!U||!dt)return;c(makePageCallback(U,dt))}if(G&&ht){if(!isProvided(et)||!tt.current)return;ht(et,tt.current)}}function St(){it&&(it.toString(),b&&b(it))}function Lt(){L({type:"RESET"})}reactExports.useEffect(Lt,[L,V,et]);function gt(){if(!V||!ct)return;const Gt=makeCancellablePromise(V.getPage(ct)),Ht=Gt;return Gt.promise.then(Xt=>{L({type:"RESOLVE",value:Xt})}).catch(Xt=>{L({type:"REJECT",error:Xt})}),()=>cancelRunningTask(Ht)}reactExports.useEffect(gt,[L,V,et,ct,ht]),reactExports.useEffect(()=>{if(U!==void 0){if(U===!1){St();return}jt()}},[U,dt]);const nt=reactExports.useMemo(()=>U&&isProvided(et)&&ct&&isProvided(bt)&&isProvided(dt)?{_className:p,canvasBackground:H,customTextRenderer:I,devicePixelRatio:N,onGetAnnotationsError:w,onGetAnnotationsSuccess:P,onGetStructTreeError:v,onGetStructTreeSuccess:l,onGetTextError:d,onGetTextSuccess:F,onRenderAnnotationLayerError:k,onRenderAnnotationLayerSuccess:m,onRenderError:$,onRenderSuccess:z,onRenderTextLayerError:T,onRenderTextLayerSuccess:Y,page:U,pageIndex:et,pageNumber:ct,renderForms:Et,renderTextLayer:C,rotate:bt,scale:dt}:null,[p,H,I,N,w,P,v,l,d,F,k,m,$,z,T,Y,U,et,ct,Et,C,bt,dt]),st=reactExports.useMemo(()=>makeEventProps(u,()=>U&&(dt?makePageCallback(U,dt):void 0)),[u,U,dt]),pt=`${et}@${dt}/${bt}`,wt=`${et}/${bt}`;function xt(){switch(Pt){case"custom":return invariant(g,'renderMode was set to "custom", but no customRenderer was passed.'),React.createElement(g,{key:`${pt}_custom`});case"none":return null;case"svg":return React.createElement(PageSVG,{key:`${wt}_svg`});case"canvas":default:return React.createElement(PageCanvas,{key:`${pt}_canvas`,canvasRef:ut})}}function Ut(){return C?React.createElement(TextLayer$1,{key:`${pt}_text`}):null}function Vt(){return mt?React.createElement(AnnotationLayer$1,{key:`${pt}_annotations`}):null}function Wt(){return React.createElement(PageContext.Provider,{value:nt},xt(),Ut(),Vt(),M)}function zt(){return ct?V===null||U===void 0||U===null?React.createElement(Message,{type:"loading"},typeof f=="function"?f():f):V===!1||U===!1?React.createElement(Message,{type:"error"},typeof R=="function"?R():R):Wt():React.createElement(Message,{type:"no-data"},typeof y=="function"?y():y)}return React.createElement("div",Object.assign({className:clsx(p,x),"data-page-number":ct,ref:mergeRefs(A,tt),style:{"--scale-factor":`${dt}`,backgroundColor:H||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"}},st),zt())},isFunctionOrNode=PropTypes.oneOfType([PropTypes.func,PropTypes.node]);Page.propTypes=Object.assign(Object.assign({},eventProps),{canvasBackground:PropTypes.string,canvasRef:isRef,children:PropTypes.node,className:isClassName,customRenderer:PropTypes.func,customTextRenderer:PropTypes.func,devicePixelRatio:PropTypes.number,error:isFunctionOrNode,height:PropTypes.number,imageResourcesPath:PropTypes.string,inputRef:isRef,loading:isFunctionOrNode,noData:isFunctionOrNode,onGetTextError:PropTypes.func,onGetTextSuccess:PropTypes.func,onLoadError:PropTypes.func,onLoadSuccess:PropTypes.func,onRenderError:PropTypes.func,onRenderSuccess:PropTypes.func,onRenderTextLayerError:PropTypes.func,onRenderTextLayerSuccess:PropTypes.func,pageIndex:isPageIndex,pageNumber:isPageNumber,pdf:isPdf,renderAnnotationLayer:PropTypes.bool,renderForms:PropTypes.bool,renderMode:isRenderMode,renderTextLayer:PropTypes.bool,rotate:isRotate,scale:PropTypes.number,width:PropTypes.number});const Page$1=Page;displayWorkerWarning();pdfjs$1.GlobalWorkerOptions.workerSrc="pdf.worker.js";const AnnotationLayer="",TextLayer="";pdfjs$1.GlobalWorkerOptions.workerSrc=`//unpkg.com/pdfjs-dist@${pdfjs$1.version}/legacy/build/pdf.worker.min.js`;const CertificatePopUp=({certificate:D})=>{const s=reactExports.useContext(MyContext),[O,a]=reactExports.useState(1);return s?jsxRuntimeExports.jsx(PopUp,{isOpen:s.isOpen,onClose:()=>s.setIsOpen(!1),children:jsxRuntimeExports.jsx(Document$1,{file:D.certificatePdfLink,onLoadSuccess:p=>{a(p._pdfInfo.numPages)},loading:jsxRuntimeExports.jsx(Loader,{}),children:Array.from(new Array(O),(p,G)=>jsxRuntimeExports.jsx(Page$1,{canvasBackground:"inherit",pageNumber:G+1,width:500},`page_${G+1}`))})}):null},CertificateCard=({certificate:D})=>{const s=reactExports.useContext(MyContext);return s?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:styles$1.card,children:[jsxRuntimeExports.jsx("h2",{className:styles$1.card__certificateName,children:D.name}),jsxRuntimeExports.jsx("button",{id:"buttonOpenPopUp",className:styles$1.card__seeButton,onClick:()=>s.setIsOpen(!0),children:"See"})]}),s.isOpen&&jsxRuntimeExports.jsx(CertificatePopUp,{certificate:D})]}):null},certificatesWrapper="_certificatesWrapper_1aes7_33",carousel="_carousel_1aes7_45",slides="_slides_1aes7_52",slide="_slide_1aes7_52",slidesLeft="_slidesLeft_1aes7_64",slidesRight="_slidesRight_1aes7_68",previousButton="_previousButton_1aes7_72",nextButton="_nextButton_1aes7_79",moveCloudRightToLeft="_moveCloudRightToLeft_1aes7_1",moveCloudLeftToRight="_moveCloudLeftToRight_1aes7_1",animationMainIsland="_animationMainIsland_1aes7_1",animationSmallIsland="_animationSmallIsland_1aes7_1",styles={certificatesWrapper,carousel,slides,slide,slidesLeft,slidesRight,previousButton,nextButton,moveCloudRightToLeft,moveCloudLeftToRight,animationMainIsland,animationSmallIsland},wildauCertificate=""+new URL("WildauCertificate-f0c4c844.pdf",import.meta.url).href,certificates=[{name:"Wildau-Kharkiv IT Bridge",certificatePdfLink:wildauCertificate}],useCertificatesCarousel=()=>{const[D,s]=reactExports.useState(1),[O,a]=reactExports.useState([]),[p,G]=reactExports.useState(!1),[H,ut]=reactExports.useState(!1),M=()=>{p||certificates.length-D*3>0&&(G(!0),setTimeout(()=>{s(I=>I+1),G(!1)},500))},x=()=>{!H&&D-1>0&&(ut(!0),setTimeout(()=>{s(g=>g-1),ut(!1)},500))};return reactExports.useEffect(()=>{if(certificates.length>0){const g=(D-1)*3,I=g+3;a(certificates.slice(g,I))}},[D]),{currentCertificates:O,isSwitchingLeft:p,isSwitchingRight:H,nextGroup:M,prevGroup:x}},CertificatesWrapper=()=>{const{currentCertificates:D,isSwitchingLeft:s,isSwitchingRight:O,nextGroup:a,prevGroup:p}=useCertificatesCarousel();return jsxRuntimeExports.jsx("div",{className:styles.certificatesWrapper,children:jsxRuntimeExports.jsxs("div",{className:styles.carousel,children:[!s&&!O&&jsxRuntimeExports.jsx("button",{className:styles.previousButton,onClick:p}),jsxRuntimeExports.jsx("div",{className:`${styles.slides} ${s?styles.slidesLeft:O?styles.slidesRight:""}`,children:D.map((G,H)=>jsxRuntimeExports.jsx("div",{className:styles.slide,children:jsxRuntimeExports.jsx(CertificateCard,{certificate:G})},`certificate_${H}`))}),!s&&!O&&jsxRuntimeExports.jsx("button",{className:styles.nextButton,onClick:a})]})})},CertificatesPage=()=>{const[D,s]=reactExports.useState(!1);return jsxRuntimeExports.jsx(MyContext.Provider,{value:{isOpen:D,setIsOpen:s},children:jsxRuntimeExports.jsx(CertificatesWrapper,{})})};export{CertificatesPage as default};
